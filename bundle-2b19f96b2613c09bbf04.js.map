{"version":3,"sources":["webpack://@creature-chess/app/./src/display/style/index.scss?5597","webpack://@creature-chess/app/../shoki-board-react/style.css?ba74","webpack://@creature-chess/app/./src/app.tsx","webpack://@creature-chess/app/./src/auth/LoginPage.tsx","webpack://@creature-chess/app/./src/auth/RegistrationPage.tsx","webpack://@creature-chess/app/./src/auth/config.ts","webpack://@creature-chess/app/./src/auth/hooks.ts","webpack://@creature-chess/app/./src/auth/index.ts","webpack://@creature-chess/app/./src/auth/registration/NicknameSelection.tsx","webpack://@creature-chess/app/./src/auth/registration/PictureSelection.tsx","webpack://@creature-chess/app/./src/auth/utils/isRegistered.ts","webpack://@creature-chess/app/./src/auth/utils/patchUser.ts","webpack://@creature-chess/app/./src/display/countdown.tsx","webpack://@creature-chess/app/./src/display/footer.tsx","webpack://@creature-chess/app/./src/display/index.ts","webpack://@creature-chess/app/./src/display/loading.tsx","webpack://@creature-chess/app/./src/display/segment.tsx","webpack://@creature-chess/app/./src/game/animation.ts","webpack://@creature-chess/app/./src/game/components/piece/animatedPiece.tsx","webpack://@creature-chess/app/./src/game/components/piece/interactablePiece.tsx","webpack://@creature-chess/app/./src/game/components/projectile.tsx","webpack://@creature-chess/app/./src/game/connection-status.ts","webpack://@creature-chess/app/./src/game/index.ts","webpack://@creature-chess/app/./src/game/layouts/desktopGame.tsx","webpack://@creature-chess/app/./src/game/layouts/mobileGame.tsx","webpack://@creature-chess/app/./src/game/module/board/boardContainer.tsx","webpack://@creature-chess/app/./src/game/module/board/gameBoard.tsx","webpack://@creature-chess/app/./src/game/module/board/index.ts","webpack://@creature-chess/app/./src/game/module/board/overlays/boardOverlay.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/h2h/headToHeadStats.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/matchRewardsOverlay.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/opponentBoardPlaceholder.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/quickChat/quickChatBox.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/quickChat/quickChatButton.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/quickChat/quickChatButtonArray.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/readyOverlay.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/readyUpButton.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/reconnectOverlay.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/selectedCreature.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/spectatingOverlay.tsx","webpack://@creature-chess/app/./src/game/module/board/overlays/victoryOverlay.tsx","webpack://@creature-chess/app/./src/game/module/board/responsiveBoardStyles.tsx","webpack://@creature-chess/app/./src/game/module/board/sagas/clickPieceSaga.ts","webpack://@creature-chess/app/./src/game/module/board/sagas/clickTileSaga.ts","webpack://@creature-chess/app/./src/game/module/board/tileInteraction.ts","webpack://@creature-chess/app/./src/game/module/board/use-window-size.ts","webpack://@creature-chess/app/./src/game/module/cardShop/cardShop.tsx","webpack://@creature-chess/app/./src/game/module/cardShop/closeShopOnFirstBuySaga.ts","webpack://@creature-chess/app/./src/game/module/cardShop/index.ts","webpack://@creature-chess/app/./src/game/module/chat/index.ts","webpack://@creature-chess/app/./src/game/module/chat/sagas.ts","webpack://@creature-chess/app/./src/game/module/chat/state.ts","webpack://@creature-chess/app/./src/game/module/help.tsx","webpack://@creature-chess/app/./src/game/module/index.ts","webpack://@creature-chess/app/./src/game/module/match.ts","webpack://@creature-chess/app/./src/game/module/nowPlaying.tsx","webpack://@creature-chess/app/./src/game/module/phaseInfo.tsx","webpack://@creature-chess/app/./src/game/module/playerList/components/playerList.tsx","webpack://@creature-chess/app/./src/game/module/playerList/components/selectors.ts","webpack://@creature-chess/app/./src/game/module/playerList/index.ts","webpack://@creature-chess/app/./src/game/module/playerList/state.ts","webpack://@creature-chess/app/./src/game/module/profile/index.ts","webpack://@creature-chess/app/./src/game/module/profile/pieceCount.tsx","webpack://@creature-chess/app/./src/game/module/profile/profile.tsx","webpack://@creature-chess/app/./src/game/module/roundIndicator.tsx","webpack://@creature-chess/app/./src/game/module/settings/index.ts","webpack://@creature-chess/app/./src/game/module/settings/quitGameButton.tsx","webpack://@creature-chess/app/./src/game/module/settings/settings.tsx","webpack://@creature-chess/app/./src/game/page.tsx","webpack://@creature-chess/app/./src/game/sagas/actions/preventAccidentalClose.ts","webpack://@creature-chess/app/./src/game/sagas/events/battle.ts","webpack://@creature-chess/app/./src/game/sagas/events/index.ts","webpack://@creature-chess/app/./src/game/sagas/events/roundUpdate.ts","webpack://@creature-chess/app/./src/game/sagas/events/ui.ts","webpack://@creature-chess/app/./src/game/sagas/index.ts","webpack://@creature-chess/app/./src/game/state.ts","webpack://@creature-chess/app/./src/game/ui/actions.ts","webpack://@creature-chess/app/./src/game/ui/index.ts","webpack://@creature-chess/app/./src/game/ui/overlay.ts","webpack://@creature-chess/app/./src/game/ui/reducer.ts","webpack://@creature-chess/app/./src/index.tsx","webpack://@creature-chess/app/./src/lobby/events.ts","webpack://@creature-chess/app/./src/lobby/index.ts","webpack://@creature-chess/app/./src/lobby/lobbyPage.tsx","webpack://@creature-chess/app/./src/lobby/state.ts","webpack://@creature-chess/app/./src/menu/actions.ts","webpack://@creature-chess/app/./src/menu/get-url-parameter.ts","webpack://@creature-chess/app/./src/menu/index.ts","webpack://@creature-chess/app/./src/menu/leaderboard.tsx","webpack://@creature-chess/app/./src/menu/menuPage.tsx","webpack://@creature-chess/app/./src/menu/state.ts","webpack://@creature-chess/app/./src/networking/actions.ts","webpack://@creature-chess/app/./src/networking/index.ts","webpack://@creature-chess/app/./src/networking/sagas/findGame.ts","webpack://@creature-chess/app/./src/networking/sagas/game/incoming.ts","webpack://@creature-chess/app/./src/networking/sagas/game/index.ts","webpack://@creature-chess/app/./src/networking/sagas/game/outgoing.ts","webpack://@creature-chess/app/./src/networking/sagas/lobby.ts","webpack://@creature-chess/app/./src/networking/sagas/networkingSaga.ts","webpack://@creature-chess/app/./src/networking/socket.ts","webpack://@creature-chess/app/./src/store/reducers.ts","webpack://@creature-chess/app/./src/store/saga.ts","webpack://@creature-chess/app/./src/store/sagaContext.ts","webpack://@creature-chess/app/./src/store/store.ts","webpack://@creature-chess/app/../battle/lib/battleSaga.js","webpack://@creature-chess/app/../battle/lib/events.js","webpack://@creature-chess/app/../battle/lib/index.js","webpack://@creature-chess/app/../battle/lib/pathfinding.js","webpack://@creature-chess/app/../battle/lib/turnSimulator.js","webpack://@creature-chess/app/../battle/lib/utils/findTargetId.js","webpack://@creature-chess/app/../battle/lib/utils/get-type-attack-bonus.js","webpack://@creature-chess/app/../battle/lib/utils/getTargetAttackPositions.js","webpack://@creature-chess/app/../battle/lib/utils/inAttackRange.js","webpack://@creature-chess/app/../battle/lib/utils/is-a-team-defeated.js","webpack://@creature-chess/app/../gamemode/lib/definitions/definitionClass.js","webpack://@creature-chess/app/../gamemode/lib/definitions/index.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/dependencies.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/entity.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/events.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/index.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/battle.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/evolution.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/fillBoard.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/health.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/matchRewards.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/phases/index.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/phases/preparing.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/phases/ready.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/root.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/setStatusOnQuit.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/sagas/xp.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/selectors.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/cardShop.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/commands.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/index.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/playerInfo/index.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/playerInfo/reducer.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/selectors.js","webpack://@creature-chess/app/../gamemode/lib/entities/player/state/spectating.js","webpack://@creature-chess/app/../gamemode/lib/features/index.js","webpack://@creature-chess/app/../gamemode/lib/features/match/index.js","webpack://@creature-chess/app/../gamemode/lib/features/match/playerVariables.js","webpack://@creature-chess/app/../gamemode/lib/features/match/sagas/clientFinishMatch.js","webpack://@creature-chess/app/../gamemode/lib/features/match/sagas/root.js","webpack://@creature-chess/app/../gamemode/lib/features/match/sagas/updateMatchVariable.js","webpack://@creature-chess/app/../gamemode/lib/features/match/selectors.js","webpack://@creature-chess/app/../gamemode/lib/game/cardDeck.js","webpack://@creature-chess/app/../gamemode/lib/game/events.js","webpack://@creature-chess/app/../gamemode/lib/game/game.js","webpack://@creature-chess/app/../gamemode/lib/game/gameLoop/index.js","webpack://@creature-chess/app/../gamemode/lib/game/gameLoop/phases/index.js","webpack://@creature-chess/app/../gamemode/lib/game/gameLoop/phases/playing.js","webpack://@creature-chess/app/../gamemode/lib/game/gameLoop/phases/preparing.js","webpack://@creature-chess/app/../gamemode/lib/game/gameLoop/phases/ready.js","webpack://@creature-chess/app/../gamemode/lib/game/index.js","webpack://@creature-chess/app/../gamemode/lib/game/match.js","webpack://@creature-chess/app/../gamemode/lib/game/opponentProvider.js","webpack://@creature-chess/app/../gamemode/lib/game/player/playerGameDeckSaga.js","webpack://@creature-chess/app/../gamemode/lib/game/playerList.js","webpack://@creature-chess/app/../gamemode/lib/game/playerPropertyUpdates.js","webpack://@creature-chess/app/../gamemode/lib/game/publicEvents.js","webpack://@creature-chess/app/../gamemode/lib/game/readyNotifier/index.js","webpack://@creature-chess/app/../gamemode/lib/game/readyNotifier/limitedQueue.js","webpack://@creature-chess/app/../gamemode/lib/game/roundInfo/index.js","webpack://@creature-chess/app/../gamemode/lib/game/roundInfo/state.js","webpack://@creature-chess/app/../gamemode/lib/game/sagas.js","webpack://@creature-chess/app/../gamemode/lib/game/store.js","webpack://@creature-chess/app/../gamemode/lib/index.js","webpack://@creature-chess/app/../gamemode/lib/player/pieceSelectors.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/buyCard.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/buyXp.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/dropPiece.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/index.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/quickChat.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/quitGame.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/readyUp.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/rerollCards.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/saga.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/sellPiece.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/spectate.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/swapPiece.js","webpack://@creature-chess/app/../gamemode/lib/playerActions/toggleShopLock.js","webpack://@creature-chess/app/../models/lib/config/config.live.js","webpack://@creature-chess/app/../models/lib/config/config.local.js","webpack://@creature-chess/app/../models/lib/config/index.js","webpack://@creature-chess/app/../models/lib/constants.js","webpack://@creature-chess/app/../models/lib/creatureDefinition.js","webpack://@creature-chess/app/../models/lib/creatureType.js","webpack://@creature-chess/app/../models/lib/game-phase.js","webpack://@creature-chess/app/../models/lib/getXpToNextLevel.js","webpack://@creature-chess/app/../models/lib/index.js","webpack://@creature-chess/app/../models/lib/nickname.js","webpack://@creature-chess/app/../models/lib/options.js","webpack://@creature-chess/app/../models/lib/pieceCombat.js","webpack://@creature-chess/app/../models/lib/player-list-player.js","webpack://@creature-chess/app/../models/lib/position.js","webpack://@creature-chess/app/../models/lib/quickChat.js","webpack://@creature-chess/app/../models/lib/streakType.js","webpack://@creature-chess/app/../models/lib/titles.js","webpack://@creature-chess/app/../networking/lib/client-to-server.js","webpack://@creature-chess/app/../networking/lib/index.js","webpack://@creature-chess/app/../networking/lib/server-to-client/server-to-client-game.js","webpack://@creature-chess/app/../networking/lib/server-to-client/server-to-client-lobby.js","webpack://@creature-chess/app/../shoki-board-react/lib/components/BoardGrid.js","webpack://@creature-chess/app/../shoki-board-react/lib/components/BoardItems.js","webpack://@creature-chess/app/../shoki-board-react/lib/components/index.js","webpack://@creature-chess/app/../shoki-board-react/lib/components/tile/DroppableTile.js","webpack://@creature-chess/app/../shoki-board-react/lib/components/tile/UndroppableTile.js","webpack://@creature-chess/app/../shoki-board-react/lib/components/tile/getOverlayClassName.js","webpack://@creature-chess/app/../shoki-board-react/lib/context.js","webpack://@creature-chess/app/../shoki-board-react/lib/index.js","webpack://@creature-chess/app/../shoki-board/lib/index.js","webpack://@creature-chess/app/../shoki-board/lib/positionSort.js","webpack://@creature-chess/app/../shoki-board/lib/selectors.js","webpack://@creature-chess/app/../shoki-board/lib/state.js","webpack://@creature-chess/app/../shoki-board/lib/utils/filter.js","webpack://@creature-chess/app/../shoki-board/lib/utils/mergeBoards.js","webpack://@creature-chess/app/../shoki-board/lib/utils/rotateGridPosition.js","webpack://@creature-chess/app/../shoki-engine/lib/entity/dependency.js","webpack://@creature-chess/app/../shoki-engine/lib/entity/entity.js","webpack://@creature-chess/app/../shoki-engine/lib/entity/variablesStore.js","webpack://@creature-chess/app/../shoki-engine/lib/index.js","webpack://@creature-chess/app/../shoki-networking/lib/actionStream/incomingSaga.js","webpack://@creature-chess/app/../shoki-networking/lib/actionStream/index.js","webpack://@creature-chess/app/../shoki-networking/lib/actionStream/outgoingSaga.js","webpack://@creature-chess/app/../shoki-networking/lib/index.js","webpack://@creature-chess/app/../shoki-networking/lib/protocol.js","webpack://@creature-chess/app/../shoki-networking/lib/registry/incoming.js","webpack://@creature-chess/app/../shoki-networking/lib/registry/outgoing.js","webpack://@creature-chess/app/../ui/lib/button.js","webpack://@creature-chess/app/../ui/lib/cardShop/card.js","webpack://@creature-chess/app/../ui/lib/cardShop/cardSelector.js","webpack://@creature-chess/app/../ui/lib/cardShop/cardShop.js","webpack://@creature-chess/app/../ui/lib/cardShop/currentCard.js","webpack://@creature-chess/app/../ui/lib/cardShop/index.js","webpack://@creature-chess/app/../ui/lib/display/TypeIndicator.js","webpack://@creature-chess/app/../ui/lib/display/creatureImage.js","webpack://@creature-chess/app/../ui/lib/display/index.js","webpack://@creature-chess/app/../ui/lib/display/label.js","webpack://@creature-chess/app/../ui/lib/display/progressBar.js","webpack://@creature-chess/app/../ui/lib/hooks/useOnClickOutside.js","webpack://@creature-chess/app/../ui/lib/index.js","webpack://@creature-chess/app/../ui/lib/layout/half.js","webpack://@creature-chess/app/../ui/lib/layout/index.js","webpack://@creature-chess/app/../ui/lib/layout/layout.js","webpack://@creature-chess/app/../ui/lib/piece/healthbar.js","webpack://@creature-chess/app/../ui/lib/piece/index.js","webpack://@creature-chess/app/../ui/lib/piece/meta.js","webpack://@creature-chess/app/../ui/lib/piece/piece.js","webpack://@creature-chess/app/../ui/lib/piece/stageIndicator.js","webpack://@creature-chess/app/../ui/lib/player/avatar.js","webpack://@creature-chess/app/../ui/lib/player/healthbar.js","webpack://@creature-chess/app/../ui/lib/player/index.js","webpack://@creature-chess/app/../ui/lib/player/name.js","webpack://@creature-chess/app/../ui/lib/player/profile.js","webpack://@creature-chess/app/../ui/lib/player/title.js","webpack://@creature-chess/app/../ui/lib/playerList/battleInfo.js","webpack://@creature-chess/app/../ui/lib/playerList/index.js","webpack://@creature-chess/app/../ui/lib/playerList/playerListItem.js","webpack://@creature-chess/app/../ui/lib/playerList/statusPlayerListItem.js","webpack://@creature-chess/app/../ui/lib/playerList/streakIndicator.js","webpack://@creature-chess/app/webpack/bootstrap","webpack://@creature-chess/app/webpack/runtime/compat get default export","webpack://@creature-chess/app/webpack/runtime/define property getters","webpack://@creature-chess/app/webpack/runtime/global","webpack://@creature-chess/app/webpack/runtime/harmony module decorator","webpack://@creature-chess/app/webpack/runtime/hasOwnProperty shorthand","webpack://@creature-chess/app/webpack/runtime/make namespace object","webpack://@creature-chess/app/webpack/runtime/node module decorator","webpack://@creature-chess/app/webpack/runtime/jsonp chunk loading","webpack://@creature-chess/app/webpack/startup"],"names":[],"mappings":"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qDAAqD;AACrD;AACA;AACA;AACA;AACA,KAAK;AACL,0BAA0B,uCAAuC;AACjE,CAAC,EAAE;AACH,iBAAiB;;;;;;;;;;;;ACZJ;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,iBAAiB;AACjB,yBAAyB,mBAAO,CAAC,4CAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;;AC/DJ;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,cAAc;AACd,yBAAyB,mBAAO,CAAC,4CAAO;AACxC;AACA,wCAAwC,sBAAsB;AAC9D;AACA;AACA,YAAY,QAAW;AACvB;AACA,kCAAkC,8CAA8C;AAChF;AACA,kCAAkC,wDAAwD;AAC1F;AACA,kCAAkC,yDAAyD;AAC3F;AACA,cAAc;;;;;;;;;;;;ACnCD;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,eAAe,GAAG,eAAe,GAAG,cAAc;AAClD,eAAe,mBAAO,CAAC,0CAAU;AACjC;AACA,gBAAgB,mBAAO,CAAC,4CAAW;AACnC;AACA,gBAAgB,mBAAO,CAAC,4CAAW;AACnC;;;;;;;;;;;;ACfa;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,eAAe;AACf,yBAAyB,mBAAO,CAAC,4CAAO;AACxC,gBAAgB,mBAAO,CAAC,4CAAW;AACnC;AACA;AACA,mCAAmC,+BAA+B;AAClE,wCAAwC,4BAA4B;AACpE;AACA;AACA,gDAAgD,mGAAmG;AACnJ,wCAAwC,+BAA+B;AACvE,8CAA8C,qDAAqD;AACnG,mDAAmD,4DAA4D;AAC/G;AACA;AACA,eAAe;;;;;;;;;;;;ACpDF;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,eAAe;AACf,yBAAyB,mBAAO,CAAC,4CAAO;AACxC;AACA;AACA,wCAAwC,iDAAiD;AACzF,oCAAoC,8CAA8C;AAClF;AACA;AACA;AACA,oCAAoC,uBAAuB;AAC3D;AACA,eAAe;;;;;;;;;;;;AChCF;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,kBAAkB;AAClB,gCAAgC;AAChC;AACA,iEAAiE,0CAA0C,oBAAoB,EAAE,oBAAoB,oBAAoB,EAAE;AAC3K,wDAAwD;AACxD;AACA,uBAAuB;AACvB,KAAK;AACL;AACA,gCAAgC;;;;;;;;;;;;AC/BnB;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,kBAAkB;AAClB,qBAAqB;AACrB,yBAAyB,mBAAO,CAAC,4CAAO;AACxC,oBAAoB,mBAAO,CAAC,2DAAa;AACzC,cAAc,mBAAO,CAAC,iDAAc;AACpC,WAAW,mBAAO,CAAC,8CAAoB;AACvC,kBAAkB,mBAAO,CAAC,gDAAiB;AAC3C,mBAAmB,mBAAO,CAAC,2DAAe;AAC1C,aAAa,mBAAO,CAAC,0CAAe;AACpC;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,4DAA4D,oEAAoE,EAAE;AAClI,mEAAmE,iCAAiC,EAAE;AACtG,mDAAmD,uDAAuD,kEAAkE,mCAAmC,GAAG,EAAE,EAAE;AACtN;AACA;AACA,uDAAuD,2CAA2C,gEAAgE,EAAE,EAAE,EAAE;AACxK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,mEAAmE,eAAe,EAAE;AACpF,wCAAwC;AACxC;AACA,wCAAwC;AACxC,yCAAyC,qGAAqG;AAC9I;AACA;AACA,qBAAqB;;;;;;;;;;;;AC3GR;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA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CnD;AACA,iEAAiE,6GAA6G,EAAE;AAChL;AACA;AACA;AACA;AACA,iCAAiC,iEAAiE;AAClG,0CAA0C,4CAA4C;AACtF;AACA,qBAAqB;;;;;;;;;;;;ACnCR;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,wBAAwB;AACxB,yBAAyB,mBAAO,CAAC,4CAAO;AACxC,oBAAoB,mBAAO,CAAC,2DAAa;AACzC,0BAA0B,mBAAO,CAAC,mEAA4B;AAC9D,qBAAqB,mBAAO,CAAC,yEAAgB;AAC7C;AACA,uEAAuE,uCAAuC,EAAE;AAChH;AACA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE;AACA,0CAA0C,oBAAoB;AAC9D,0CAA0C,oBAAoB;AAC9D;AACA,wBAAwB;;;;;;;;;;;;ACtCX;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,wBAAwB;AACxB,yBAAyB,mBAAO,CAAC,4CAAO;AACxC,oBAAoB,mBAAO,CAAC,2DAAa;AACzC,iBAAiB,mBAAO,CAAC,0DAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,mBAAmB;AACxF;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,8CAA8C,0CAA0C;AACxF;AACA,0CAA0C,0CAA0C;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,4BAA4B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AACA,2BAA2B;AAC3B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK,EAAE,EAAwB;AACnD;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA,+BAA+B,EAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,yBAAyB,EAAE;AACnG;AACA;AACA,wEAAwE,yBAAyB,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;;;;;;;;;;;;AChHR;AACb,kBAAkB;AAClB,mBAAmB,GAAG,mBAAmB;AACzC,iBAAiB,mBAAO,CAAC,0DAA0B;AACnD,cAAc,mBAAO,CAAC,iDAAc;AACpC,gBAAgB,mBAAO,CAAC,kDAAkB;AAC1C,sBAAsB,mBAAO,CAAC,6EAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mBAAmB;AACnB;AACA,4BAA4B,wDAAwD,QAAQ,gCAAgC,aAAa,EAAE,EAAE,GAAG;AAChJ;AACA,mBAAmB;;;;;;;;;;;;ACpDN;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,qBAAqB;AACrB,cAAc,mBAAO,CAAC,4CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,YAAY;AACZ;AACA,qBAAqB;;;;;;;;;;;;ACnCR;AACb;AACA;AACA,kCA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CAAC,uCAAY;AACjC,eAAe,mBAAO,CAAC,6CAAW;AAClC,gBAAgB,mBAAO,CAAC,+CAAY;AACpC,uBAAuB,mBAAO,CAAC,kEAAkB;AACjD,gBAAgB,mBAAO,CAAC,8FAAoB;AAC5C,oBAAoB,mBAAO,CAAC,2DAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,wCAAwC;AACxC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB;;;;;;;;;;;;AC5IH;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AAC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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL,EAAE;AACF,yBAAyB;;;;;;;;;;;;AC1JZ;AACb,kBAAkB;AAClB,yBAAyB,GAAG,uBAAuB,GAAG,2BAA2B,GAAG,yBAAyB;AAC7G,yBAAyB;AACzB,2BAA2B;AAC3B,8CAA8C,UAAU,4CAA4C,2BAA2B,EAAE,EAAE;AACnI,uBAAuB;AACvB,0CAA0C,UAAU,8CAA8C,eAAe,EAAE,EAAE;AACrH,yBAAyB;;;;;;;;;;;;ACRZ;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,mBAAmB,GAAG,yBAAyB,GAAG,oBAAoB;AACtE,qFAA0C;AAC1C,mBAAmB,mBAAO,CAAC,iDAAc;AACzC;AACA;;;;;;;;;;;;ACba;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,4BAA4B;AAC5B;AACA;AACA,SAAS,mBAAO,CAAC,0EAAkB;AACnC,iCAAiC,mBAAO,CAAC,yFAAkC;AAC3E;AACA;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,wBAAwB,EAAE;AACxF;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sBAAsB;AACzD;AACA;AACA;AACA,gDAAgD,+CAA+C,EAAE;AACjG;AACA;AACA;AACA,gCAAgC,kCAAkC,EAAE;AACpE;AACA;AACA,4BAA4B;;;;;;;;;;;;AC5Ef;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,oBAAoB;AACpB,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,cAAc,mBAAO,CAAC,iDAAc;AACpC,8BAA8B,mBAAO,CAAC,mFAA+B;AACrE,sBAAsB,mBAAO,CAAC,mEAAuB;AACrD,qBAAqB,mBAAO,CAAC,iEAAsB;AACnD,oBAAoB,mBAAO,CAAC,mDAAe;AAC3C;AACA;AACA;AACA;AACA,4CAA4C,2BAA2B;AACvE;AACA;AACA,iCAAiC,6CAA6C;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mBAAmB,0DAA0D;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc,6BAA6B,qBAAqB,4BAA4B,2B;AAC1I;AACA,oHAAoH,GAAG;AACvH;AACA;AACA;AACA;AACA,aAAa,kCAAkC;AAC/C,2CAA2C,YAAY;AACvD;AACA;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iHAAiH,6DAA6D;AAC9K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;;;;;;;;;;;;ACtLa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,oBAAoB;AACpB,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,cAAc,mBAAO,CAAC,iDAAc;AACpC;AACA,+EAA+E,mEAAmE,EAAE;AACpJ;AACA;AACA;AACA;AACA;AACA,+EAA+E,mBAAmB;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB;;;;;;;;;;;;AC3EP;AACb;AACA,kBAAkB;AAClB,0BAA0B,GAAG,oBAAoB,GAAG,qBAAqB,GAAG,wBAAwB;AACpG,eAAe,mBAAO,CAAC,sDAAwB;AAC/C;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,mDAAmD,oEAAoE;AACvH,qBAAqB;AACrB,kDAAkD,mEAAmE;AACrH,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;;;;;;;;;;;AC5Cb;AACb,kBAAkB;AAClB,gCAAgC;AAChC,eAAe,mBAAO,CAAC,sDAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAW;AACtC;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;;;;;;;;;;;;AC9BnB;AACb,kBAAkB;AAClB,qBAAqB;AACrB,eAAe,mBAAO,CAAC,sDAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;;;;;;;;;;;ACVR;AACb,kBAAkB;AAClB,uBAAuB;AACvB,cAAc,mBAAO,CAAC,iDAAc;AACpC;AACA,qFAAqF,kBAAkB,EAAE;AACzG;AACA;AACA;AACA,uBAAuB;;;;;;;;;;;;ACTV;AACb;AACA,kBAAkB;AAClB,iBAAiB,GAAG,mBAAmB;AACvC,eAAe,mBAAO,CAAC,sDAAwB;AAC/C;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,0DAA0D;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,EAAE;AACF,iBAAiB;;;;;;;;;;;;ACpEJ;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,kBAAkB;AAClB,yBAAyB,GAAG,yBAAyB;AACrD,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,wBAAwB,mBAAO,CAAC,yEAAmB;AACnD,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uCAAuC,8BAA8B;AACrE,yBAAyB;AACzB,qCAAqC,oDAAoD;AACzF,yBAAyB;;;;;;;;;;;;AC1FZ;AACb,kBAAkB;AAClB,mCAAmC;AACnC,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,+CAA+C,sDAAsD;AACrG,mCAAmC;;;;;;;;;;;;ACLtB;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,oBAAoB;AACpB,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,eAAe,mBAAO,CAAC,mDAAe;AACtC,kBAAkB,mBAAO,CAAC,qEAAsB;AAChD,cAAc,mBAAO,CAAC,+DAAS;AAC/B,aAAa,mBAAO,CAAC,mEAAc;AACnC,oBAAoB;AACpB;AACA;AACA,sCAAsC,4BAA4B,kIAAkI;AACpM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL,CAAC;;;;;;;;;;;;AC7DY;AACb,kBAAkB;AAClB,mCAAmC,GAAG,mCAAmC,GAAG,8BAA8B,GAAG,+BAA+B,GAAG,wBAAwB,GAAG,8BAA8B,GAAG,6BAA6B,GAAG,2BAA2B;AACtQ,gBAAgB,mBAAO,CAAC,6FAAkB;AAC1C,2BAA2B;AAC3B,6BAA6B;AAC7B,8BAA8B;AAC9B,wBAAwB;AACxB,+BAA+B;AAC/B,8BAA8B;AAC9B,mCAAmC;AACnC,mCAAmC;AACnC;AACA;AACA;AACA;;;;;;;;;;;;ACfa;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,mCAAmC,GAAG,oBAAoB,GAAG,4BAA4B,GAAG,sBAAsB,GAAG,sBAAsB,GAAG,6BAA6B,GAAG,oBAAoB;AAClM,eAAe,mBAAO,CAAC,2DAAU;AACjC;AACA,sHAAsD;AACtD,cAAc,mBAAO,CAAC,+DAAS;AAC/B;AACA;AACA,iIAA2D;AAC3D,uGAA0C;AAC1C,qBAAqB,mBAAO,CAAC,uEAAgB;AAC7C;;;;;;;;;;;;ACnBa;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,oBAAoB;AACpB,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,kBAAkB,mBAAO,CAAC,8EAAoB;AAC9C,iBAAiB,mBAAO,CAAC,4EAAmB;AAC5C,eAAe,mBAAO,CAAC,4DAAW;AAClC,qBAAqB,mBAAO,CAAC,6EAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB;;;;;;;;;;;;ACzFP;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,qBAAqB;AACrB,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,cAAc,mBAAO,CAAC,iDAAc;AACpC,qBAAqB,mBAAO,CAAC,gFAAgC;AAC7D,oBAAoB,mBAAO,CAAC,kEAAsB;AAClD,kBAAkB,mBAAO,CAAC,8EAAoB;AAC9C,qBAAqB,mBAAO,CAAC,wEAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,oCAAoC,gCAAgC,EAAE,EAAE;AACrJ,+GAA+G,oGAAoG,EAAE;AACrN;AACA;AACA,+GAA+G,oGAAoG,EAAE;AACrN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2GAA2G,8EAA8E,EAAE;AAC3L;AACA;AACA;AACA;AACA;AACA;AACA,wJAAwJ,aAAa,EAAE;AACvK;AACA;AACA;AACA,0FAA0F,aAAa,EAAE;AACzG;AACA;AACA;AACA,mEAAmE,sBAAsB,yBAAyB;AAClH,iHAAiH,8BAA8B;AAC/I;AACA;AACA;AACA;AACA,0FAA0F,aAAa,EAAE;AACzG,mEAAmE,WAAW,yBAAyB;AACvG,2GAA2G,mEAAmE,EAAE;AAChL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iHAAiH,8BAA8B;AAC/I;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;;;;;;;;;;;;ACvLR;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAA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CAAC,0GAA0B;AAClD,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,eAAe,mBAAO,CAAC,4DAAW;AAClC,iBAAiB,mBAAO,CAAC,4EAAmB;AAC5C,eAAe,mBAAO,CAAC,iEAAU;AACjC,kBAAkB,mBAAO,CAAC,8EAAoB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,gCAAgC;AACnH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD,qCAAqC;AACrC;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,0BAA0B;;;;;;;;;;;;ACrJb;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,oBAAoB;AACpB,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,kBAAkB,mBAAO,CAAC,8EAAa;AACvC,cAAc,mBAAO,CAAC,sEAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB;;;;;;;;;;;;AC9CP;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,4BAA4B;AAC5B,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,+DAAyB;AAChD,eAAe,mBAAO,CAAC,+DAAc;AACrC,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,kBAAkB,mBAAO,CAAC,iFAAuB;AACjD,kBAAkB,mBAAO,CAAC,qEAAiB;AAC3C,WAAW,mBAAO,CAAC,0DAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,sCAAsC,EAAE;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,4BAA4B;;;;;;;;;;;;ACvHf;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,wBAAwB;AACxB,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,+DAAyB;AAChD,iBAAiB,mBAAO,CAAC,+EAAsB;AAC/C,kBAAkB,mBAAO,CAAC,qEAAiB;AAC3C,kBAAkB,mBAAO,CAAC,wEAAc;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,w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AACA;AACA,oBAAoB,KAAK,EAAE,EAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,uBAAuB;AACzG;AACA;AACA;AACA,iFAAiF,+DAA+D,EAAE;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB;;;;;;;;;;;;ACrGP;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,qBAAqB,GAAG,qBAAqB;AAC7C,eAAe,mBAAO,CAAC,mDAAe;AACtC,kCAAkC,8CAA8C;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;;;;;;;;;;;;AClER;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,uBAAuB,GAAG,6BAA6B,GAAG,0BAA0B;AACpF,gBAAgB,mBAAO,CAAC,6FAAkB;AAC1C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ACL;AACA,kBAAkB;;;;;;;;;;;;AC/DL;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,gBAAgB;AAChB,aAAa,mBAAO,CAAC,qEAAM;AAC3B,eAAe,mBAAO,CAAC,yDAAQ;AAC/B,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,oBAAoB,mBAAO,CAAC,4DAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mFAAmF;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,eAAe,EAAE;AAChF,+BAA+B,2CAA2C;AAC1E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,sCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sBAAsB,EAAE;AAC/E;AACA,+FAA+F,sBAAsB;AACrH;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,kBAAkB;AACjG;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,qCAAqC,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,SAAS,4BAA4B;AAC7D;AACA;AACA;AACA,0FAA0F,UAAU;AACpG;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA,iDAAiD,WAAW;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kCAAkC;AAC5D;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;;;;;;;;;;;;AC7OH;AACb,kBAAkB;AAClB,iCAAiC,GAAG,gCAAgC,GAAG,mCAAmC,GAAG,oCAAoC,GAAG,8BAA8B,GAAG,uBAAuB,GAAG,6BAA6B;AAC5O,gBAAgB,mBAAO,CAAC,6FAAkB;AAC1C,6BAA6B;AAC7B,uBAAuB;AACvB,8BAA8B;AAC9B,oCAAoC;AACpC,mCAAmC;AACnC,gCAAgC;AAChC,iCAAiC;AACjC;AACA;AACA;AACA;;;;;;;;;;;;ACda;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,YAAY;AACZ,eAAe,mBAAO,CAAC,+CAAQ;AAC/B,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,yBAAyB,mBAAO,CAAC,oEAAoB;AACrD,mBAAmB,mBAAO,CAAC,wDAAc;AACzC,iBAAiB,mBAAO,CAAC,oDAAY;AACrC,eAAe,mBAAO,CAAC,gDAAU;AACjC,cAAc,mBAAO,CAAC,8CAAS;AAC/B,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,cAAc,mBAAO,CAAC,8CAAS;AAC/B,2BAA2B,mBAAO,CAAC,sFAA6B;AAChE,kBAAkB,mBAAO,CAAC,8FAAoC;AAC9D,qBAAqB,mBAAO,CAAC,4DAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,gEAAgE,sBAAsB;AACtF,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,yCAAyC,kGAAkG,EAAE,UAAU;AACzM,gDAAgD,2CAA2C,6EAA6E,EAAE,EAAE;AAC5K,yCAAyC,yCAAyC;AAClF,iDAAiD,oCAAoC;AACrF;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,0CAA0C,sBAAsB;AAChE;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;;;;;;;;;;;;ACjIC;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,oBAAoB;AACpB,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,eAAe,mBAAO,CAAC,+DAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK,EAAE,EAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,eAAe,EAAE;AACzG;AACA;AACA,qBAAqB;AACrB;AACA,KAAK;AACL;AACA,oBAAoB;;;;;;;;;;;;ACnEP;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,qBAAqB,GAAG,yBAAyB,GAAG,uBAAuB;AAC3E,gBAAgB,mBAAO,CAAC,kEAAW;AACnC;AACA,kBAAkB,mBAAO,CAAC,sEAAa;AACvC;AACA,cAAc,mBAAO,CAAC,8DAAS;AAC/B;;;;;;;;;;;;ACfa;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,uBAAuB;AACvB,aAAa,mBAAO,CAAC,0DAAS;AAC9B,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,cAAc,mBAAO,CAAC,sDAAO;AAC7B,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,kBAAkB,mBAAO,CAAC,gEAAiB;AAC3C,kBAAkB,mBAAO,CAAC,sFAAmC;AAC7D,eAAe,mBAAO,CAAC,kFAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G,wCAAwC,EAAE;AACxJ;AACA,+GAA+G,qCAAqC;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,uBAAuB,EAAE;AAC3H,mEAAmE,0CAA0C,EAAE;AAC/G,oDAAoD,+CAA+C,EAAE;AACrG,oFAAoF,sBAAsB,EAAE;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uBAAuB;;;;;;;;;;;;ACrHV;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,yBAAyB;AACzB,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,kBAAkB,mBAAO,CAAC,gEAAiB;AAC3C,sBAAsB,mBAAO,CAAC,wEAAqB;AACnD,eAAe,mBAAO,CAAC,oDAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,8BAA8B,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA,sGAAsG,uDAAuD;AAC7J;AACA;AACA;AACA,0DAA0D,uDAAuD,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,yBAAyB;;;;;;;;;;;;ACpEZ;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,qBAAqB;AACrB,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,kBAAkB,mBAAO,CAAC,gEAAiB;AAC3C,cAAc,mBAAO,CAAC,kDAAa;AACnC,eAAe,mBAAO,CAAC,oDAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sDAAsD,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,eAAe;AACrF;AACA,0EAA0E,eAAe;AACzF;AACA,iBAAiB;AACjB;AACA;AACA,sGAAsG,qCAAqC;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qBAAqB;;;;;;;;;;;;AChFR;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,YAAY,GAAG,kBAAkB,GAAG,yBAAyB,GAAG,wBAAwB;AACxF,kBAAkB,mBAAO,CAAC,4DAAa;AACvC;AACA;AACA,0FAAwC;AACxC,aAAa,mBAAO,CAAC,4CAAQ;AAC7B;;;;;;;;;;;;ACfa;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,aAAa;AACb,aAAa,mBAAO,CAAC,0DAAS;AAC9B,aAAa,mBAAO,CAAC,qEAAM;AAC3B,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,mBAAmB,mBAAO,CAAC,mFAAY;AACvC,cAAc,mBAAO,CAAC,yDAAO;AAC7B,cAAc,mBAAO,CAAC,iDAAc;AACpC,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,YAAY,mBAAO,CAAC,sDAAO;AAC3B,eAAe,mBAAO,CAAC,oEAAoB;AAC3C,eAAe,mBAAO,CAAC,4EAA2B;AAClD;AACA,2BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA,4CAA4C,gBAAgB,+BAA+B,WAAW,0CAA0C;AAChJ,aAAa,IAAI,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,kBAAkB;AACjE;AACA;AACA,gDAAgD,gBAAgB,+BAA+B,WAAW,gCAAgC;AAC1I,iBAAiB,IAAI,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,4BAA4B,EAAE;AAClJ;AACA,uEAAuE,sCAAsC,EAAE;AAC/G,uEAAuE,sCAAsC,EAAE;AAC/G;AACA;AACA;AACA,uEAAuE,iEAAiE;AACxI;AACA,2EAA2E,kEAAkE;AAC7I;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,oBAAoB,EAAE;AAC9G;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;;;;;;;;;;;;AC1NA;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,kBAAkB;AAClB,wBAAwB;AACxB,eAAe,mBAAO,CAAC,yDAAQ;AAC/B,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,eAAe,mBAAO,CAAC,oEAAoB;AAC3C,wCAAwC,wDAAwD;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,SAAS,EAAE;AACX;AACA;AACA;AACA,iEAAiE,aAAa,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,yCAAyC,EAAE;AACrH;AACA;AACA;AACA,+BAA+B,uDAAuD;AACtF;AACA;AACA,+BAA+B,uDAAuD;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,qBAAqB,EAAE;AACtG;AACA;AACA;AACA,CAAC;AACD,wBAAwB;;;;;;;;;;;;ACnIX;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,kBAAkB;AAClB,iCAAiC;AACjC,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,kBAAkB,mBAAO,CAAC,qFAAiC;AAC3D,iBAAiB,mBAAO,CAAC,+FAAsC;AAC/D,uBAAuB,mBAAO,CAAC,6EAA6B;AAC5D,kBAAkB,mBAAO,CAAC,iGAAuC;AACjE,eAAe,mBAAO,CAAC,uEAAuB;AAC9C,eAAe,mBAAO,CAAC,+EAA8B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,uEAAuE;AACjK;AACA;AACA;AACA,2FAA2F,kBAAkB;AAC7G;AACA;AACA;AACA;AACA,mCAAmC,QAAQ,gBAAgB;AAC3D;AACA;AACA;AACA;AACA,iCAAiC,0BAA0B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,sBAAsB,EAAE;AAC/G;AACA;AACA;AACA,sHAAsH,WAAW,oBAAoB,EAAE;AACvJ;AACA;AACA,sHAAsH,WAAW,oBAAoB,EAAE;AACvJ;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA,mHAAmH,UAAU,EAAE;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oKAAoK,uBAAuB,EAAE;AAC7L,qKAAqK,uBAAuB,EAAE;AAC9L,uFAAuF,sBAAsB,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iCAAiC;;;;;;;;;;;;ACrKpB;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB,eAAe,mBAAO,CAAC,+CAAQ;AAC/B,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,8BAA8B,mBAAO,CAAC,8EAAyB;AAC/D,eAAe,mBAAO,CAAC,oEAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,+DAA+D,uBAAuB,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,0BAA0B,EAAE;AAC9F;AACA,SAAS,EAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uCAAuC,4CAA4C,iBAAiB,EAAE,EAAE;AACxG,uCAAuC,4CAA4C,iDAAiD,EAAE,EAAE;AACxI;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,yDAAyD,oBAAoB,EAAE;AAC/E;AACA;AACA;AACA,kDAAkD,yBAAyB,iCAAiC,2CAA2C;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,SAAS,kBAAkB;AAC/D;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAkB;;;;;;;;;;;;ACnKL;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,gCAAgC;AAChC,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,oEAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL,wBAAwB,sBAAsB;AAC9C;AACA,gCAAgC;;;;;;;;;;;;ACnInB;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,kBAAkB;AAClB,4BAA4B;AAC5B,gBAAgB,mBAAO,CAA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AAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,+BAA+B,GAAG,2BAA2B;AAC7D,aAAa,mBAAO,CAAC,qEAAM;AAC3B,gBAAgB,mBAAO,CAAC,6FAAkB;AAC1C,gBAAgB,mBAAO,CAAC,0GAA0B;AAClD,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,cAAc,mBAAO,CAAC,iDAAc;AACpC,kBAAkB,mBAAO,CAAC,8FAAoC;AAC9D,iBAAiB,mBAAO,CAAC,4FAAmC;AAC5D,iBAAiB,mBAAO,CAAC,4FAAmC;AAC5D,oBAAoB,mBAAO,CAAC,4DAAgB;AAC5C,kBAAkB,mBAAO,CAAC,kFAA8B;AACxD,qBAAqB,mBAAO,CAAC,wFAAiC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,SAAS,mCAAmC,EAAE;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mCAAmC;AAC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C,6FAAkB;AAC1C,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,cAAc,mBAAO,CAAC,iDAAc;AACpC,kBAAkB,mBAAO,CAAC,kFAA8B;AACxD,kBAAkB,mBAAO,CAAC,8FAAoC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2GAA2G,UAAU,EAAE;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kHAAkH,yDAAyD;AAC3K;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,+CAA+C;AAC/C,kHAAkH,iDAAiD;AACnK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,eAAe,oBAAoB;AAC1G;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,eAAe,mBAAmB;AACzG;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iCAAiC;;;;;;;;;;;;AC3KpB;AACb,kBAAkB;AAClB,8BAA8B,GAAG,6BAA6B,GAAG,4BAA4B,GAAG,6BAA6B,GAAG,6BAA6B,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,6BAA6B,GAAG,kCAAkC,GAAG,+BAA+B,GAAG,yBAAyB,GAAG,2BAA2B;AAC3X,gBAAgB,mBAAO,CAAC,2DAAW;AACnC,2BAA2B;AAC3B,cAAc,mBAAO,CAAC,uDAAS;AAC/B,yBAAyB;AACzB,oBAAoB,mBAAO,CAAC,mEAAe;AAC3C,+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AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,iCAAiC,GAAG,6BAA6B;AACjE,gBAAgB,mBAAO,CAAC,6FAAkB;AAC1C,gBAAgB,mBAAO,CAAC,wGAAoB;AAC5C,yBAAyB,mBAAO,CAAC,oFAAkB;AACnD,kBAAkB,mBAAO,CAAC,kFAA8B;AACxD;AACA,kBAAkB,mBAAO,CAAC,+DAAa;AACvC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK,EAAE,EAAyB;AACpD;AACA;AACA;AACA,uFAAuF,UAAU,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,+BAA+B;AACzH;AACA;AACA;AACA;AACA;AACA,0FAA0F,+BAA+B;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,YAAY,oBAAoB;AACnF;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,mDAAmD,YAAY,oBAAoB;AACnF;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,YAAY,oBAAoB;AACnF;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,mDAAmD,YAAY,oBAAoB;AACnF;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iCAAiC;;;;;;;;;;;;AC5JpB;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,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Cb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,gBAAgB,mBAAO,CAAC,uDAAY;AACpC;AACA;AACA,wCAAwC,qDAAqD;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,+EAA+E,mBAAmB;AAClG;AACA;AACA;AACA;AACA,kEAAkE,wBAAwB,EAAE;AAC5F,+DAA+D,sBAAsB;AACrF;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,kBAAkB;;;;;;;;;;;;ACnEL;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,iBAAiB;AACjB,kBAAkB,mBAAO,CAAC,qEAAa;AACvC;;;;;;;;;;;;ACXa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,qBAAqB;AACrB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,6DAAW;AACrC,gBAAgB,mBAAO,CAAC,0DAAe;AACvC,4BAA4B,mBAAO,CAAC,8FAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qCAAqC,EAAE;AACtE;AACA;AACA;AACA;AACA,SAAS;AACT,qCAAqC;AACrC;AACA;AACA,SAAS,EAAE;AACX,KAAK;AACL,2CAA2C,sBAAsB,EAAE;AACnE,wCAAwC,8GAA8G;AACtJ,oCAAoC,iFAAiF;AACrH;AACA,qBAAqB;;;;;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;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA,2CAA2C,WAAW,oBAAoB;AAC1E,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,2CAA2C,WAAW,qCAAqC,iCAAiC,oDAAoD;AAChL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;;;;;;;;;;;AC9KX;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,mCAAmC,GAAG,2BAA2B;AACjE;AACA;AACA,+BAA+B;AAC/B;AACA,+DAA+D,eAAe;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA,2BAA2B;AAC3B,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,IAAI,EAAE;AACP,mCAAmC;;;;;;;;;;;;ACvEtB;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,mBAAmB;AACnB,2BAA2B,mBAAO,CAAC,4EAAsB;AACzD;AACA;AACA;AACA;AACA,+BAA+B,WAAW,QAAQ,+BAA+B;AACjF;AACA;AACA,oEAAoE,0BAA0B,EAAE;AAChG;AACA;AACA,uCAAuC,8BAA8B;AACrE,SAAS,IAAI,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,mBAAmB;;;;;;;;;;;;AChEN;AACb;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,+BAA+B,GAAG,0BAA0B;AAC5D,kBAAkB,mBAAO,CAAC,qDAAc;AACxC,wDAAwD;AACxD;AACA;AACA,CAAC,EAAE;AACH,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,6EAA6E,UAAU;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6CAA6C;AAC5E;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA,+BAA+B,WAAW;AAC1C;AACA;AACA,wCAAwC,gBAAgB;AACxD,SAAS,IAAI,GAAG;AAChB;AACA,+BAA+B;;;;;;;;;;;;AC3ElB;AACb;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,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,kBAAkB;AAClB,YAAY;AACZ,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,gBAAgB,mBAAO,CAAC,8CAAY;AACpC,eAAe,mBAAO,CAAC,4CAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,wCAAwC,iFAAiF;AACzH,8CAA8C,sCAAsC;AACpF,kDAAkD,mCAAmC;AACrF,4CAA4C,mCAAmC;AAC/E,kEAAkE,aAAa;AAC/E,4CAA4C,0BAA0B;AACtE;AACA;AACA;AACA,0DAA0D,gFAAgF;AAC1I,uCAAuC,0BAA0B;AACjE,wCAAwC,8BAA8B;AACtE,6CAA6C,8BAA8B;AAC3E,6CAA6C,8BAA8B;AAC3E;AACA,YAAY;;;;;;;;;;;;ACnEC;AACb,kBAAkB;AAClB,oBAAoB;AACpB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,eAAe,mBAAO,CAAC,4CAAW;AAClC,aAAa,mBAAO,CAAC,0CAAQ;AAC7B,mBAAmB,mBAAO,CAAC,0DAAY;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mEAAmE,2CAA2C;AAC1J,8CAA8C,6HAA6H;AAC3K;AACA,kDAAkD,iGAAiG;AACnJ,oCAAoC,0BAA0B;AAC9D;AACA;AACA,oBAAoB;;;;;;;;;;;;AClDP;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAA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ACA;AACA,kBAAkB;;;;;;;;;;;;AC9BL;AACb,kBAAkB;AAClB,qBAAqB;AACrB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,cAAc,mBAAO,CAAC,0CAAS;AAC/B,aAAa,mBAAO,CAAC,wCAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,wCAAwC,+BAA+B;AACvE,oCAAoC,0BAA0B;AAC9D,oDAAoD,0DAA0D;AAC9G,4CAA4C,yFAAyF;AACrI;AACA,qBAAqB;;;;;;;;;;;;AC1BR;AACb,kBAAkB;AAClB,aAAa;AACb,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,eAAe,mBAAO,CAAC,sDAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,wCAAwC,2BAA2B;AACnE;AACA,aAAa;;;;;;;;;;;;ACzCA;AACb,kBAAkB;AAClB,kBAAkB;AAClB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,mBAAmB,mBAAO,CAAC,0DAAY;AACvC,eAAe,mBAAO,CAAC,sDAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,8BAA8B,UAAU,+BAA+B,EAAE;AACzE,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gCAAgC;AACxE,qCAAqC,wEAAwE;AAC7G;AACA,qCAAqC,+BAA+B;AACpE;AACA,kBAAkB;;;;;;;;;;;;ACxDL;AACb;AACA;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD,kBAAkB;AAClB,4BAA4B,GAAG,sBAAsB;AACrD,uBAAuB,mBAAO,CAAC,gEAAkB;AACjD;AACA,6BAA6B,mBAAO,CAAC,4EAAwB;AAC7D;;;;;;;;;;;;ACba;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,kBAAkB;AAClB,sBAAsB;AACtB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,cAAc,mBAAO,CAAC,4CAAO;AAC7B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,mBAAmB,mBAAO,CAAC,wDAAc;AACzC,0BAA0B,mBAAO,CAAC,wEAA4B;AAC9D,eAAe,mBAAO,CAAC,sCAAW;AAClC,wBAAwB,mBAAO,CAAC,kEAAmB;AACnD,gBAAgB,mBAAO,CAAC,8CAAY;AACpC,eAAe,mBAAO,CAAC,4CAAW;AAClC,eAAe,mBAAO,CAAC,4CAAW;AAClC;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,EAAE,EAAE;AACT,+BAA+B;AAC/B;AACA;AACA;AACA,KAAK,EAAE,EAAE;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,4DAA4D,6BAA6B,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,kEAAkE;AAC1G,8CAA8C,mCAAmC;AACjF,wCAAwC,uBAAuB;AAC/D,4DAA4D,iBAAiB;AAC7E,wCAAwC,6BAA6B;AACrE,sDAAsD,mCAAmC;AACzF;AACA,qEAAqE,wDAAwD;AAC7H;AACA,uEAAuE,wBAAwB;AAC/F,sDAAsD,mBAAmB;AACzE,wDAAwD,4BAA4B;AACpF,8DAA8D,oBAAoB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,2BAA2B;AAC3F,gEAAgE,mCAAmC;AACnG,0EAA0E,oDAAoD;AAC9H,oFAAoF,uDAAuD;AAC3I;AACA,sBAAsB;;;;;;;;;;;;AC3FT;AACb,kBAAkB;AAClB,4BAA4B;AAC5B,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,mBAAmB,mBAAO,CAAC,wDAAc;AACzC,gBAAgB,mBAAO,CAAC,8CAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,wCAAwC,+BAA+B;AACvE,oCAAoC,yBAAyB;AAC7D,yCAAyC,0BAA0B;AACnE,oCAAoC,yBAAyB;AAC7D;AACA,0DAA0D,6CAA6C;AACvG,qDAAqD,8BAA8B;AACnF;AACA,4BAA4B;;;;;;;;;;;;AC5Df;AACb,kBAAkB;AAClB,uBAAuB;AACvB,YAAY,mBAAO,CAAC,4CAAO;AAC3B,kBAAkB,mBAAO,CAAC,qEAAW;AACrC,eAAe,mBAAO,CAAC,sDAAwB;AAC/C,qCAAqC,iEAAiE;AACtG;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,EAAE;AACP,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,uCAAuC,+BAA+B;AACtE;AACA,uBAAuB;;;;;;;UC5BvB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;WC/BA;WACA;WACA;WACA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA,CAAC,I;;;;;WCPD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA,E;;;;;WCVA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;WCNA;WACA;WACA;WACA;WACA,E;;;;;WCJA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,oBAAoB;WAC1B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;WACA,eAAe,4BAA4B;WAC3C;WACA;WACA,gBAAgB,2BAA2B;WAC3C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,4CAA4C;WAC5C;WACA,E;;;;UCpFA;UACA","file":"bundle-2b19f96b2613c09bbf04.js","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.App = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_modal_1 = __importDefault(require(\"react-modal\"));\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar react_redux_1 = require(\"react-redux\");\nvar auth0_react_1 = require(\"@auth0/auth0-react\");\nvar game_1 = require(\"./game\");\nvar lobby_1 = require(\"./lobby\");\nvar menu_1 = require(\"./menu\");\nvar auth_1 = require(\"./auth\");\nvar loading_1 = require(\"./display/loading\");\nvar UnauthenticatedRoutes = function () { return (React.createElement(react_router_dom_1.Route, { exact: true, path: \"/\", component: auth_1.LoginPage })); };\nvar GameState;\n(function (GameState) {\n    GameState[GameState[\"MENU\"] = 0] = \"MENU\";\n    GameState[GameState[\"LOBBY\"] = 1] = \"LOBBY\";\n    GameState[GameState[\"GAME\"] = 2] = \"GAME\";\n})(GameState || (GameState = {}));\nvar gameStateSelector = function (state) {\n    if (state.game.roundInfo.phase !== null) {\n        return GameState.GAME;\n    }\n    if (state.lobby.lobbyId !== null) {\n        return GameState.LOBBY;\n    }\n    return GameState.MENU;\n};\nvar AuthenticatedRootPage = function () {\n    var user = auth0_react_1.useAuth0().user;\n    var gameState = react_redux_1.useSelector(gameStateSelector);\n    if (!auth_1.isRegistered(user)) {\n        return React.createElement(auth_1.RegistrationPage, null);\n    }\n    if (gameState === GameState.GAME) {\n        return React.createElement(game_1.GamePage, null);\n    }\n    if (gameState === GameState.LOBBY) {\n        return React.createElement(lobby_1.LobbyPage, null);\n    }\n    return React.createElement(menu_1.MenuPage, null);\n};\nvar AuthenticatedRoutes = function () { return (React.createElement(react_router_dom_1.Route, { exact: true, path: \"/\", component: AuthenticatedRootPage })); };\nreact_modal_1[\"default\"].setAppElement(\"#approot\");\nvar App = function () {\n    var _a = auth0_react_1.useAuth0(), isAuthenticated = _a.isAuthenticated, isLoading = _a.isLoading;\n    if (isLoading) {\n        return React.createElement(loading_1.Loading, null);\n    }\n    if (isAuthenticated) {\n        return React.createElement(AuthenticatedRoutes, null);\n    }\n    return React.createElement(UnauthenticatedRoutes, null);\n};\nexports.App = App;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.LoginPage = void 0;\nvar React = __importStar(require(\"react\"));\nvar auth0_react_1 = require(\"@auth0/auth0-react\");\nvar display_1 = require(\"../display\");\nvar LoginPage = function () {\n    var _a = auth0_react_1.useAuth0(), loginWithRedirect = _a.loginWithRedirect, isLoading = _a.isLoading;\n    var _b = __read(React.useState(false), 2), loadingSignIn = _b[0], setLoadingSignIn = _b[1];\n    var _c = __read(React.useState(false), 2), demoOpen = _c[0], setDemoOpen = _c[1];\n    var onSignInClick = function () {\n        setLoadingSignIn(true);\n        loginWithRedirect();\n    };\n    var onDemoClick = function () { return setDemoOpen(!demoOpen); };\n    if (isLoading || loadingSignIn) {\n        return React.createElement(display_1.Loading, null);\n    }\n    return (React.createElement(\"div\", { className: \"login\" },\n        React.createElement(\"div\", { className: \"banner\" },\n            React.createElement(\"img\", { src: \"https://i.imgur.com/7FAcFwZ.png\" })),\n        React.createElement(\"div\", { className: \"groups\" },\n            React.createElement(\"div\", { className: \"group main\" },\n                React.createElement(\"p\", { className: \"subtext\" }, \"Creature Chess is a multiplayer game, so you need an account to play. Watch the demo video to see a preview\"),\n                React.createElement(\"button\", { onClick: onSignInClick, className: \"login-button\" }, \"Log in / Sign up\"),\n                React.createElement(\"p\", { className: \"subtext\" }, \"Join us on Discord to find other players and give feedback on the game\"),\n                React.createElement(\"a\", { href: \"https://discord.gg/FhMm6saehb\" },\n                    React.createElement(\"img\", { src: \"https://i.imgur.com/OBo2QRd.png\", className: \"discord-button\" }))),\n            React.createElement(\"div\", { className: \"group\" },\n                React.createElement(display_1.Segment, { header: \"Watch a demo video\", open: demoOpen, onHeaderClick: onDemoClick },\n                    React.createElement(\"div\", { className: \"video-container\" },\n                        React.createElement(\"video\", { controls: true, autoPlay: true, className: \"video\" },\n                            React.createElement(\"source\", { src: \"https://i.imgur.com/EAwP0Qm.mp4\", type: \"video/mp4\" }),\n                            \"Your browser does not support videos.\"))))),\n        React.createElement(display_1.Footer, null)));\n};\nexports.LoginPage = LoginPage;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.RegistrationPage = void 0;\nvar React = __importStar(require(\"react\"));\nvar auth0_react_1 = require(\"@auth0/auth0-react\");\nvar models_1 = require(\"@creature-chess/models\");\nvar patchUser_1 = require(\"./utils/patchUser\");\nvar NicknameSelection_1 = require(\"./registration/NicknameSelection\");\nvar PictureSelection_1 = require(\"./registration/PictureSelection\");\nvar isRegistered_1 = require(\"./utils/isRegistered\");\nvar RegistrationPage = function () {\n    var _a = auth0_react_1.useAuth0(), getAccessTokenSilently = _a.getAccessTokenSilently, getIdTokenClaims = _a.getIdTokenClaims;\n    var _b = __read(React.useState(\"\"), 2), nickname = _b[0], setNickname = _b[1];\n    var _c = __read(React.useState(false), 2), loading = _c[0], setLoading = _c[1];\n    var _d = __read(React.useState(null), 2), error = _d[0], setError = _d[1];\n    var _e = __read(React.useState(1), 2), currentImage = _e[0], setCurrentImage = _e[1];\n    var user = auth0_react_1.useAuth0().user;\n    React.useEffect(function () {\n        if (isRegistered_1.hasNickname(user)) {\n            setNickname(null);\n        }\n    });\n    var onNameChange = function (event) { return setNickname(event.target.value); };\n    var onClick = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var nicknameError, token, response, responseError;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!isRegistered_1.hasNickname(user)) {\n                        nicknameError = models_1.validateNicknameFormat(nickname);\n                        if (nicknameError) {\n                            setError(nicknameError);\n                            return [2 /*return*/];\n                        }\n                    }\n                    setLoading(true);\n                    return [4 /*yield*/, getAccessTokenSilently()];\n                case 1:\n                    token = _a.sent();\n                    return [4 /*yield*/, patchUser_1.patchUser(token, nickname, currentImage)];\n                case 2:\n                    response = _a.sent();\n                    setLoading(false);\n                    if (!(response.status === 400)) return [3 /*break*/, 4];\n                    return [4 /*yield*/, response.json()];\n                case 3:\n                    responseError = (_a.sent()).error;\n                    setError(responseError);\n                    return [2 /*return*/];\n                case 4:\n                    if (!(response.status === 200)) return [3 /*break*/, 7];\n                    return [4 /*yield*/, getAccessTokenSilently({ ignoreCache: true })];\n                case 5:\n                    _a.sent();\n                    return [4 /*yield*/, getIdTokenClaims()];\n                case 6:\n                    _a.sent();\n                    return [2 /*return*/];\n                case 7:\n                    setError(\"An unknown error occured\");\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    var handleImageChange = function (picture) {\n        setCurrentImage(picture);\n    };\n    return (React.createElement(\"div\", { className: \"register\" },\n        React.createElement(\"h1\", { className: \"register-heading\" }, \"Registration\"),\n        error && React.createElement(\"p\", { className: \"register-error\" }, error),\n        !isRegistered_1.hasNickname(user) &&\n            React.createElement(NicknameSelection_1.NicknameSelection, { nickname: nickname, onChange: onNameChange, loading: loading }),\n        React.createElement(PictureSelection_1.PictureSelection, { currentImage: currentImage, onChange: handleImageChange }),\n        React.createElement(\"button\", { className: \"register-button\", onClick: onClick, disabled: loading },\n            !loading && \"Register\",\n            loading && \"Loading...\")));\n};\nexports.RegistrationPage = RegistrationPage;\n","\"use strict\";\nexports.__esModule = true;\nexports.LEADERBOARD_ENDPOINT = exports.CURRENT_USER_ENDPOINT = exports.GAME_SERVER_URL = exports.auth0Config = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nexports.auth0Config = {\n    domain: models_1.config.auth0.domain,\n    clientID: models_1.config.auth0.spaClientId,\n    redirectUri: models_1.config.appUrl,\n    logoutRedirectUri: models_1.config.appUrl,\n    audience: \"https://\" + models_1.config.auth0.domain + \"/api/v2/\",\n    scope: \"openid profile email\"\n};\nexports.GAME_SERVER_URL = models_1.config.serverUrl;\nexports.CURRENT_USER_ENDPOINT = models_1.config.serverInfoUrl + \"/user/current\";\nexports.LEADERBOARD_ENDPOINT = models_1.config.serverInfoUrl + \"/leaderboard\";\n","\"use strict\";\nexports.__esModule = true;\nexports.usePlayerId = void 0;\nvar auth0_react_1 = require(\"@auth0/auth0-react\");\nvar usePlayerId = function () {\n    var user = auth0_react_1.useAuth0().user;\n    return user[\"https://creaturechess.jamesmonger.com/playerId\"];\n};\nexports.usePlayerId = usePlayerId;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.isRegistered = exports.hasNickname = exports.usePlayerId = exports.RegistrationPage = exports.LoginPage = void 0;\nvar LoginPage_1 = require(\"./LoginPage\");\n__createBinding(exports, LoginPage_1, \"LoginPage\");\nvar RegistrationPage_1 = require(\"./RegistrationPage\");\n__createBinding(exports, RegistrationPage_1, \"RegistrationPage\");\nvar hooks_1 = require(\"./hooks\");\n__createBinding(exports, hooks_1, \"usePlayerId\");\nvar isRegistered_1 = require(\"./utils/isRegistered\");\n__createBinding(exports, isRegistered_1, \"hasNickname\");\n__createBinding(exports, isRegistered_1, \"isRegistered\");\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.NicknameSelection = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar models_1 = require(\"@creature-chess/models\");\nvar NicknameSelection = function (_a) {\n    var nickname = _a.nickname, onChange = _a.onChange, loading = _a.loading;\n    return (react_1[\"default\"].createElement(\"div\", { className: \"nickname-selection\" },\n        react_1[\"default\"].createElement(\"div\", { className: \"nickname\" },\n            react_1[\"default\"].createElement(\"h1\", { className: \"section-heading\" }, \"Nickname\"),\n            react_1[\"default\"].createElement(\"h2\", { className: \"nickname-info\" }, \"Choose a nickname\"),\n            react_1[\"default\"].createElement(\"h2\", { className: \"nickname-warning\" }, \"This nickname is permanent and cannot be changed\"),\n            react_1[\"default\"].createElement(\"input\", { value: nickname, onChange: onChange, maxLength: models_1.MAX_NAME_LENGTH, placeholder: \"Nickname\", className: \"name-input\", disabled: loading }))));\n};\nexports.NicknameSelection = NicknameSelection;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.PictureSelection = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar models_1 = require(\"@creature-chess/models\");\nvar PictureSelection = function (_a) {\n    var currentImage = _a.currentImage, onChange = _a.onChange;\n    return (react_1[\"default\"].createElement(\"div\", { className: \"picture-selection\" },\n        react_1[\"default\"].createElement(\"h1\", { className: \"section-heading\" }, \"Profile Picture\"),\n        react_1[\"default\"].createElement(\"h2\", { className: \"picture-selection-heading\" }, \"Choose a profile picture - more can be unlocked!\"),\n        react_1[\"default\"].createElement(\"form\", null, Object.entries(models_1.AVAILABLE_PROFILE_PICTURES).map(function (_a) {\n            var _b = __read(_a, 2), pictureString = _b[0], creatureName = _b[1];\n            var picture = parseInt(pictureString, 10);\n            var onSelect = function () { return onChange(picture); };\n            return (react_1[\"default\"].createElement(\"div\", { className: \"available-pictures\", key: picture },\n                react_1[\"default\"].createElement(\"img\", { className: \"picture-selector-element\", src: \"https://creaturechess.jamesmonger.com/images/front/\" + picture + \".png\", alt: creatureName }),\n                react_1[\"default\"].createElement(\"p\", null, creatureName),\n                react_1[\"default\"].createElement(\"input\", { className: \"picture-selector-element\", type: \"radio\", value: picture, checked: currentImage === picture, onChange: onSelect })));\n        }))));\n};\nexports.PictureSelection = PictureSelection;\n","\"use strict\";\nexports.__esModule = true;\nexports.isRegistered = exports.hasNickname = void 0;\nvar namespace = \"https://creaturechess.jamesmonger.com\";\nvar hasNickname = function (user) { return (user[namespace + \"/playerNickname\"] !== null); };\nexports.hasNickname = hasNickname;\nvar isRegistered = function (user) { return (user[namespace + \"/playerNickname\"] !== null && user[namespace + \"/playerPicture\"] !== null); };\nexports.isRegistered = isRegistered;\n","\"use strict\";\nexports.__esModule = true;\nexports.patchUser = void 0;\nvar config_1 = require(\"../config\");\nvar patchUser = function (token, nickname, picture) { return fetch(config_1.CURRENT_USER_ENDPOINT, {\n    method: \"PATCH\",\n    headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n    },\n    body: JSON.stringify({ nickname: nickname, picture: picture })\n}); };\nexports.patchUser = patchUser;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.Countdown = void 0;\nvar React = __importStar(require(\"react\"));\nvar Countdown = function (_a) {\n    var countdownToSeconds = _a.countdownToSeconds, render = _a.render;\n    var _b = __read(React.useState(null), 2), secondsRemaining = _b[0], setSecondsRemaining = _b[1];\n    var updateSecondsRemaining = function () {\n        if (countdownToSeconds === null) {\n            return;\n        }\n        var currentSeconds = Date.now() / 1000;\n        setSecondsRemaining(Math.ceil(countdownToSeconds - currentSeconds));\n    };\n    React.useEffect(function () {\n        updateSecondsRemaining();\n        var intervalId = setInterval(updateSecondsRemaining, 1000);\n        return function () { return clearInterval(intervalId); };\n    }, [countdownToSeconds]);\n    if (secondsRemaining === null) {\n        return null;\n    }\n    var safeSecondsRemaining = secondsRemaining > 1 ? secondsRemaining : 1;\n    if (render) {\n        return render(safeSecondsRemaining);\n    }\n    return React.createElement(\"span\", null, safeSecondsRemaining);\n};\nexports.Countdown = Countdown;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.Footer = void 0;\nvar React = __importStar(require(\"react\"));\nvar Footer = function () {\n    return (React.createElement(\"div\", { className: \"footer\" },\n        React.createElement(\"span\", null,\n            \"v\",\n            APP_VERSION),\n        \" - \",\n        React.createElement(\"a\", { href: \"https://reddit.com/r/creaturechess/\" }, \"/r/CreatureChess\"),\n        \" - \",\n        React.createElement(\"a\", { href: \"https://creaturechess.jamesmonger.com/privacy\" }, \"Privacy Policy\"),\n        \" - \",\n        React.createElement(\"a\", { href: \"https://github.com/Jameskmonger/creature-chess\" }, \"Licenses on GitHub\")));\n};\nexports.Footer = Footer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Segment = exports.Loading = exports.Footer = void 0;\nvar footer_1 = require(\"./footer\");\n__createBinding(exports, footer_1, \"Footer\");\nvar loading_1 = require(\"./loading\");\n__createBinding(exports, loading_1, \"Loading\");\nvar segment_1 = require(\"./segment\");\n__createBinding(exports, segment_1, \"Segment\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.Loading = void 0;\nvar React = __importStar(require(\"react\"));\nvar segment_1 = require(\"./segment\");\nvar Loading = function () {\n    var _a = __read(React.useState(false), 2), demoOpen = _a[0], setDemoOpen = _a[1];\n    var onDemoClick = function () { return setDemoOpen(!demoOpen); };\n    return (React.createElement(\"div\", { className: \"loading-full\" },\n        React.createElement(\"h1\", null, \"Loading...\"),\n        React.createElement(\"p\", null, \"This can sometimes take up to 30 secs (sorry! I'm using cheap and free servers)\"),\n        React.createElement(segment_1.Segment, { header: \"Why not watch a demo video while you wait?\", open: demoOpen, onHeaderClick: onDemoClick },\n            React.createElement(\"div\", { className: \"video-container\" },\n                React.createElement(\"video\", { controls: true, autoPlay: true, className: \"video\" },\n                    React.createElement(\"source\", { src: \"https://i.imgur.com/EAwP0Qm.mp4\", type: \"video/mp4\" }),\n                    \"Your browser does not support videos.\")))));\n};\nexports.Loading = Loading;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.Segment = void 0;\nvar React = __importStar(require(\"react\"));\nvar Segment = function (_a) {\n    var open = _a.open, onHeaderClick = _a.onHeaderClick, header = _a.header, children = _a.children;\n    return (React.createElement(\"div\", { className: \"segment \" + (open ? \"\" : \"closed\") },\n        React.createElement(\"div\", { className: \"header\", onClick: onHeaderClick },\n            header,\n            \" \",\n            open ? \"-\" : \"+\"),\n        React.createElement(\"div\", { className: \"content\" }, children)));\n};\nexports.Segment = Segment;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.getAnimationCssVariables = void 0;\nvar getAnimationCssVariables = function (animations) {\n    var variables = Object.assign.apply(Object, __spreadArray([{}], __read(animations.filter(function (a) { return a.variables; }).map(function (a) { return a.variables; }))));\n    return Object.assign.apply(Object, __spreadArray([{}], __read(Object.keys(variables).map(function (key) {\n        var _a;\n        return (_a = {}, _a[\"--\" + key] = variables[key], _a);\n    }))));\n};\nexports.getAnimationCssVariables = getAnimationCssVariables;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.AnimatedPiece = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar board_1 = require(\"@shoki/board\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar animation_1 = require(\"../../animation\");\nvar projectile_1 = require(\"../projectile\");\nvar auth_1 = require(\"../../../auth\");\nvar dyingAnimation = \"dying\";\nvar getHealthbar = function (ownerId, localId, spectatingId) { return (ownerId === localId\n    ? \"friendly\"\n    : (ownerId === spectatingId\n        ? \"spectating\"\n        : \"enemy\")); };\nvar AnimatedPiece = function (props) {\n    var id = props.id;\n    var playerId = auth_1.usePlayerId();\n    var _a = __read(React.useState([]), 2), currentAnimations = _a[0], setCurrentAnimations = _a[1];\n    var _b = __read(React.useState(null), 2), oldPiece = _b[0], setOldPiece = _b[1];\n    var piece = react_redux_1.useSelector(function (state) { return board_1.BoardSelectors.getPiece(state.game.match.board, id); });\n    var spectatingId = react_redux_1.useSelector(function (state) { return state.game.spectating.id; });\n    var runAnimation = function (name, variables) { return setCurrentAnimations(function (oldAnimations) { return __spreadArray(__spreadArray([], __read(oldAnimations)), [{ name: name, variables: variables }]); }); };\n    var onAnimationEnd = function (_a) {\n        var animationName = _a.animationName;\n        setCurrentAnimations(function (oldAnimations) { return oldAnimations.filter(function (a) { return a.name !== animationName && !a.name.startsWith(\"move-\"); }); });\n    };\n    var runAnimations = function (newPiece) {\n        var attacking = newPiece.attacking, hit = newPiece.hit;\n        if (!oldPiece) {\n            setOldPiece(newPiece);\n            return;\n        }\n        if (attacking && !oldPiece.attacking) {\n            runAnimation(\"attack-\" + attacking.attackType.name, {\n                attackPower: attacking.damage,\n                attackXDirection: attacking.direction.x,\n                attackYDirection: attacking.direction.y,\n                attackDistance: attacking.distance\n            });\n        }\n        if (hit && !oldPiece.hit) {\n            runAnimation(\"hit\", { hitPower: hit.damage });\n        }\n        setOldPiece(newPiece);\n    };\n    React.useEffect(function () {\n        if (piece) {\n            runAnimations(piece);\n        }\n        else {\n            setOldPiece(null);\n        }\n    }, [piece]);\n    if (!piece) {\n        console.log(\"no AnimatedPiece found for id \", id);\n        return null;\n    }\n    var isDead = piece.currentHealth === 0;\n    var className = \"piece \" + currentAnimations.map(function (a) { return a.name; }).join(\" \") + \" \" + (isDead ? dyingAnimation : \"\");\n    return (React.createElement(\"div\", { className: className, style: animation_1.getAnimationCssVariables(currentAnimations), \n        // eslint-disable-next-line react/jsx-no-bind\n        onAnimationEnd: onAnimationEnd },\n        React.createElement(ui_1.Piece, { className: className, piece: piece, healthbar: getHealthbar(piece.ownerId, playerId, spectatingId) },\n            React.createElement(projectile_1.Projectile, null))));\n};\nexports.AnimatedPiece = AnimatedPiece;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.InteractablePiece = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar projectile_1 = require(\"../projectile\");\nvar react_dnd_1 = require(\"react-dnd\");\nvar clickPieceSaga_1 = require(\"../../module/board/sagas/clickPieceSaga\");\nvar InteractablePiece = function (props) {\n    var id = props.id;\n    var dispatch = react_redux_1.useDispatch();\n    var selectedPieceId = react_redux_1.useSelector(function (state) { return state.game.ui.selectedPieceId; });\n    var piece = react_redux_1.useSelector(function (state) { return gamemode_1.getPiece(state.game, id); });\n    var _a = __read(react_dnd_1.useDrag({\n        item: { type: \"Piece\", piece: piece }\n    }), 2), _b = _a[0], drag = _a[1];\n    var onClick = function () {\n        dispatch(clickPieceSaga_1.playerClickPieceAction({ pieceId: id }));\n    };\n    var isSelected = selectedPieceId === id;\n    var className = \"piece \" + (isSelected ? \"selected\" : \"\");\n    if (!piece) {\n        console.log(\"no InteractablePiece found for id \", id);\n        return null;\n    }\n    return (React.createElement(ui_1.Piece, { ref: drag, className: className, piece: piece, healthbar: \"none\", \n        // eslint-disable-next-line react/jsx-no-bind\n        onClick: onClick },\n        React.createElement(projectile_1.Projectile, null)));\n};\nexports.InteractablePiece = InteractablePiece;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.Projectile = void 0;\nvar React = __importStar(require(\"react\"));\nvar Projectile = function () { return (React.createElement(\"svg\", { className: \"projectile\", height: \"12\", width: \"12\" },\n    React.createElement(\"circle\", { cx: \"6\", cy: \"6\", r: \"4\", stroke: \"#FAD17D\", strokeWidth: \"2\", fill: \"#F5E687\" }))); };\nexports.Projectile = Projectile;\n","\"use strict\";\nexports.__esModule = true;\nexports.ConnectionStatus = void 0;\nvar ConnectionStatus;\n(function (ConnectionStatus) {\n    ConnectionStatus[ConnectionStatus[\"NOT_CONNECTED\"] = 0] = \"NOT_CONNECTED\";\n    ConnectionStatus[ConnectionStatus[\"CONNECTED\"] = 1] = \"CONNECTED\";\n    ConnectionStatus[ConnectionStatus[\"DISCONNECTED\"] = 2] = \"DISCONNECTED\";\n})(ConnectionStatus = exports.ConnectionStatus || (exports.ConnectionStatus = {}));\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.createGameReducer = exports.GamePage = exports.gameSaga = void 0;\nvar sagas_1 = require(\"./sagas\");\n__createBinding(exports, sagas_1, \"gameSaga\");\nvar page_1 = require(\"./page\");\n__createBinding(exports, page_1, \"GamePage\");\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"createGameReducer\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.DesktopGame = void 0;\nvar React = __importStar(require(\"react\"));\nvar display_1 = require(\"../../display\");\nvar module_1 = require(\"../module\");\nvar DesktopGame = function () {\n    return (React.createElement(\"div\", { className: \"game landscape\" },\n        React.createElement(\"div\", { className: \"group\" },\n            React.createElement(module_1.RoundIndicator, null),\n            React.createElement(module_1.PhaseInfo, null),\n            React.createElement(module_1.NowPlaying, null),\n            React.createElement(module_1.PlayerList, null)),\n        React.createElement(module_1.BoardContainer, null),\n        React.createElement(\"div\", { className: \"group right\" },\n            React.createElement(module_1.QuitGameButton, null),\n            React.createElement(module_1.CardShop, null),\n            React.createElement(module_1.Profile, null),\n            React.createElement(\"div\", { className: \"help-container\" },\n                React.createElement(module_1.Help, { hideFooter: true })),\n            React.createElement(display_1.Footer, null))));\n};\nexports.DesktopGame = DesktopGame;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.MobileGame = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar react_fontawesome_1 = require(\"@fortawesome/react-fontawesome\");\nvar free_solid_svg_icons_1 = require(\"@fortawesome/free-solid-svg-icons\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar overlay_1 = require(\"../ui/overlay\");\nvar actions_1 = require(\"../ui/actions\");\nvar module_1 = require(\"../module\");\nvar NavItem = function (_a) {\n    var overlay = _a.overlay, icon = _a.icon;\n    var dispatch = react_redux_1.useDispatch();\n    var isActive = react_redux_1.useSelector(function (state) { return state.game.ui.currentOverlay === overlay; });\n    var canUseShop = react_redux_1.useSelector(function (state) { return state.game.playerInfo.health !== 0; });\n    var isSpectating = react_redux_1.useSelector(function (state) { return state.game.spectating.id !== null; });\n    var onClick = function () {\n        if (isActive) {\n            dispatch(actions_1.closeOverlay());\n            return;\n        }\n        if (overlay === overlay_1.Overlay.SHOP) {\n            if (!canUseShop || isSpectating) {\n                return;\n            }\n        }\n        dispatch(actions_1.openOverlay(overlay));\n    };\n    return (React.createElement(\"button\", { className: \"navitem\" + (isActive ? \" active\" : \"\"), onClick: onClick },\n        React.createElement(react_fontawesome_1.FontAwesomeIcon, { icon: icon })));\n};\nvar Navbar = function () {\n    return (React.createElement(\"nav\", { className: \"navbar\" },\n        React.createElement(NavItem, { overlay: overlay_1.Overlay.PLAYERS, icon: free_solid_svg_icons_1.faUsers }),\n        React.createElement(NavItem, { overlay: overlay_1.Overlay.SHOP, icon: free_solid_svg_icons_1.faShoppingCart }),\n        React.createElement(NavItem, { overlay: overlay_1.Overlay.HELP, icon: free_solid_svg_icons_1.faQuestionCircle }),\n        React.createElement(NavItem, { overlay: overlay_1.Overlay.SETTINGS, icon: free_solid_svg_icons_1.faCog })));\n};\nvar OverlayComponent = function (_a) {\n    var title = _a.title, children = _a.children, _b = _a.fullscreen, fullscreen = _b === void 0 ? false : _b;\n    var dispatch = react_redux_1.useDispatch();\n    var dispatchCloseOverlay = function () { return dispatch(actions_1.closeOverlay()); };\n    return (React.createElement(\"div\", { className: \"game-overlay\" },\n        React.createElement(\"div\", { className: \"overlay-header\" },\n            React.createElement(\"h2\", { className: \"overlay-title\" }, title),\n            React.createElement(\"button\", { className: \"close\", onClick: dispatchCloseOverlay }, \"X\")),\n        React.createElement(\"div\", { className: \"overlay-content \" + (fullscreen ? \"fullscreen\" : \"\") }, children)));\n};\nvar GameOverlay = function (_a) {\n    var currentOverlay = _a.currentOverlay;\n    var currentBalance = react_redux_1.useSelector(function (state) { return gamemode_1.getPlayerMoney(state.game); });\n    if (currentOverlay === overlay_1.Overlay.PLAYERS) {\n        return (React.createElement(OverlayComponent, { title: \"Players\" },\n            React.createElement(module_1.PlayerList, null)));\n    }\n    if (currentOverlay === overlay_1.Overlay.SHOP) {\n        return (React.createElement(OverlayComponent, { title: \"Balance: $\" + currentBalance, fullscreen: true },\n            React.createElement(module_1.CardShop, null)));\n    }\n    if (currentOverlay === overlay_1.Overlay.HELP) {\n        return (React.createElement(OverlayComponent, { title: \"Help\" },\n            React.createElement(module_1.Help, null)));\n    }\n    if (currentOverlay === overlay_1.Overlay.SETTINGS) {\n        return (React.createElement(OverlayComponent, { title: \"Settings\" },\n            React.createElement(module_1.Settings, null)));\n    }\n    return null;\n};\nvar MobileGameContentPane = function () {\n    var currentOverlay = react_redux_1.useSelector(function (state) { return state.game.ui.currentOverlay; });\n    if (currentOverlay === null) {\n        return (React.createElement(\"div\", { className: \"content-pane\" },\n            React.createElement(module_1.Profile, null),\n            React.createElement(module_1.BoardContainer, { showNowPlaying: true })));\n    }\n    return (React.createElement(\"div\", { className: \"content-pane\" },\n        React.createElement(GameOverlay, { currentOverlay: currentOverlay })));\n};\nvar MobileGame = function () {\n    return (React.createElement(\"div\", { className: \"game mobile portrait\" },\n        React.createElement(\"div\", { className: \"top-bar\" },\n            React.createElement(module_1.RoundIndicator, null),\n            React.createElement(module_1.PhaseInfo, null)),\n        React.createElement(MobileGameContentPane, null),\n        React.createElement(Navbar, null)));\n};\nexports.MobileGame = MobileGame;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.BoardContainer = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar board_react_1 = require(\"@shoki/board-react\");\nvar opponentBoardPlaceholder_1 = require(\"./overlays/opponentBoardPlaceholder\");\nvar victoryOverlay_1 = require(\"./overlays/victoryOverlay\");\nvar reconnectOverlay_1 = require(\"./overlays/reconnectOverlay\");\nvar matchRewardsOverlay_1 = require(\"./overlays/matchRewardsOverlay\");\nvar readyOverlay_1 = require(\"./overlays/readyOverlay\");\nvar spectatingOverlay_1 = require(\"./overlays/spectatingOverlay\");\nvar nowPlaying_1 = require(\"../nowPlaying\");\nvar tileInteraction_1 = require(\"./tileInteraction\");\nvar gameBoard_1 = require(\"./gameBoard\");\nvar interactablePiece_1 = require(\"../../components/piece/interactablePiece\");\nvar BoardContainer = function (_a) {\n    var _b = _a.showNowPlaying, showNowPlaying = _b === void 0 ? false : _b;\n    var dispatch = react_redux_1.useDispatch();\n    // todo decouple this, make a playerDropPiece saga\n    var board = react_redux_1.useSelector(function (state) { return state.game.board; });\n    var bench = react_redux_1.useSelector(function (state) { return state.game.bench; });\n    var inPreparingPhase = react_redux_1.useSelector(function (state) { return state.game.roundInfo.phase === models_1.GamePhase.PREPARING; });\n    var isSpectating = react_redux_1.useSelector(function (state) { return state.game.spectating.id !== null; });\n    var renderBenchPiece = function (id) { return React.createElement(interactablePiece_1.InteractablePiece, { id: id }); };\n    return (React.createElement(\"div\", { className: \"group board-container style-default\" },\n        showNowPlaying && React.createElement(nowPlaying_1.NowPlaying, null),\n        React.createElement(\"div\", { className: \"chessboard\" },\n            inPreparingPhase && React.createElement(opponentBoardPlaceholder_1.OpponentBoardPlaceholder, null),\n            React.createElement(gameBoard_1.GameBoard, null),\n            React.createElement(readyOverlay_1.ReadyOverlay, null),\n            React.createElement(victoryOverlay_1.VictoryOverlay, null),\n            React.createElement(matchRewardsOverlay_1.MatchRewardsOverlay, null),\n            React.createElement(reconnectOverlay_1.ReconnectOverlay, null)),\n        React.createElement(\"div\", { className: \"bench\" }, isSpectating ?\n            React.createElement(spectatingOverlay_1.SpectatingOverlay, null)\n            :\n                React.createElement(board_react_1.BoardGrid, { state: bench, onDrop: tileInteraction_1.onDropPiece(dispatch, \"bench\", board, bench), onClick: tileInteraction_1.onTileClick(dispatch, \"bench\"), \n                    // eslint-disable-next-line react/jsx-no-bind\n                    renderItem: renderBenchPiece }))));\n};\nexports.BoardContainer = BoardContainer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.GameBoard = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar board_react_1 = require(\"@shoki/board-react\");\nvar tileInteraction_1 = require(\"./tileInteraction\");\nvar interactablePiece_1 = require(\"../../components/piece/interactablePiece\");\nvar animatedPiece_1 = require(\"../../components/piece/animatedPiece\");\nvar renderAnimatedPiece = function (id) { return React.createElement(animatedPiece_1.AnimatedPiece, { id: id }); };\nvar renderInteractablePiece = function (id) { return React.createElement(interactablePiece_1.InteractablePiece, { id: id }); };\nvar GameBoard = function () {\n    var dispatch = react_redux_1.useDispatch();\n    var bench = react_redux_1.useSelector(function (state) { return state.game.bench; });\n    var board = react_redux_1.useSelector(function (state) { return state.game.board; });\n    var matchBoard = react_redux_1.useSelector(function (state) { return state.game.match.board; });\n    if (matchBoard) {\n        return (React.createElement(\"div\", { className: \"board-tiles\" },\n            React.createElement(board_react_1.BoardGrid, { state: matchBoard, renderItem: renderAnimatedPiece })));\n    }\n    return (React.createElement(\"div\", { className: \"board-tiles\" },\n        React.createElement(board_react_1.BoardGrid, { state: board, onDrop: tileInteraction_1.onDropPiece(dispatch, \"board\", board, bench), onClick: tileInteraction_1.onTileClick(dispatch, \"board\"), renderItem: renderInteractablePiece })));\n};\nexports.GameBoard = GameBoard;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.ResponsiveBoardStyles = exports.clickPieceSaga = exports.clickTileSaga = exports.BoardContainer = void 0;\nvar boardContainer_1 = require(\"./boardContainer\");\n__createBinding(exports, boardContainer_1, \"BoardContainer\");\nvar clickTileSaga_1 = require(\"./sagas/clickTileSaga\");\n__createBinding(exports, clickTileSaga_1, \"clickTileSaga\");\nvar clickPieceSaga_1 = require(\"./sagas/clickPieceSaga\");\n__createBinding(exports, clickPieceSaga_1, \"clickPieceSaga\");\nvar responsiveBoardStyles_1 = require(\"./responsiveBoardStyles\");\n__createBinding(exports, responsiveBoardStyles_1, \"ResponsiveBoardStyles\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.BoardOverlay = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_modal_1 = __importDefault(require(\"react-modal\"));\nvar BoardOverlay = function (_a) {\n    var children = _a.children;\n    var parentSelector = function () { return document.querySelector(\".chessboard\"); };\n    return (React.createElement(react_modal_1[\"default\"], { isOpen: true, className: \"modal\", overlayClassName: \"modal-overlay\", parentSelector: parentSelector }, children));\n};\nexports.BoardOverlay = BoardOverlay;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.HeadToHeadStats = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar getPositionModifier = function (position) {\n    if (position === 1) {\n        return \"st\";\n    }\n    if (position === 2) {\n        return \"nd\";\n    }\n    if (position === 3) {\n        return \"rd\";\n    }\n    return \"th\";\n};\nvar getPosition = function (player, playerList) {\n    var position = playerList.indexOf(player) + 1;\n    return \"\" + position + getPositionModifier(position);\n};\nvar getStreak = function (player) {\n    var streakModifier = getStreakModifier(player);\n    return player.streakAmount + \" \" + streakModifier;\n};\nvar getStreakModifier = function (player) {\n    var streakType = player === null || player === void 0 ? void 0 : player.streakType;\n    var streakAmount = player === null || player === void 0 ? void 0 : player.streakAmount;\n    if (!player || streakAmount === 0) {\n        return \"\";\n    }\n    if (streakType === models_1.StreakType.WIN) {\n        return streakAmount === 1 ? \"Win\" : \"Wins\";\n    }\n    return streakAmount === 1 ? \"Loss\" : \"Losses\";\n};\nvar HeadToHeadStats = function (_a) {\n    var player = _a.player, opponent = _a.opponent;\n    var playerList = react_redux_1.useSelector(function (state) {\n        return state.game.playerList;\n    });\n    return (react_1[\"default\"].createElement(\"div\", { className: \"head-to-head-stats\" },\n        react_1[\"default\"].createElement(\"div\", { className: \"h2h-stat-div\" },\n            react_1[\"default\"].createElement(\"p\", { className: \"h2h-info-header\" }, \"Position\"),\n            react_1[\"default\"].createElement(\"div\", { className: \"h2h-position\" },\n                react_1[\"default\"].createElement(\"p\", { className: \"h2h-info-text\" },\n                    getPosition(player, playerList),\n                    \" vs \",\n                    getPosition(opponent, playerList)))),\n        react_1[\"default\"].createElement(\"div\", { className: \"h2h-stat-div\" },\n            react_1[\"default\"].createElement(\"p\", { className: \"h2h-info-header\" }, \"Streak\"),\n            react_1[\"default\"].createElement(\"div\", { className: \"h2h-streak\" },\n                react_1[\"default\"].createElement(\"p\", { className: \"h2h-info-text\" },\n                    getStreak(player),\n                    \" vs \",\n                    getStreak(opponent)))),\n        react_1[\"default\"].createElement(\"div\", { className: \"h2h-stat-div\" },\n            react_1[\"default\"].createElement(\"p\", { className: \"h2h-info-header\" }, \"Level\"),\n            react_1[\"default\"].createElement(\"div\", { className: \"h2h-level\" },\n                react_1[\"default\"].createElement(\"p\", { className: \"h2h-info-text\" },\n                    player.level,\n                    \" vs \",\n                    opponent.level)))));\n};\nexports.HeadToHeadStats = HeadToHeadStats;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.MatchRewardsOverlay = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar boardOverlay_1 = require(\"./boardOverlay\");\nvar MatchRewardsOverlay = function () {\n    var matchRewards = react_redux_1.useSelector(function (state) { return state.game.playerInfo.matchRewards; });\n    var victoryOverlayShowing = react_redux_1.useSelector(function (state) { return state.game.ui.winnerId !== null; });\n    var spectatingPlayer = react_redux_1.useSelector(function (state) { return state.game.spectating.id !== null; });\n    if (!matchRewards || victoryOverlayShowing || spectatingPlayer) {\n        return null;\n    }\n    var damage = matchRewards.damage, justDied = matchRewards.justDied, _a = matchRewards.rewardMoney, total = _a.total, base = _a.base, winBonus = _a.winBonus, streakBonus = _a.streakBonus, interest = _a.interest;\n    if (justDied) {\n        return (React.createElement(boardOverlay_1.BoardOverlay, null,\n            React.createElement(\"div\", { className: \"match-rewards-content\" },\n                React.createElement(\"h2\", null, \"You Died\"),\n                React.createElement(\"p\", { className: \"health\" },\n                    React.createElement(\"span\", { className: \"highlight\" }, damage),\n                    \" health lost\"),\n                React.createElement(\"div\", { className: \"discord-link\" },\n                    React.createElement(\"p\", null, \"Join us on Discord to receive notifications when someone starts a lobby, and more!\"),\n                    React.createElement(\"a\", { href: \"https://discord.gg/FhMm6saehb\" },\n                        React.createElement(\"img\", { src: \"https://i.imgur.com/OBo2QRd.png\", className: \"discord-button\" }))))));\n    }\n    if (damage === 0) {\n        return (React.createElement(boardOverlay_1.BoardOverlay, null,\n            React.createElement(\"div\", { className: \"match-rewards-content\" },\n                React.createElement(\"h2\", null, \"Round Won\"),\n                React.createElement(\"div\", { className: \"money\" },\n                    React.createElement(\"h3\", null,\n                        React.createElement(\"span\", { className: \"highlight\" },\n                            \"$\",\n                            total),\n                        \" gained\"),\n                    React.createElement(\"ul\", null,\n                        React.createElement(\"li\", null,\n                            \"Base: \",\n                            React.createElement(\"span\", { className: \"highlight\" },\n                                \"$\",\n                                base)),\n                        React.createElement(\"li\", null,\n                            \"Win Bonus: \",\n                            React.createElement(\"span\", { className: \"highlight\" },\n                                \"$\",\n                                winBonus)),\n                        React.createElement(\"li\", null,\n                            \"Streak Bonus: \",\n                            React.createElement(\"span\", { className: \"highlight\" },\n                                \"$\",\n                                streakBonus)),\n                        React.createElement(\"li\", null,\n                            \"Interest (10%): \",\n                            React.createElement(\"span\", { className: \"highlight\" },\n                                \"$\",\n                                interest)))))));\n    }\n    return (React.createElement(boardOverlay_1.BoardOverlay, null,\n        React.createElement(\"div\", { className: \"match-rewards-content\" },\n            React.createElement(\"h2\", null, \"Round Lost\"),\n            React.createElement(\"p\", { className: \"health\" },\n                React.createElement(\"span\", { className: \"highlight\" }, damage),\n                \" health lost\"),\n            React.createElement(\"div\", { className: \"money\" },\n                React.createElement(\"h3\", null,\n                    React.createElement(\"span\", { className: \"highlight\" },\n                        \"$\",\n                        total),\n                    \" gained\"),\n                React.createElement(\"ul\", null,\n                    React.createElement(\"li\", null,\n                        \"Base: \",\n                        React.createElement(\"span\", { className: \"highlight\" },\n                            \"$\",\n                            base)),\n                    React.createElement(\"li\", null,\n                        \"Win Bonus: \",\n                        React.createElement(\"span\", { className: \"highlight\" },\n                            \"$\",\n                            winBonus)),\n                    React.createElement(\"li\", null,\n                        \"Streak Bonus: \",\n                        React.createElement(\"span\", { className: \"highlight\" },\n                            \"$\",\n                            streakBonus)),\n                    React.createElement(\"li\", null,\n                        \"Interest (10%): \",\n                        React.createElement(\"span\", { className: \"highlight\" },\n                            \"$\",\n                            interest)))))));\n};\nexports.MatchRewardsOverlay = MatchRewardsOverlay;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.OpponentBoardPlaceholder = void 0;\nvar React = __importStar(require(\"react\"));\nvar readyUpButton_1 = require(\"./readyUpButton\");\nvar selectedCreature_1 = require(\"./selectedCreature\");\nvar OpponentBoardPlaceholder = function (props) {\n    return (React.createElement(\"div\", { className: \"opponent-board-placeholder\" },\n        React.createElement(\"div\", { className: \"o-group stretch\" },\n            React.createElement(selectedCreature_1.SelectedCreature, null)),\n        React.createElement(\"div\", { className: \"o-group\" },\n            React.createElement(readyUpButton_1.ReadyUpButton, null))));\n};\nexports.OpponentBoardPlaceholder = OpponentBoardPlaceholder;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.QuickChatBox = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar QuickChatBox = function (_a) {\n    var sendingPlayerId = _a.sendingPlayerId;\n    var currentChat = react_redux_1.useSelector(function (state) { return state.game.quickChat[sendingPlayerId]; });\n    return (react_1[\"default\"].createElement(\"div\", { className: \"quick-chat-box\" },\n        react_1[\"default\"].createElement(\"div\", null, currentChat ?\n            react_1[\"default\"].createElement(\"p\", null, currentChat.value)\n            :\n                react_1[\"default\"].createElement(\"div\", { className: \"emoji-spacer\" }))));\n};\nexports.QuickChatBox = QuickChatBox;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.QuickChatButton = void 0;\n/* eslint-disable react/jsx-no-bind */\nvar react_1 = __importDefault(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar auth_1 = require(\"../../../../../auth\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar QuickChatButton = function (_a) {\n    var chatOption = _a.chatOption;\n    var dispatch = react_redux_1.useDispatch();\n    var sendingPlayerId = auth_1.usePlayerId();\n    var onClick = function () {\n        dispatch(gamemode_1.PlayerActions.quickChatPlayerAction({\n            sendingPlayerId: sendingPlayerId,\n            chatValue: chatOption\n        }));\n    };\n    return (react_1[\"default\"].createElement(\"button\", { onClick: onClick }, chatOption.toString()));\n};\nexports.QuickChatButton = QuickChatButton;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.QuickChatButtonArray = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar quickChatButton_1 = require(\"./quickChatButton\");\nvar models_1 = require(\"@creature-chess/models\");\nvar QuickChatButtonArray = function () {\n    // to have different options for different overlays etc., pass the Options enum as a parameter to this component\n    // and map to array as below.\n    var quickChatArray = Object.values(models_1.QuickChatOption);\n    return (react_1[\"default\"].createElement(\"div\", null,\n        react_1[\"default\"].createElement(\"div\", { className: \"spacer\" }),\n        react_1[\"default\"].createElement(\"div\", { className: \"quick-chat-button-container\" }, Object.values(quickChatArray).map(function (chat) { return (react_1[\"default\"].createElement(quickChatButton_1.QuickChatButton, { chatOption: chat, key: chat })); }))));\n};\nexports.QuickChatButtonArray = QuickChatButtonArray;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.ReadyOverlay = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar auth_1 = require(\"../../../../auth\");\nvar boardOverlay_1 = require(\"./boardOverlay\");\nvar headToHeadStats_1 = require(\"./h2h/headToHeadStats\");\nvar quickChatBox_1 = require(\"./quickChat/quickChatBox\");\nvar quickChatButtonArray_1 = require(\"./quickChat/quickChatButtonArray\");\nvar ReadyOverlay = function () {\n    var inReadyPhase = react_redux_1.useSelector(function (state) {\n        return state.game.roundInfo.phase === models_1.GamePhase.READY;\n    });\n    var playerList = react_redux_1.useSelector(function (state) { return state.game.playerList; });\n    var localId = auth_1.usePlayerId();\n    var sendingPlayerId = localId;\n    var localPlayer = playerList.find(function (p) { return p.id === localId; });\n    var opponent = react_redux_1.useSelector(function (state) {\n        var id = state.game.playerInfo.opponentId;\n        return state.game.playerList.find(function (p) { return p.id === id; });\n    });\n    var receivingPlayerId = opponent === null || opponent === void 0 ? void 0 : opponent.id;\n    var spectatingPlayer = react_redux_1.useSelector(function (state) { return state.game.spectating.id !== null; });\n    if (!opponent || !inReadyPhase || spectatingPlayer) {\n        return null;\n    }\n    var returnTitleOrSpacer = function (player) {\n        if (player.profile.title) {\n            return React.createElement(ui_1.Title, { titleId: player.profile.title });\n        }\n        return React.createElement(\"div\", { className: \"spacer\" });\n    };\n    return (React.createElement(boardOverlay_1.BoardOverlay, null,\n        React.createElement(\"div\", { className: \"ready-overlay-content\" },\n            React.createElement(\"p\", { className: \"h2h-header\" }, \"Now Playing:\"),\n            React.createElement(\"div\", { className: \"outer-profile-box\" },\n                React.createElement(\"div\", { className: \"inner-profile-box\" },\n                    React.createElement(\"div\", { className: \"player-picture\" },\n                        React.createElement(ui_1.PlayerAvatar, { player: localPlayer }),\n                        React.createElement(quickChatBox_1.QuickChatBox, { sendingPlayerId: sendingPlayerId })),\n                    React.createElement(\"div\", { className: \"name-and-health\" },\n                        React.createElement(\"p\", { className: \"player-name\" }, localPlayer.name),\n                        returnTitleOrSpacer(localPlayer),\n                        React.createElement(\"div\", { className: \"healthbar-container\" },\n                            React.createElement(ui_1.PlayerHealthbar, { health: localPlayer.health }))),\n                    React.createElement(\"div\", { className: \"spacer\" }),\n                    React.createElement(\"div\", { className: \"name-and-health right\" },\n                        React.createElement(\"p\", { className: \"player-name right\" }, opponent.name),\n                        returnTitleOrSpacer(opponent),\n                        React.createElement(\"div\", { className: \"healthbar-container\" },\n                            React.createElement(ui_1.PlayerHealthbar, { health: opponent.health }))),\n                    React.createElement(\"div\", { className: \"player-picture\" },\n                        React.createElement(ui_1.PlayerAvatar, { player: opponent }),\n                        React.createElement(quickChatBox_1.QuickChatBox, { sendingPlayerId: receivingPlayerId })))),\n            React.createElement(headToHeadStats_1.HeadToHeadStats, { player: localPlayer, opponent: opponent }),\n            React.createElement(quickChatButtonArray_1.QuickChatButtonArray, null))));\n};\nexports.ReadyOverlay = ReadyOverlay;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.ReadyUpButton = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar ReadyUpButton = function () {\n    var canReadyUp = react_redux_1.useSelector(function (state) { return state.game.roundInfo.phase === models_1.GamePhase.PREPARING && state.game.playerInfo.ready === false; });\n    var dispatch = react_redux_1.useDispatch();\n    if (!canReadyUp) {\n        return null;\n    }\n    var onReadyUp = function () { return dispatch(gamemode_1.PlayerActions.readyUpPlayerAction()); };\n    return React.createElement(\"button\", { className: \"ready-up\", onClick: onReadyUp }, \"Ready\");\n};\nexports.ReadyUpButton = ReadyUpButton;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.ReconnectOverlay = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar connection_status_1 = require(\"../../../connection-status\");\nvar boardOverlay_1 = require(\"./boardOverlay\");\nvar ReconnectOverlay = function () {\n    var connectionStatus = react_redux_1.useSelector(function (state) { return state.game.ui.connectionStatus; });\n    if (connectionStatus === connection_status_1.ConnectionStatus.NOT_CONNECTED\n        || connectionStatus === connection_status_1.ConnectionStatus.CONNECTED) {\n        return null;\n    }\n    return (React.createElement(boardOverlay_1.BoardOverlay, null,\n        React.createElement(\"div\", { className: \"reconnect-overlay\" }, connectionStatus === connection_status_1.ConnectionStatus.DISCONNECTED\n            && (React.createElement(React.Fragment, null,\n                React.createElement(\"p\", { className: \"text\" }, \"You've been disconnected - but you can get back in!\"),\n                React.createElement(\"p\", { className: \"text\" }, \"Please refresh the page and press 'Find Game' to rejoin\"))))));\n};\nexports.ReconnectOverlay = ReconnectOverlay;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.SelectedCreature = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar selectedPieceSelector = function (state) {\n    return state.game.ui.selectedPieceId\n        ? gamemode_1.getPiece(state.game, state.game.ui.selectedPieceId)\n        : null;\n};\nvar SellPieceButton = function (_a) {\n    var pieceId = _a.pieceId;\n    var dispatch = react_redux_1.useDispatch();\n    var _b = __read(React.useState(false), 2), areYouSure = _b[0], setAreYouSure = _b[1];\n    var onClick = (areYouSure\n        ? function () {\n            dispatch(gamemode_1.PlayerActions.sellPiecePlayerAction({ pieceId: pieceId }));\n        }\n        : function () {\n            setAreYouSure(true);\n        });\n    React.useEffect(function () {\n        setAreYouSure(false);\n    }, [pieceId]);\n    if (!areYouSure) {\n        return React.createElement(\"button\", { className: \"ready-up\", onClick: onClick }, \"Sell Piece\");\n    }\n    return React.createElement(\"button\", { className: \"ready-up\", onClick: onClick }, \"Confirm?\");\n};\nvar SelectedCreature = function () {\n    var selectedPiece = react_redux_1.useSelector(selectedPieceSelector);\n    if (!selectedPiece) {\n        return null;\n    }\n    return (React.createElement(React.Fragment, null,\n        React.createElement(SellPieceButton, { pieceId: selectedPiece.id })));\n};\nexports.SelectedCreature = SelectedCreature;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.SpectatingOverlay = void 0;\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar react_1 = __importDefault(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar SpectatingOverlay = function () {\n    var dispatch = react_redux_1.useDispatch();\n    var spectatingId = react_redux_1.useSelector(function (state) { return state.game.spectating.id; });\n    var spectatingName = react_redux_1.useSelector(function (state) {\n        return state.game.playerList.find(function (player) {\n            return player.id === spectatingId;\n        }).name;\n    });\n    var stopSpectating = function () {\n        dispatch(gamemode_1.PlayerActions.spectatePlayerAction({ playerId: null }));\n    };\n    return (react_1[\"default\"].createElement(\"section\", { className: \"spectating-overlay\" },\n        react_1[\"default\"].createElement(\"div\", { className: \"text-items\" },\n            react_1[\"default\"].createElement(\"h1\", { className: \"spectating-header\" }, \"SPECTATING\"),\n            react_1[\"default\"].createElement(\"p\", null,\n                \"You are currently spectating \",\n                spectatingName,\n                \" \")),\n        react_1[\"default\"].createElement(\"button\", { onClick: stopSpectating }, \"Stop Spectating\")));\n};\nexports.SpectatingOverlay = SpectatingOverlay;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.VictoryOverlay = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar selectors_1 = require(\"../../playerList/components/selectors\");\nvar boardOverlay_1 = require(\"./boardOverlay\");\nvar VictoryOverlay = function () {\n    var spectatingPlayer = react_redux_1.useSelector(function (state) { return state.game.spectating.id !== null; });\n    var winnerName = react_redux_1.useSelector(function (state) {\n        var winnerId = state.game.ui.winnerId;\n        if (!winnerId) {\n            return null;\n        }\n        // todo fix this selector\n        return selectors_1.getPlayerById(winnerId)(state).name;\n    });\n    if (!winnerName || spectatingPlayer) {\n        return null;\n    }\n    return (React.createElement(boardOverlay_1.BoardOverlay, null,\n        React.createElement(\"div\", { className: \"victory-overlay\" },\n            React.createElement(\"h2\", { className: \"game-over\" }, \"Game Over\"),\n            React.createElement(\"p\", { className: \"winner\" },\n                React.createElement(\"span\", { className: \"highlight\" }, winnerName),\n                \" wins!\"),\n            React.createElement(\"div\", { className: \"discord-link\" },\n                React.createElement(\"p\", { className: \"spectate\" },\n                    React.createElement(\"span\", { className: \"highlight\" }, \"new:\"),\n                    \" You can spectate players from the player list\"),\n                React.createElement(\"p\", null, \"Join us on Discord to receive notifications when someone starts a lobby, and more!\"),\n                React.createElement(\"a\", { href: \"https://discord.gg/FhMm6saehb\" },\n                    React.createElement(\"img\", { src: \"https://i.imgur.com/OBo2QRd.png\", className: \"discord-button\" }))))));\n};\nexports.VictoryOverlay = VictoryOverlay;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.ResponsiveBoardStyles = void 0;\nvar React = __importStar(require(\"react\"));\nvar models_1 = require(\"@creature-chess/models\");\nvar use_window_size_1 = require(\"./use-window-size\");\nvar inPortraitMode = function (width, height) { return (height >= width); };\nvar getBoardInformation = function (width, height) {\n    if (inPortraitMode(width, height)) {\n        // board + spacing\n        var colsRequired = models_1.Constants.GRID_SIZE.width;\n        // in portrait mode, use full width\n        var tileWidth = width / colsRequired;\n        return {\n            tileSize: tileWidth,\n            boardHeight: tileWidth * (models_1.Constants.GRID_SIZE.height + 1 + 0.5) + \"px\",\n            boardWidth: tileWidth * models_1.Constants.GRID_SIZE.width + \"px\"\n        };\n    }\n    // board + bench + spacing\n    var rowsRequired = models_1.Constants.GRID_SIZE.height + 1 + 0.5;\n    // in landscape mode, use full height\n    var tileHeight = height / rowsRequired;\n    return {\n        tileSize: tileHeight,\n        boardHeight: \"100%\",\n        boardWidth: tileHeight * models_1.Constants.GRID_SIZE.width + \"px\"\n    };\n};\nvar ResponsiveBoardStyles = function () {\n    var _a = use_window_size_1.useWindowSize(), width = _a.width, height = _a.height;\n    var _b = getBoardInformation(width, height), tileSize = _b.tileSize, boardHeight = _b.boardHeight, boardWidth = _b.boardWidth;\n    // todo this is ugly\n    var boardContainerStyle = inPortraitMode(width, height)\n        ? \"{ width: \" + boardWidth + \"; margin: 0 auto; }\"\n        : \"{ height: \" + boardHeight + \"; width: \" + boardWidth + \"; }\";\n    return (React.createElement(\"style\", { dangerouslySetInnerHTML: {\n            __html: \"\\n            #approot { height: 100%; }\\n            .tile { width: \" + tileSize + \"px; height: \" + tileSize + \"px; }\\n            .positionable-piece { width: \" + tileSize + \"px; height: \" + tileSize + \"px; }\\n            .piece { width: \" + tileSize + \"px; height: \" + tileSize + \"px; }\\n\\n            .board-container \" + boardContainerStyle + \"\\n\\n            .chessboard { height: \" + tileSize * models_1.Constants.GRID_SIZE.height + \"px; }\\n\\n            .bench { height: \" + tileSize + \"px; }\\n\\n\\t\\t\\t.spectating-overlay { height: \" + tileSize + \"px; }\\n\\n            .opponent-board-placeholder { height: \" + tileSize * models_1.Constants.GRID_SIZE.height / 2 + \"px; }\\n            \"\n        } }));\n};\nexports.ResponsiveBoardStyles = ResponsiveBoardStyles;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.clickPieceSaga = exports.playerClickPieceAction = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar board_1 = require(\"@shoki/board\");\nvar actions_1 = require(\"../../../ui/actions\");\nvar ui_1 = require(\"../../../ui\");\nvar clickTileSaga_1 = require(\"./clickTileSaga\");\nexports.playerClickPieceAction = toolkit_1.createAction(\"playerClickPieceAction\");\nvar clickPieceSaga = function () {\n    var action, pieceId, board, bench, piece, pieceLocation, selectedPiece, selectedPieceLocation;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!true) return [3 /*break*/, 10];\n                return [4 /*yield*/, effects_1.take(exports.playerClickPieceAction.toString())];\n            case 1:\n                action = _a.sent();\n                pieceId = action.payload.pieceId;\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.board; })];\n            case 2:\n                board = _a.sent();\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.bench; })];\n            case 3:\n                bench = _a.sent();\n                piece = board_1.BoardSelectors.getPiece(board, pieceId)\n                    || board_1.BoardSelectors.getPiece(bench, pieceId)\n                    || null;\n                if (!piece) {\n                    // piece doesn't exist should never happen\n                    // todo maybe log it?\n                    return [3 /*break*/, 0];\n                }\n                pieceLocation = clickTileSaga_1.getLocationForPiece(pieceId, board, bench);\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.ui.selectedPieceId\n                        ? gamemode_1.getPiece(state.game, state.game.ui.selectedPieceId)\n                        : null; })];\n            case 4:\n                selectedPiece = _a.sent();\n                if (!selectedPiece) return [3 /*break*/, 7];\n                selectedPieceLocation = clickTileSaga_1.getLocationForPiece(selectedPiece.id, board, bench);\n                return [4 /*yield*/, effects_1.put(gamemode_1.PlayerActions.swapPiecePlayerAction({\n                        pieceAId: selectedPiece.id,\n                        pieceALocation: selectedPieceLocation,\n                        pieceBId: pieceId,\n                        pieceBLocation: pieceLocation\n                    }))];\n            case 5:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(actions_1.clearSelectedPiece())];\n            case 6:\n                _a.sent();\n                return [3 /*break*/, 9];\n            case 7: return [4 /*yield*/, effects_1.put(ui_1.UIActions.selectPiece(pieceId))];\n            case 8:\n                _a.sent();\n                _a.label = 9;\n            case 9: return [3 /*break*/, 0];\n            case 10: return [2 /*return*/];\n        }\n    });\n};\nexports.clickPieceSaga = clickPieceSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.clickTileSaga = exports.playerClickTileAction = exports.getLocationForPiece = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar board_1 = require(\"@shoki/board\");\nvar actions_1 = require(\"../../../ui/actions\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\n// todo move this to a player selector\nvar getLocationForPiece = function (pieceId, board, bench) {\n    if (board) {\n        var boardPiecePosition = board_1.BoardSelectors.getPiecePosition(board, pieceId);\n        if (boardPiecePosition) {\n            return {\n                type: \"board\",\n                location: boardPiecePosition\n            };\n        }\n    }\n    if (bench) {\n        var benchPiecePosition = board_1.BoardSelectors.getPiecePosition(bench, pieceId);\n        if (benchPiecePosition !== undefined) {\n            return {\n                type: \"bench\",\n                location: benchPiecePosition\n            };\n        }\n    }\n    return null;\n};\nexports.getLocationForPiece = getLocationForPiece;\nexports.playerClickTileAction = toolkit_1.createAction(\"playerClickTileAction\");\nvar clickTileSaga = function () {\n    var action, tile, selectedPiece, tileEmpty, board, bench, piecePositionKey, from;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!true) return [3 /*break*/, 7];\n                return [4 /*yield*/, effects_1.take(exports.playerClickTileAction.toString())];\n            case 1:\n                action = _a.sent();\n                tile = action.payload.tile;\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.ui.selectedPieceId\n                        ? gamemode_1.getPiece(state.game, state.game.ui.selectedPieceId)\n                        : null; })];\n            case 2:\n                selectedPiece = _a.sent();\n                if (!selectedPiece) {\n                    return [3 /*break*/, 0];\n                }\n                tileEmpty = false;\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.board; })];\n            case 3:\n                board = _a.sent();\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.bench; })];\n            case 4:\n                bench = _a.sent();\n                piecePositionKey = tile.location.x + \",\" + tile.location.y;\n                if (tile.type === \"bench\") {\n                    tileEmpty = !bench.piecePositions[piecePositionKey];\n                }\n                else if (tile.type === \"board\") {\n                    tileEmpty = !board.piecePositions[piecePositionKey];\n                }\n                if (!tileEmpty) {\n                    // click raised for non-empty tile, should never happen\n                    // todo maybe log it?\n                    return [3 /*break*/, 0];\n                }\n                from = exports.getLocationForPiece(selectedPiece.id, board, bench);\n                return [4 /*yield*/, effects_1.put(gamemode_1.PlayerActions.dropPiecePlayerAction({\n                        pieceId: selectedPiece.id,\n                        from: from,\n                        to: tile\n                    }))];\n            case 5:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(actions_1.clearSelectedPiece())];\n            case 6:\n                _a.sent();\n                return [3 /*break*/, 0];\n            case 7: return [2 /*return*/];\n        }\n    });\n};\nexports.clickTileSaga = clickTileSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.onTileClick = exports.onDropPiece = void 0;\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar board_1 = require(\"@shoki/board\");\nvar actions_1 = require(\"../../ui/actions\");\nvar clickTileSaga_1 = require(\"./sagas/clickTileSaga\");\nvar getLocationForPiece = function (pieceId, board, bench) {\n    if (board) {\n        var boardPiecePosition = board_1.BoardSelectors.getPiecePosition(board, pieceId);\n        if (boardPiecePosition) {\n            return {\n                type: \"board\",\n                location: boardPiecePosition\n            };\n        }\n    }\n    if (bench) {\n        var benchPiecePosition = board_1.BoardSelectors.getPiecePosition(bench, pieceId);\n        if (benchPiecePosition) {\n            return {\n                type: \"bench\",\n                location: benchPiecePosition\n            };\n        }\n    }\n    return null;\n};\nvar onDropPiece = function (dispatch, locationType, board, bench) {\n    return function (item, x, y) {\n        var piece = item.piece;\n        var from = getLocationForPiece(piece.id, board, bench);\n        if (!from) {\n            return;\n        }\n        var location = {\n            type: locationType,\n            location: { x: x, y: y }\n        };\n        // todo `from` is here as a safety check, is it needed?\n        dispatch(gamemode_1.PlayerActions.dropPiecePlayerAction({\n            pieceId: piece.id,\n            from: from,\n            to: location\n        }));\n        dispatch(actions_1.clearSelectedPiece());\n    };\n};\nexports.onDropPiece = onDropPiece;\nvar onTileClick = function (dispatch, locationType) {\n    return function (x, y) { return dispatch(clickTileSaga_1.playerClickTileAction({ tile: { type: locationType, location: { x: x, y: y } } })); };\n};\nexports.onTileClick = onTileClick;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.useWindowSize = void 0;\nvar react_1 = require(\"react\");\nvar useWindowSize = function () {\n    var _a = __read(react_1.useState(window.innerWidth), 2), width = _a[0], setWidth = _a[1];\n    var _b = __read(react_1.useState(window.innerHeight), 2), height = _b[0], setHeight = _b[1];\n    react_1.useEffect(function () {\n        var handleResize = function () {\n            setWidth(window.innerWidth);\n            setHeight(window.innerHeight);\n        };\n        window.addEventListener(\"resize\", handleResize);\n        return function () {\n            window.removeEventListener(\"resize\", handleResize);\n        };\n    });\n    return { width: width, height: height };\n};\nexports.useWindowSize = useWindowSize;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.CardShop = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar CardShop = function () {\n    var dispatch = react_redux_1.useDispatch();\n    var cards = react_redux_1.useSelector(function (state) { return state.game.cardShop.cards; });\n    var money = react_redux_1.useSelector(function (state) { return gamemode_1.getPlayerMoney(state.game); });\n    var canUseShop = react_redux_1.useSelector(function (state) { return state.game.playerInfo.health > 0; });\n    var shopLocked = react_redux_1.useSelector(function (state) { return state.game.cardShop.locked; });\n    var isSpectating = react_redux_1.useSelector(function (state) { return state.game.spectating.id !== null; });\n    if (cards === null || canUseShop === false || isSpectating) {\n        return null;\n    }\n    var onBuy = function (index) { return dispatch(gamemode_1.PlayerActions.buyCardPlayerAction({ index: index })); };\n    var onReroll = function () { return dispatch(gamemode_1.PlayerActions.rerollCardsPlayerAction()); };\n    var onToggleLock = function () { return dispatch(gamemode_1.PlayerActions.toggleShopLockPlayerAction()); };\n    return (React.createElement(ui_1.CardShop, { cards: cards, money: money, isLocked: shopLocked, onToggleLock: onToggleLock, onReroll: onReroll, onBuy: onBuy }));\n};\nexports.CardShop = CardShop;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.closeShopOnFirstBuySaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar overlay_1 = require(\"../../ui/overlay\");\nvar actions_1 = require(\"../../ui/actions\");\nvar closeShopOnFirstBuySaga = function () {\n    var shopIsOpen;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.take(gamemode_1.PlayerActions.buyCardPlayerAction.toString())];\n            case 1:\n                _a.sent();\n                return [4 /*yield*/, effects_1.select(function (state) { return state.game.ui.currentOverlay === overlay_1.Overlay.SHOP; })];\n            case 2:\n                shopIsOpen = _a.sent();\n                if (!shopIsOpen) {\n                    return [2 /*return*/];\n                }\n                return [4 /*yield*/, effects_1.put(actions_1.closeOverlay())];\n            case 3:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.closeShopOnFirstBuySaga = closeShopOnFirstBuySaga;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.closeShopOnFirstBuySaga = exports.CardShop = void 0;\nvar cardShop_1 = require(\"./cardShop\");\n__createBinding(exports, cardShop_1, \"CardShop\");\nvar closeShopOnFirstBuySaga_1 = require(\"./closeShopOnFirstBuySaga\");\n__createBinding(exports, closeShopOnFirstBuySaga_1, \"closeShopOnFirstBuySaga\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.quickChatCommands = exports.quickChatReducer = void 0;\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"reducer\", \"quickChatReducer\");\n__createBinding(exports, state_1, \"commands\", \"quickChatCommands\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.handleQuickChat = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar state_1 = require(\"./state\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar handleQuickChat = function () {\n    var action, _a, sendingPlayerId, chatValue, _b, newChat, timeout;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0: return [4 /*yield*/, effects_1.take(gamemode_1.PlayerEvents.playerReceiveQuickChatEvent.toString())];\n            case 1:\n                action = _c.sent();\n                _c.label = 2;\n            case 2:\n                if (!true) return [3 /*break*/, 9];\n                _a = action.payload, sendingPlayerId = _a.sendingPlayerId, chatValue = _a.chatValue;\n                if (!!chatValue) return [3 /*break*/, 4];\n                return [4 /*yield*/, effects_1.take(gamemode_1.PlayerEvents.playerReceiveQuickChatEvent.toString())];\n            case 3:\n                action = _c.sent();\n                return [3 /*break*/, 2];\n            case 4: return [4 /*yield*/, effects_1.put(state_1.commands.setPlayerChat({ sendingPlayerId: sendingPlayerId, chatValue: chatValue }))];\n            case 5:\n                _c.sent();\n                return [4 /*yield*/, effects_1.race({\n                        newChat: effects_1.take(gamemode_1.PlayerEvents.playerReceiveQuickChatEvent.toString()),\n                        timeout: effects_1.delay(3000)\n                    })];\n            case 6:\n                _b = _c.sent(), newChat = _b.newChat, timeout = _b.timeout;\n                if (newChat) {\n                    action = newChat;\n                    return [3 /*break*/, 2];\n                }\n                return [4 /*yield*/, effects_1.put(state_1.commands.clearPlayerChat({ sendingPlayerId: sendingPlayerId }))];\n            case 7:\n                _c.sent();\n                return [4 /*yield*/, effects_1.take(gamemode_1.PlayerEvents.playerReceiveQuickChatEvent.toString())];\n            case 8:\n                action = _c.sent();\n                return [3 /*break*/, 2];\n            case 9: return [2 /*return*/];\n        }\n    });\n};\nexports.handleQuickChat = handleQuickChat;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nexports.__esModule = true;\nexports.commands = exports.reducer = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = {};\nexports.reducer = (_a = toolkit_1.createSlice({\n    name: \"quickChat\",\n    initialState: initialState,\n    reducers: {\n        setPlayerChat: function (state, _a) {\n            var _b;\n            var _c = _a.payload, sendingPlayerId = _c.sendingPlayerId, chatValue = _c.chatValue;\n            return (__assign(__assign({}, state), (_b = {}, _b[sendingPlayerId] = {\n                value: chatValue,\n                receivedAt: Date.now()\n            }, _b)));\n        },\n        clearPlayerChat: function (state, _a) {\n            var _b;\n            var sendingPlayerId = _a.payload.sendingPlayerId;\n            return (__assign(__assign({}, state), (_b = {}, _b[sendingPlayerId] = {\n                value: null,\n                receivedAt: null\n            }, _b)));\n        }\n    }\n}), _a.reducer), exports.commands = _a.actions;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.Help = void 0;\nvar React = __importStar(require(\"react\"));\nvar models_1 = require(\"@creature-chess/models\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar footer_1 = require(\"../../display/footer\");\nvar Help = function (_a) {\n    var _b = _a.hideFooter, hideFooter = _b === void 0 ? false : _b;\n    return (React.createElement(\"div\", { className: \"help\" },\n        React.createElement(\"div\", { className: \"section\" },\n            React.createElement(\"h2\", { className: \"header\" }, \"The Game\"),\n            React.createElement(\"p\", null, \"Buy pieces and place them on the board. Your board then battles another random player's board. If you lose, your health will decrease. If your health hits 0, you will be knocked out.\"),\n            React.createElement(\"p\", null, \"The winner is the last player remaining!\")),\n        React.createElement(\"div\", { className: \"section\" },\n            React.createElement(\"h2\", { className: \"header\" }, \"Creatures\"),\n            React.createElement(\"p\", null, \"Three creatures (level 1) will combine to make a stronger creature (level 2). Three level 2 creatures can then evolve into a level 3 creature.\"),\n            React.createElement(\"p\", null, \"Each creature has a class and a type. Their class determines their fighting style, and types give some boost/reduction to damage when fighting other types.\"),\n            React.createElement(\"h3\", { className: \"subheader\" }, \"Classes\"),\n            React.createElement(\"ul\", null,\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" }, \"Valiant:\"),\n                    \" All-round melee.\"),\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" }, \"Cunning:\"),\n                    \" High damage, low-health melee.\"),\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" }, \"Arcane:\"),\n                    \" Ranged.\")),\n            React.createElement(\"h3\", { className: \"subheader\" }, \"Types\"),\n            React.createElement(\"ul\", null,\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" },\n                        React.createElement(\"div\", { className: \"piece-type\" },\n                            React.createElement(ui_1.TypeIndicator, { type: models_1.CreatureType.Earth })),\n                        \"Earth:\"),\n                    \" Overcomes water.\"),\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" },\n                        React.createElement(\"div\", { className: \"piece-type\" },\n                            React.createElement(ui_1.TypeIndicator, { type: models_1.CreatureType.Metal })),\n                        \"Metal:\"),\n                    \" Overcomes wood.\"),\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" },\n                        React.createElement(\"div\", { className: \"piece-type\" },\n                            React.createElement(ui_1.TypeIndicator, { type: models_1.CreatureType.Water })),\n                        \"Water:\"),\n                    \" Overcomes fire.\"),\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" },\n                        React.createElement(\"div\", { className: \"piece-type\" },\n                            React.createElement(ui_1.TypeIndicator, { type: models_1.CreatureType.Wood })),\n                        \"Wood:\"),\n                    \" Overcomes earth.\"),\n                React.createElement(\"li\", null,\n                    React.createElement(\"span\", { className: \"list-header\" },\n                        React.createElement(\"div\", { className: \"piece-type\" },\n                            React.createElement(ui_1.TypeIndicator, { type: models_1.CreatureType.Fire })),\n                        \"Fire:\"),\n                    \" Overcomes metal.\"))),\n        React.createElement(\"div\", { className: \"section\" },\n            React.createElement(\"h2\", { className: \"header\" }, \"Money\"),\n            React.createElement(\"p\", null, \"After each round you will receive some money:\"),\n            React.createElement(\"ul\", null,\n                React.createElement(\"li\", null, \"Bonus for winning the round\"),\n                React.createElement(\"li\", null, \"10% interest\"),\n                React.createElement(\"li\", null, \"Win / loss streak bonus\"))),\n        !hideFooter && React.createElement(footer_1.Footer, null)));\n};\nexports.Help = Help;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.NowPlaying = exports.Help = exports.PhaseInfo = exports.RoundIndicator = exports.QuitGameButton = exports.Settings = exports.Profile = exports.closeShopOnFirstBuySaga = exports.CardShop = exports.ResponsiveBoardStyles = exports.clickPieceSaga = exports.clickTileSaga = exports.BoardContainer = exports.quickChatCommands = exports.quickChatReducer = exports.PlayerListCommands = exports.playerListReducer = exports.PlayerList = void 0;\nvar playerList_1 = require(\"./playerList\");\n__createBinding(exports, playerList_1, \"PlayerList\");\n__createBinding(exports, playerList_1, \"playerListReducer\");\n__createBinding(exports, playerList_1, \"PlayerListCommands\");\nvar chat_1 = require(\"./chat\");\n__createBinding(exports, chat_1, \"quickChatReducer\");\n__createBinding(exports, chat_1, \"quickChatCommands\");\nvar board_1 = require(\"../module/board\");\n__createBinding(exports, board_1, \"BoardContainer\");\n__createBinding(exports, board_1, \"clickTileSaga\");\n__createBinding(exports, board_1, \"clickPieceSaga\");\n__createBinding(exports, board_1, \"ResponsiveBoardStyles\");\nvar cardShop_1 = require(\"../module/cardShop\");\n__createBinding(exports, cardShop_1, \"CardShop\");\n__createBinding(exports, cardShop_1, \"closeShopOnFirstBuySaga\");\nvar profile_1 = require(\"./profile\");\n__createBinding(exports, profile_1, \"Profile\");\nvar settings_1 = require(\"./settings\");\n__createBinding(exports, settings_1, \"Settings\");\n__createBinding(exports, settings_1, \"QuitGameButton\");\nvar roundIndicator_1 = require(\"./roundIndicator\");\n__createBinding(exports, roundIndicator_1, \"RoundIndicator\");\nvar phaseInfo_1 = require(\"./phaseInfo\");\n__createBinding(exports, phaseInfo_1, \"PhaseInfo\");\nvar help_1 = require(\"./help\");\n__createBinding(exports, help_1, \"Help\");\nvar nowPlaying_1 = require(\"./nowPlaying\");\n__createBinding(exports, nowPlaying_1, \"NowPlaying\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nexports.__esModule = true;\nexports.setMatchBoard = exports.matchReducer = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = { board: null };\nexports.matchReducer = (_a = toolkit_1.createSlice({\n    name: \"match\",\n    initialState: initialState,\n    reducers: {\n        setMatchBoard: function (state, _a) {\n            var board = _a.payload;\n            return (__assign(__assign({}, state), { board: board }));\n        }\n    }\n}), _a.reducer), exports.setMatchBoard = _a.actions.setMatchBoard;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.NowPlaying = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar getOpponentName = function (state) { var _a; return (_a = state.game.playerList.find(function (p) { return p.id === state.game.playerInfo.opponentId; })) === null || _a === void 0 ? void 0 : _a.name; };\nvar NowPlaying = function () {\n    var phase = react_redux_1.useSelector(function (state) { return state.game.roundInfo.phase; });\n    var opponentName = react_redux_1.useSelector(getOpponentName);\n    if (phase !== models_1.GamePhase.READY && phase !== models_1.GamePhase.PLAYING) {\n        return null;\n    }\n    if (!opponentName) {\n        return null;\n    }\n    return React.createElement(\"div\", { className: \"now-playing\" },\n        React.createElement(\"span\", { className: \"label\" },\n            \"Now Playing: \",\n            opponentName));\n};\nexports.NowPlaying = NowPlaying;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.PhaseInfo = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar countdown_1 = require(\"../../display/countdown\");\nvar models_1 = require(\"@creature-chess/models\");\nvar renderPhaseInfoCountdown = function (secondsRemaining) { return React.createElement(\"span\", { className: \"highlight\" },\n    \"(\",\n    secondsRemaining,\n    \")\"); };\nvar PhaseInfo = function () {\n    var phase = react_redux_1.useSelector(function (state) { return state.game.roundInfo.phase; });\n    var phaseStartedAtSeconds = react_redux_1.useSelector(function (state) { return state.game.roundInfo.phaseStartedAtSeconds; });\n    var isDead = react_redux_1.useSelector(function (state) { return state.game.playerInfo.health === 0; });\n    if (isDead) {\n        return React.createElement(\"div\", { className: \"phase-info\" }, \"You are dead\");\n    }\n    var phaseEndTime = models_1.Constants.PHASE_LENGTHS[phase] + phaseStartedAtSeconds;\n    return React.createElement(\"div\", { className: \"phase-info\" },\n        models_1.GamePhase[phase],\n        \" \",\n        React.createElement(countdown_1.Countdown, { countdownToSeconds: phaseEndTime, render: renderPhaseInfoCountdown }));\n};\nexports.PhaseInfo = PhaseInfo;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.PlayerList = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar auth_1 = require(\"../../../../auth\");\n// todo move this\nfunction ordinal_suffix_of(i) {\n    var j = i % 10;\n    var k = i % 100;\n    if (j === 1 && k !== 11) {\n        return i + \"st\";\n    }\n    if (j === 2 && k !== 12) {\n        return i + \"nd\";\n    }\n    if (j === 3 && k !== 13) {\n        return i + \"rd\";\n    }\n    return i + \"th\";\n}\nvar getOpponentName = function (battle, players) {\n    var _a;\n    if (!battle) {\n        return \"\";\n    }\n    return ((_a = players.find(function (p) { return p.id === battle.opponentId; })) === null || _a === void 0 ? void 0 : _a.name) || \"\";\n};\nvar PlayerList = function () {\n    var dispatch = react_redux_1.useDispatch();\n    var localPlayerId = auth_1.usePlayerId();\n    var players = react_redux_1.useSelector(function (state) { return state.game.playerList; });\n    var opponentId = react_redux_1.useSelector(function (state) { return state.game.playerInfo.opponentId; });\n    var showReadyIndicators = react_redux_1.useSelector(function (state) { return state.game.roundInfo.phase === models_1.GamePhase.PREPARING; });\n    var currentlySpectatingId = react_redux_1.useSelector(function (state) { return state.game.spectating.id; });\n    return (React.createElement(\"div\", { className: \"player-list\" }, players.map(function (p, index) {\n        var opponentName = getOpponentName(p.battle, players);\n        if (p.status === models_1.PlayerStatus.QUIT) {\n            return (React.createElement(ui_1.StatusPlayerListItem, { key: p.id, name: p.name, opponentName: opponentName, battle: p.battle, status: \"Quit\" }));\n        }\n        if (p.status === models_1.PlayerStatus.DEAD) {\n            return (React.createElement(ui_1.StatusPlayerListItem, { key: p.id, name: p.name, opponentName: opponentName, battle: p.battle, status: \"Dead\", subtitle: ordinal_suffix_of(index + 1) + \" place\" }));\n        }\n        var currentlySpectating = currentlySpectatingId === p.id;\n        var onSpectateClick = function () {\n            dispatch(gamemode_1.PlayerActions.spectatePlayerAction(currentlySpectating\n                ? { playerId: null }\n                : { playerId: p.id }));\n        };\n        return (React.createElement(ui_1.PlayerListItem, { key: p.id, index: index, player: p, isOpponent: p.id === opponentId, isLocal: p.id === localPlayerId, onSpectateClick: onSpectateClick, opponentName: opponentName, currentlySpectating: currentlySpectating, showReadyIndicator: showReadyIndicators }));\n    })));\n};\nexports.PlayerList = PlayerList;\n","\"use strict\";\nexports.__esModule = true;\nexports.getPlayerById = void 0;\nvar reselect_1 = require(\"reselect\");\nvar getPlayers = function (state) { return state.game.playerList; };\nvar getPlayerById = function (id) { return reselect_1.createSelector(getPlayers, function (players) { return players.find(function (p) { return p.id === id; }) || null; }); };\nexports.getPlayerById = getPlayerById;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.PlayerListCommands = exports.playerListReducer = exports.PlayerList = void 0;\nvar playerList_1 = require(\"./components/playerList\");\n__createBinding(exports, playerList_1, \"PlayerList\");\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"reducer\", \"playerListReducer\");\n__createBinding(exports, state_1, \"commands\", \"PlayerListCommands\");\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar _a;\nexports.__esModule = true;\nexports.commands = exports.reducer = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = [];\nexports.reducer = (_a = toolkit_1.createSlice({\n    name: \"playerlist\",\n    initialState: initialState,\n    reducers: {\n        updatePlayerListCommand: function (state, _a) {\n            var players = _a.payload;\n            return (__spreadArray([], __read(players)));\n        }\n    }\n}), _a.reducer), exports.commands = _a.actions;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Profile = void 0;\nvar profile_1 = require(\"./profile\");\n__createBinding(exports, profile_1, \"Profile\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.PieceCount = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar board_1 = require(\"@shoki/board\");\nvar auth_1 = require(\"../../../auth\");\nvar PieceCount = function (props) {\n    var playerId = auth_1.usePlayerId();\n    var level = react_redux_1.useSelector(function (state) { return gamemode_1.getPlayerLevel(state.game); });\n    var board = react_redux_1.useSelector(function (state) { return state.game.board; });\n    var pieceCount = board_1.BoardSelectors.getAllPieces(board).filter(function (p) { return p.ownerId === playerId; }).length;\n    if (pieceCount !== level) {\n        return React.createElement(\"p\", { className: \"item pieces warning\" },\n            pieceCount,\n            \" / \",\n            level,\n            \" pieces (board not full!)\");\n    }\n    return React.createElement(\"p\", { className: \"item pieces\" },\n        pieceCount,\n        \" / \",\n        level,\n        \" pieces\");\n};\nexports.PieceCount = PieceCount;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.Profile = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar models_1 = require(\"@creature-chess/models\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar models_2 = require(\"@creature-chess/models\");\nvar auth_1 = require(\"../../../auth\");\nvar pieceCount_1 = require(\"./pieceCount\");\nvar renderProgressBar = function (current, max) { return current + \" / \" + max + \" xp\"; };\nvar Profile = function () {\n    var dispatch = react_redux_1.useDispatch();\n    var playerId = auth_1.usePlayerId();\n    var level = react_redux_1.useSelector(function (state) { return gamemode_1.getPlayerLevel(state.game); });\n    var xp = react_redux_1.useSelector(function (state) { return gamemode_1.getPlayerXp(state.game); });\n    var money = react_redux_1.useSelector(function (state) { return gamemode_1.getPlayerMoney(state.game); });\n    // todo reselect\n    var health = react_redux_1.useSelector(function (state) {\n        var player = state.game.playerList.find(function (p) { return p.id === playerId; });\n        return player ? player.health : null;\n    });\n    if (health === null) {\n        return null;\n    }\n    var onBuyXp = function () { return dispatch(gamemode_1.PlayerActions.buyXpPlayerAction()); };\n    return (React.createElement(\"div\", { className: \"profile\" },\n        React.createElement(\"div\", { className: \"row\" },\n            React.createElement(\"p\", { className: \"item level\" },\n                \"Level \",\n                level,\n                \" \",\n                React.createElement(\"span\", { className: \"highlight\" },\n                    \"$\",\n                    money)),\n            level !== models_2.MAX_PLAYER_LEVEL\n                && (React.createElement(ui_1.ProgressBar, { className: \"xp-progress\", fillClassName: \"xp-progress-fill\", contentClassName: \"xp-progress-content\", current: xp, max: models_1.getXpToNextLevel(level), renderContents: renderProgressBar }))),\n        React.createElement(\"div\", { className: \"row\" },\n            React.createElement(pieceCount_1.PieceCount, null),\n            level !== models_2.MAX_PLAYER_LEVEL\n                && (React.createElement(\"button\", { className: \"buy-xp\", onClick: onBuyXp },\n                    \"Buy \",\n                    models_1.Constants.BUY_XP_AMOUNT,\n                    \" xp ($\",\n                    models_1.Constants.BUY_XP_COST,\n                    \")\"))),\n        React.createElement(ui_1.PlayerHealthbar, { health: health })));\n};\nexports.Profile = Profile;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.RoundIndicator = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar RoundIndicator = function () {\n    var round = react_redux_1.useSelector(function (state) { return state.game.roundInfo.round; });\n    if (round === null) {\n        return null;\n    }\n    return React.createElement(\"div\", { className: \"round-indicator\" },\n        \"Round \",\n        React.createElement(\"span\", { className: \"highlight\" }, round));\n};\nexports.RoundIndicator = RoundIndicator;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.QuitGameButton = exports.Settings = void 0;\nvar settings_1 = require(\"./settings\");\n__createBinding(exports, settings_1, \"Settings\");\nvar quitGameButton_1 = require(\"./quitGameButton\");\n__createBinding(exports, quitGameButton_1, \"QuitGameButton\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.QuitGameButton = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar QuitGameButton = function () {\n    var dispatch = react_redux_1.useDispatch();\n    var _a = __read(React.useState(false), 2), areYouSure = _a[0], setAreYouSure = _a[1];\n    var onClick = (areYouSure\n        ? function () {\n            dispatch(gamemode_1.PlayerActions.quitGamePlayerAction());\n        }\n        : function () {\n            setAreYouSure(true);\n        });\n    if (!areYouSure) {\n        return React.createElement(\"button\", { onClick: onClick, className: \"button\" }, \"Quit Game\");\n    }\n    return React.createElement(\"button\", { onClick: onClick, className: \"button\" }, \"Click again to quit\");\n};\nexports.QuitGameButton = QuitGameButton;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.Settings = void 0;\nvar React = __importStar(require(\"react\"));\nvar footer_1 = require(\"../../../display/footer\");\nvar quitGameButton_1 = require(\"./quitGameButton\");\nvar Settings = function () {\n    return (React.createElement(\"div\", { className: \"settings\" },\n        React.createElement(quitGameButton_1.QuitGameButton, null),\n        React.createElement(footer_1.Footer, null)));\n};\nexports.Settings = Settings;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.GamePage = void 0;\n// tslint:disable:jsx-ban-props\nvar React = __importStar(require(\"react\"));\nvar react_dnd_1 = require(\"react-dnd\");\nvar react_dnd_multi_backend_1 = __importDefault(require(\"react-dnd-multi-backend\"));\nvar HTML5toTouch_1 = __importDefault(require(\"react-dnd-multi-backend/dist/esm/HTML5toTouch\"));\nvar react_media_1 = __importDefault(require(\"react-media\"));\nvar module_1 = require(\"./module\");\nvar mobileGame_1 = require(\"./layouts/mobileGame\");\nvar desktopGame_1 = require(\"./layouts/desktopGame\");\nvar GamePage = function () {\n    return (React.createElement(react_dnd_1.DndProvider, { backend: react_dnd_multi_backend_1[\"default\"], options: HTML5toTouch_1[\"default\"] },\n        React.createElement(module_1.ResponsiveBoardStyles, null),\n        React.createElement(react_media_1[\"default\"], { query: \"(orientation: landscape) and (min-width: 1200px)\" },\n            React.createElement(desktopGame_1.DesktopGame, null)),\n        React.createElement(react_media_1[\"default\"], { query: \"(orientation: landscape) and (max-width: 1199px) and (min-width: 600px)\" },\n            React.createElement(mobileGame_1.MobileGame, null)),\n        React.createElement(react_media_1[\"default\"], { query: \"(orientation: portrait), (max-width: 599px)\" },\n            React.createElement(mobileGame_1.MobileGame, null))));\n};\nexports.GamePage = GamePage;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.preventAccidentalClose = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar preventAccidentalClose = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                // display an \"Are you sure you want to leave this page?\" dialog\n                window.onbeforeunload = function () { return \"Are you sure you want to leave this page? There is currently no way to rejoin a game\"; };\n                return [4 /*yield*/, effects_1.take(gamemode_1.PlayerActions.quitGamePlayerAction.toString())];\n            case 1:\n                _a.sent();\n                // just to allow the packets to send\n                setTimeout(function () {\n                    window.onbeforeunload = undefined;\n                    location.reload();\n                }, 100);\n                return [2 /*return*/];\n        }\n    });\n};\nexports.preventAccidentalClose = preventAccidentalClose;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.clientBattleSaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar models_1 = require(\"@creature-chess/models\");\nvar battle_1 = require(\"@creature-chess/battle\");\nvar match_1 = require(\"../../module/match\");\nvar sagaContext_1 = require(\"../../../store/sagaContext\");\nvar lib_1 = require(\"../../../../../gamemode/lib\");\nvar clientBattleSaga = function () {\n    var board;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(sagaContext_1.getPlayerSlices())];\n            case 1:\n                board = (_a.sent()).board;\n                return [4 /*yield*/, effects_1.fork(battle_1.battleSagaFactory(function (state) { var _a; return (_a = state.game.match) === null || _a === void 0 ? void 0 : _a.board; }), models_1.defaultGameOptions, board)];\n            case 2:\n                _a.sent();\n                return [4 /*yield*/, effects_1.takeLatest(battle_1.BattleEvents.BATTLE_TURN_EVENT, function (_a) {\n                        var newBoard = _a.payload.board;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0: return [4 /*yield*/, effects_1.put(match_1.setMatchBoard(newBoard))];\n                                case 1:\n                                    _b.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, effects_1.takeLatest(lib_1.GameEvents.gamePhaseStartedEvent.toString(), function (_a) {\n                        var phase = _a.payload.phase;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (!(phase === models_1.GamePhase.PLAYING)) return [3 /*break*/, 2];\n                                    return [4 /*yield*/, effects_1.put(battle_1.startBattle())];\n                                case 1:\n                                    _b.sent();\n                                    _b.label = 2;\n                                case 2:\n                                    if (!(phase === models_1.GamePhase.PREPARING)) return [3 /*break*/, 4];\n                                    return [4 /*yield*/, effects_1.put(match_1.setMatchBoard(null))];\n                                case 3:\n                                    _b.sent();\n                                    _b.label = 4;\n                                case 4: return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 4:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.clientBattleSaga = clientBattleSaga;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.uiSaga = exports.clientBattleSaga = exports.roundUpdateSaga = void 0;\nvar roundUpdate_1 = require(\"./roundUpdate\");\n__createBinding(exports, roundUpdate_1, \"roundUpdateSaga\");\nvar battle_1 = require(\"./battle\");\n__createBinding(exports, battle_1, \"clientBattleSaga\");\nvar ui_1 = require(\"./ui\");\n__createBinding(exports, ui_1, \"uiSaga\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.roundUpdateSaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar models_1 = require(\"@creature-chess/models\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar sagaContext_1 = require(\"../../../store/sagaContext\");\nvar roundUpdateSaga = function () {\n    var board;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(sagaContext_1.getPlayerSlices())];\n            case 1:\n                board = (_a.sent()).board;\n                return [4 /*yield*/, effects_1.takeLatest(gamemode_1.GameEvents.gamePhaseStartedEvent.toString(), function (_a) {\n                        var update, _b;\n                        var packet = _a.payload;\n                        return __generator(this, function (_c) {\n                            switch (_c.label) {\n                                case 0:\n                                    update = __assign({ phase: packet.phase, startedAt: packet.startedAt }, (packet.phase === models_1.GamePhase.PREPARING ? { round: packet.round } : undefined));\n                                    return [4 /*yield*/, effects_1.put(gamemode_1.RoundInfoCommands.setRoundInfoCommand(update))];\n                                case 1:\n                                    _c.sent();\n                                    _b = packet.phase;\n                                    switch (_b) {\n                                        case models_1.GamePhase.PREPARING: return [3 /*break*/, 2];\n                                        case models_1.GamePhase.READY: return [3 /*break*/, 5];\n                                    }\n                                    return [3 /*break*/, 7];\n                                case 2: return [4 /*yield*/, effects_1.put(gamemode_1.PlayerCommands.updateOpponentCommand(null))];\n                                case 3:\n                                    _c.sent();\n                                    return [4 /*yield*/, effects_1.put(board.commands.unlockBoardCommand())];\n                                case 4:\n                                    _c.sent();\n                                    return [2 /*return*/];\n                                case 5: return [4 /*yield*/, effects_1.put(board.commands.lockBoardCommand())];\n                                case 6:\n                                    _c.sent();\n                                    return [2 /*return*/];\n                                case 7: return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.roundUpdateSaga = roundUpdateSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.uiSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar models_1 = require(\"@creature-chess/models\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar ui_1 = require(\"../../ui\");\nvar playerList_1 = require(\"../../module/playerList\");\nvar uiSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.takeLatest(gamemode_1.GameEvents.gamePhaseStartedEvent.toString(), function (_a) {\n                        var _b, isDead;\n                        var phase = _a.payload.phase;\n                        return __generator(this, function (_c) {\n                            switch (_c.label) {\n                                case 0:\n                                    _b = phase;\n                                    switch (_b) {\n                                        case models_1.GamePhase.PREPARING: return [3 /*break*/, 1];\n                                        case models_1.GamePhase.READY: return [3 /*break*/, 4];\n                                    }\n                                    return [3 /*break*/, 7];\n                                case 1: return [4 /*yield*/, effects_1.select(function (state) { return state.game.playerInfo.health === 0; })];\n                                case 2:\n                                    isDead = _c.sent();\n                                    if (!!isDead) return [3 /*break*/, 4];\n                                    return [4 /*yield*/, effects_1.put(ui_1.openOverlay(ui_1.Overlay.SHOP))];\n                                case 3:\n                                    _c.sent();\n                                    return [2 /*return*/];\n                                case 4: return [4 /*yield*/, effects_1.put(ui_1.closeOverlay())];\n                                case 5:\n                                    _c.sent();\n                                    return [4 /*yield*/, effects_1.put(ui_1.clearSelectedPiece())];\n                                case 6:\n                                    _c.sent();\n                                    return [2 /*return*/];\n                                case 7: return [2 /*return*/];\n                            }\n                        });\n                    }),\n                    // todo get rid of this event and just sync the command\n                    effects_1.takeLatest(gamemode_1.GameEvents.playerListChangedEvent.toString(), function (_a) {\n                        var players = _a.payload.players;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0: return [4 /*yield*/, effects_1.put(playerList_1.PlayerListCommands.updatePlayerListCommand(players))];\n                                case 1:\n                                    _b.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.uiSaga = uiSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.gameSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar actions_1 = require(\"../../networking/actions\");\nvar module_1 = require(\"../module\");\nvar preventAccidentalClose_1 = require(\"./actions/preventAccidentalClose\");\nvar sagas_1 = require(\"../module/chat/sagas\");\nvar lobby_1 = require(\"../../lobby\");\nvar events_1 = require(\"./events\");\nvar gameSaga = function () {\n    var action;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.take([actions_1.gameConnectedEvent.toString(), lobby_1.LobbyEvents.LOBBY_GAME_STARTED_EVENT])];\n            case 1:\n                action = _a.sent();\n                return [4 /*yield*/, effects_1.all([\n                        effects_1.call(preventAccidentalClose_1.preventAccidentalClose),\n                        effects_1.call(module_1.closeShopOnFirstBuySaga),\n                        effects_1.call(module_1.clickTileSaga),\n                        effects_1.call(module_1.clickPieceSaga),\n                        effects_1.call(events_1.roundUpdateSaga),\n                        effects_1.call(events_1.clientBattleSaga),\n                        effects_1.call(events_1.uiSaga),\n                        effects_1.call(sagas_1.handleQuickChat),\n                        effects_1.call(function () {\n                            var _a, players, _b, phase, phaseStartedAtSeconds, update;\n                            return __generator(this, function (_c) {\n                                switch (_c.label) {\n                                    case 0:\n                                        if (!(action && action.payload)) return [3 /*break*/, 3];\n                                        _a = action.payload, players = _a.players, _b = _a.game, phase = _b.phase, phaseStartedAtSeconds = _b.phaseStartedAtSeconds;\n                                        return [4 /*yield*/, effects_1.put(module_1.PlayerListCommands.updatePlayerListCommand(players))];\n                                    case 1:\n                                        _c.sent();\n                                        update = { phase: phase, startedAt: phaseStartedAtSeconds };\n                                        return [4 /*yield*/, effects_1.put(gamemode_1.RoundInfoCommands.setRoundInfoCommand(update))];\n                                    case 2:\n                                        _c.sent();\n                                        _c.label = 3;\n                                    case 3: return [2 /*return*/];\n                                }\n                            });\n                        })\n                    ])];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.gameSaga = gameSaga;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.createGameReducer = void 0;\nvar redux_1 = require(\"redux\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar module_1 = require(\"./module\");\nvar ui_1 = require(\"./ui\");\nvar match_1 = require(\"./module/match\");\nvar createGameReducer = function (_a) {\n    var boardSlice = _a.boardSlice, benchSlice = _a.benchSlice;\n    return redux_1.combineReducers(__assign(__assign({}, gamemode_1.playerReducers), { roundInfo: gamemode_1.roundInfoReducer, board: boardSlice.boardReducer, bench: benchSlice.boardReducer, match: match_1.matchReducer, playerList: module_1.playerListReducer, playerInfo: gamemode_1.playerInfoReducer, ui: ui_1.uiReducer, quickChat: module_1.quickChatReducer }));\n};\nexports.createGameReducer = createGameReducer;\n","\"use strict\";\nexports.__esModule = true;\nexports.updateConnectionStatus = exports.closeOverlay = exports.openOverlay = exports.clearSelectedPiece = exports.selectPiece = exports.CLEAR_SELECTED_PIECE = exports.SELECT_PIECE = exports.setWinnerIdCommand = exports.setInGameCommand = exports.UPDATE_CONNECTION_STATUS = exports.CLOSE_OVERLAY = exports.OPEN_OVERLAY = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nexports.OPEN_OVERLAY = \"OPEN_OVERLAY\";\nexports.CLOSE_OVERLAY = \"CLOSE_OVERLAY\";\nexports.UPDATE_CONNECTION_STATUS = \"UPDATE_CONNECTION_STATUS\";\nexports.setInGameCommand = toolkit_1.createAction(\"setInGameCommand\");\nexports.setWinnerIdCommand = toolkit_1.createAction(\"setWinnerIdCommand\");\nexports.SELECT_PIECE = \"SELECT_PIECE\";\nexports.CLEAR_SELECTED_PIECE = \"CLEAR_SELECTED_PIECE\";\nvar selectPiece = function (id) { return ({\n    type: exports.SELECT_PIECE,\n    payload: {\n        id: id\n    }\n}); };\nexports.selectPiece = selectPiece;\nvar clearSelectedPiece = function () { return ({ type: exports.CLEAR_SELECTED_PIECE }); };\nexports.clearSelectedPiece = clearSelectedPiece;\nvar openOverlay = function (overlay) { return ({\n    type: exports.OPEN_OVERLAY,\n    payload: {\n        overlay: overlay\n    }\n}); };\nexports.openOverlay = openOverlay;\nvar closeOverlay = function () { return ({ type: exports.CLOSE_OVERLAY }); };\nexports.closeOverlay = closeOverlay;\nvar updateConnectionStatus = function (status) { return ({\n    type: exports.UPDATE_CONNECTION_STATUS,\n    payload: {\n        status: status\n    }\n}); };\nexports.updateConnectionStatus = updateConnectionStatus;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.UIActions = exports.Overlay = exports.clearSelectedPiece = exports.closeOverlay = exports.openOverlay = exports.uiReducer = void 0;\nvar reducer_1 = require(\"./reducer\");\n__createBinding(exports, reducer_1, \"reducer\", \"uiReducer\");\nvar actions_1 = require(\"./actions\");\n__createBinding(exports, actions_1, \"openOverlay\");\n__createBinding(exports, actions_1, \"closeOverlay\");\n__createBinding(exports, actions_1, \"clearSelectedPiece\");\nvar overlay_1 = require(\"./overlay\");\n__createBinding(exports, overlay_1, \"Overlay\");\nexports.UIActions = __importStar(require(\"./actions\"));\n","\"use strict\";\nexports.__esModule = true;\nexports.Overlay = void 0;\nvar Overlay;\n(function (Overlay) {\n    Overlay[Overlay[\"PLAYERS\"] = 0] = \"PLAYERS\";\n    Overlay[Overlay[\"SHOP\"] = 1] = \"SHOP\";\n    Overlay[Overlay[\"HELP\"] = 2] = \"HELP\";\n    Overlay[Overlay[\"SETTINGS\"] = 3] = \"SETTINGS\";\n})(Overlay = exports.Overlay || (exports.Overlay = {}));\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.reducer = void 0;\nvar actions_1 = require(\"./actions\");\nvar connection_status_1 = require(\"../connection-status\");\nvar initialState = {\n    inGame: false,\n    currentOverlay: null,\n    selectedPieceId: null,\n    winnerId: null,\n    connectionStatus: connection_status_1.ConnectionStatus.NOT_CONNECTED\n};\nvar reducer = function (state, action) {\n    if (state === void 0) { state = initialState; }\n    switch (action.type) {\n        case actions_1.UPDATE_CONNECTION_STATUS:\n            return __assign(__assign({}, state), { connectionStatus: action.payload.status });\n        case actions_1.OPEN_OVERLAY: {\n            return __assign(__assign({}, state), { currentOverlay: action.payload.overlay });\n        }\n        case actions_1.CLOSE_OVERLAY: {\n            return __assign(__assign({}, state), { currentOverlay: null });\n        }\n        case actions_1.SELECT_PIECE: {\n            var isSamePiece = state.selectedPieceId && state.selectedPieceId === action.payload.id;\n            return __assign(__assign({}, state), { selectedPieceId: isSamePiece ? null : action.payload.id });\n        }\n        case actions_1.CLEAR_SELECTED_PIECE: {\n            return __assign(__assign({}, state), { selectedPieceId: null });\n        }\n        case \"setWinnerIdCommand\": {\n            return __assign(__assign({}, state), { winnerId: action.payload.winnerId });\n        }\n        case \"setInGameCommand\": {\n            return __assign(__assign({}, state), { inGame: true });\n        }\n        default:\n            return state;\n    }\n};\nexports.reducer = reducer;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nvar React = __importStar(require(\"react\"));\nvar ReactDOM = __importStar(require(\"react-dom\"));\nvar react_redux_1 = require(\"react-redux\");\nvar react_router_dom_1 = require(\"react-router-dom\");\nvar auth0_react_1 = require(\"@auth0/auth0-react\");\nvar Sentry = __importStar(require(\"@sentry/react\"));\nvar tracing_1 = require(\"@sentry/tracing\");\nrequire(\"pepjs\");\nrequire(\"./display/style/index.scss\");\nrequire(\"@shoki/board-react/style.css\");\nvar store_1 = require(\"./store/store\");\nvar app_1 = require(\"./app\");\nvar config_1 = require(\"./auth/config\");\nif (process.env.SENTRY_DSN) {\n    Sentry.init({\n        dsn: process.env.SENTRY_DSN,\n        environment: process.env.NODE_ENV === \"development\" ? \"development\" : \"production\",\n        integrations: [new tracing_1.Integrations.BrowserTracing()],\n        // Set tracesSampleRate to 1.0 to capture 100%\n        // of transactions for performance monitoring.\n        // We recommend adjusting this value in production\n        tracesSampleRate: 1.0,\n    });\n}\nvar BrowserRouterChild = function () {\n    var history = react_router_dom_1.useHistory();\n    var onRedirectCallback = function (appState) {\n        // Use the router's history module to replace the url\n        history.replace((appState === null || appState === void 0 ? void 0 : appState.returnTo) || window.location.pathname);\n    };\n    return (React.createElement(auth0_react_1.Auth0Provider, { domain: config_1.auth0Config.domain, clientId: config_1.auth0Config.clientID, redirectUri: config_1.auth0Config.redirectUri, audience: config_1.auth0Config.audience, scope: config_1.auth0Config.scope, onRedirectCallback: onRedirectCallback },\n        React.createElement(Auth0ProviderChild, null)));\n};\nvar Auth0ProviderChild = function () {\n    // https://github.com/auth0/auth0-react/pull/134#issuecomment-717834548\n    var _a = auth0_react_1.useAuth0(), getAccessTokenSilently = _a.getAccessTokenSilently, loginWithRedirect = _a.loginWithRedirect;\n    var store = store_1.createAppStore(getAccessTokenSilently, loginWithRedirect);\n    return (React.createElement(react_redux_1.Provider, { store: store },\n        React.createElement(app_1.App, null)));\n};\nReactDOM.render(React.createElement(react_router_dom_1.BrowserRouter, null,\n    React.createElement(BrowserRouterChild, null)), document.getElementById(\"approot\"));\n","\"use strict\";\nexports.__esModule = true;\nexports.lobbyGameStartedEvent = exports.LOBBY_GAME_STARTED_EVENT = void 0;\nexports.LOBBY_GAME_STARTED_EVENT = \"LOBBY_GAME_STARTED_EVENT\";\nvar lobbyGameStartedEvent = function () { return ({ type: exports.LOBBY_GAME_STARTED_EVENT }); };\nexports.lobbyGameStartedEvent = lobbyGameStartedEvent;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.LobbyPage = exports.LobbyEvents = exports.LobbyCommands = exports.lobbyReducer = void 0;\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"reducer\", \"lobbyReducer\");\n__createBinding(exports, state_1, \"LobbyCommands\");\nexports.LobbyEvents = __importStar(require(\"./events\"));\nvar lobbyPage_1 = require(\"./lobbyPage\");\n__createBinding(exports, lobbyPage_1, \"LobbyPage\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.LobbyPage = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar models_1 = require(\"@creature-chess/models\");\nvar ui_1 = require(\"@creature-chess/ui\");\nvar countdown_1 = require(\"../display/countdown\");\nvar footer_1 = require(\"../display/footer\");\nvar padNumberToTwo = function (val) { return val < 10 ? \"0\" + val : val.toString(); };\nvar countdownRender = function (totalSecondsRemaining) {\n    var minutesRemaining = Math.floor(totalSecondsRemaining / 60);\n    var secondsRemaining = Math.ceil(totalSecondsRemaining % 60);\n    var time = minutesRemaining + \":\" + padNumberToTwo(secondsRemaining);\n    return (React.createElement(\"div\", { className: \"timeRemaining\" },\n        \"Game starting in \",\n        React.createElement(\"span\", { className: \"time\" }, time)));\n};\nvar LobbyPage = function () {\n    var lobbyId = react_redux_1.useSelector(function (state) { return state.lobby.lobbyId; });\n    var players = react_redux_1.useSelector(function (state) { return state.lobby.players; });\n    var lobbyStartingAtMs = react_redux_1.useSelector(function (state) { return state.lobby.startingAtMs; });\n    if (lobbyId === null) {\n        return React.createElement(\"div\", null, \"An error occured, please refresh your page\");\n    }\n    var botElements = [];\n    for (var i = players.length; i < models_1.MAX_PLAYERS_IN_GAME; i++) {\n        botElements.push(React.createElement(\"div\", { key: i, className: \"player bot\" },\n            React.createElement(\"span\", { className: \"name\" }, \"empty slot\")));\n    }\n    return (React.createElement(\"div\", { className: \"lobby\" },\n        React.createElement(\"div\", { className: \"lobby-info\" },\n            lobbyStartingAtMs\n                && (React.createElement(countdown_1.Countdown, { countdownToSeconds: lobbyStartingAtMs / 1000, render: countdownRender })),\n            React.createElement(\"h2\", { className: \"lobby-id\" },\n                \"Lobby ID: \",\n                lobbyId),\n            React.createElement(\"p\", null,\n                React.createElement(\"strong\", null, \"tip:\"),\n                \" you can always sell your pieces back for their costs. Don't be afraid to change your team!\"),\n            React.createElement(\"p\", null,\n                React.createElement(\"strong\", null, \"tip:\"),\n                \" building a balanced team is key to winning. Check out the help page to see type advantages!\"),\n            React.createElement(\"div\", { className: \"players\" },\n                players.map(function (p) {\n                    var _a;\n                    return (React.createElement(\"div\", { key: p.id, className: \"player\" },\n                        React.createElement(\"span\", { className: \"name\" }, p.name),\n                        React.createElement(ui_1.Title, { titleId: (_a = p.profile) === null || _a === void 0 ? void 0 : _a.title })));\n                }),\n                botElements),\n            React.createElement(\"p\", null,\n                \"The game will start \",\n                models_1.LOBBY_WAIT_TIME,\n                \" seconds after the lobby is created, or immediately when there are \",\n                models_1.MAX_PLAYERS_IN_GAME,\n                \" players\")),\n        React.createElement(footer_1.Footer, null)));\n};\nexports.LobbyPage = LobbyPage;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar _a;\nexports.__esModule = true;\nexports.LobbyCommands = exports.reducer = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = {\n    lobbyId: null,\n    players: [],\n    startingAtMs: null\n};\nexports.reducer = (_a = toolkit_1.createSlice({\n    name: \"lobby\",\n    initialState: initialState,\n    reducers: {\n        setLobbyDetailsCommand: function (state, action) { return (__assign(__assign({}, state), { lobbyId: action.payload.lobbyId, players: action.payload.players, startingAtMs: action.payload.startTimestamp })); },\n        updateLobbyPlayerCommand: function (state, action) {\n            var cloned = __assign(__assign({}, state), { players: __spreadArray([], __read(state.players)) });\n            cloned.players[action.payload.index] = action.payload.player;\n            return cloned;\n        }\n    }\n}), _a.reducer), exports.LobbyCommands = _a.actions;\n","\"use strict\";\nexports.__esModule = true;\nexports.findGameAction = exports.FIND_GAME = void 0;\nexports.FIND_GAME = \"FIND_GAME\";\nvar findGameAction = function (serverIP) { return ({\n    type: exports.FIND_GAME,\n    payload: { serverIP: serverIP }\n}); };\nexports.findGameAction = findGameAction;\n","\"use strict\";\nexports.__esModule = true;\nexports.getUrlParameter = void 0;\n// this doesn't handle boolean parameters e.g. foo.com?bool\n// getUrlParameter(\"bool\") and getUrlParameter(\"nonexistent\") both return \"\"\nvar getUrlParameter = function (name) {\n    var sanitizedName = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + sanitizedName + \"=([^&#]*)\");\n    var results = regex.exec(window.location.search);\n    if (results === null) {\n        return \"\";\n    }\n    return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n};\nexports.getUrlParameter = getUrlParameter;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.menuReducer = exports.MenuActions = exports.MenuPage = void 0;\nvar menuPage_1 = require(\"./menuPage\");\n__createBinding(exports, menuPage_1, \"MenuPage\");\nexports.MenuActions = __importStar(require(\"./actions\"));\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"reducer\", \"menuReducer\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.Leaderboard = void 0;\nvar React = __importStar(require(\"react\"));\nvar use_http_1 = __importDefault(require(\"use-http\"));\nvar config_1 = require(\"../auth/config\");\nvar LeaderboardContents = function (_a) {\n    var data = _a.data;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"table\", { className: \"leaderboard\" },\n            React.createElement(\"thead\", null,\n                React.createElement(\"tr\", null,\n                    React.createElement(\"td\", null, \"Player\"),\n                    React.createElement(\"td\", null, \"Wins\"))),\n            React.createElement(\"tbody\", null, data.map(function (_a, index) {\n                var wins = _a.wins, name = _a.name;\n                return (React.createElement(\"tr\", { key: index + \"-\" + name },\n                    React.createElement(\"td\", null, name),\n                    React.createElement(\"td\", null, wins)));\n            }))),\n        React.createElement(\"div\", { className: \"wipe-warning\" },\n            React.createElement(\"p\", null, \"Thanks so much for playing! I hope you're enjoying the game\"),\n            React.createElement(\"p\", null, \"Please don't get too attached to these scores for now\"),\n            React.createElement(\"p\", null, \"The user accounts will be wiped during development\"))));\n};\nvar Leaderboard = function () {\n    var _a = use_http_1[\"default\"](config_1.LEADERBOARD_ENDPOINT, {}, []), loading = _a.loading, error = _a.error, _b = _a.data, data = _b === void 0 ? [] : _b;\n    return (React.createElement(\"div\", { className: \"segment\" },\n        React.createElement(\"div\", { className: \"header\" }, \"Leaderboard\"),\n        React.createElement(\"div\", { className: \"content\" },\n            loading\n                && React.createElement(\"span\", null, \"Loading\"),\n            !loading\n                && React.createElement(LeaderboardContents, { data: data }))));\n};\nexports.Leaderboard = Leaderboard;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nexports.__esModule = true;\nexports.MenuPage = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_redux_1 = require(\"react-redux\");\nvar auth0_react_1 = require(\"@auth0/auth0-react\");\nvar config_1 = require(\"../auth/config\");\nvar get_url_parameter_1 = require(\"./get-url-parameter\");\nvar leaderboard_1 = require(\"./leaderboard\");\nvar actions_1 = require(\"./actions\");\nvar state_1 = require(\"./state\");\nvar display_1 = require(\"../display\");\nvar Navbar = function () {\n    var logout = auth0_react_1.useAuth0().logout;\n    var onLogoutClick = function () { return logout(); };\n    return (React.createElement(\"nav\", { className: \"navbar\" },\n        React.createElement(\"button\", { className: \"sign-out\", onClick: onLogoutClick }, \"Log Out\")));\n};\nvar MenuPageUnconnected = /** @class */ (function (_super) {\n    __extends(MenuPageUnconnected, _super);\n    function MenuPageUnconnected() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onFindGameClick = function () {\n            var serverIP = get_url_parameter_1.getUrlParameter(\"server\") || config_1.GAME_SERVER_URL;\n            _this.props.onFindGame(serverIP);\n        };\n        return _this;\n    }\n    MenuPageUnconnected.prototype.render = function () {\n        if (this.props.loading) {\n            return React.createElement(display_1.Loading, null);\n        }\n        return (React.createElement(\"div\", { className: \"menu\" },\n            React.createElement(Navbar, null),\n            React.createElement(\"div\", { className: \"join-game\" },\n                React.createElement(\"h2\", { className: \"title\" }, \"Creature Chess\"),\n                React.createElement(\"div\", { className: \"blurb\" },\n                    React.createElement(\"p\", null, \"More fun with friends! Press \\\"Find Game\\\" at the same time to play together\"),\n                    React.createElement(\"p\", null, \"Up to 8 players!\")),\n                React.createElement(\"button\", { onClick: this.onFindGameClick, className: \"find-game\" }, \"Find Game\"),\n                React.createElement(\"div\", { className: \"blurb\" },\n                    React.createElement(\"p\", null, \"Join us on Discord to receive notifications when someone starts a lobby, and more!\")),\n                React.createElement(\"a\", { href: \"https://discord.gg/FhMm6saehb\" },\n                    React.createElement(\"img\", { src: \"https://i.imgur.com/OBo2QRd.png\", className: \"discord-button\" })),\n                React.createElement(\"div\", { className: \"blurb\" },\n                    React.createElement(\"p\", null,\n                        \"This is a \",\n                        React.createElement(\"span\", { className: \"highlight\" }, \"multiplayer strategy game\"),\n                        \" in which you configure creatures on a board.\"),\n                    React.createElement(\"p\", null, \"Each round, your board is matched against an opponent's board. Defeat all their pieces to win the round.\"),\n                    React.createElement(\"p\", null, \"Every loss decreases your health bar. When your health reaches zero, you're out!\"),\n                    React.createElement(\"p\", null, \"Players will battle against eachother until only one player remains.\"),\n                    React.createElement(\"p\", null,\n                        \"Good luck! \",\n                        React.createElement(\"span\", { className: \"highlight\" }, \"~ jkm\"))),\n                this.props.error\n                    && React.createElement(\"div\", { className: \"error\" },\n                        React.createElement(\"p\", null, this.props.error))),\n            React.createElement(leaderboard_1.Leaderboard, null),\n            React.createElement(display_1.Footer, null)));\n    };\n    return MenuPageUnconnected;\n}(React.Component));\nvar mapStateToProps = function (state) { return ({\n    loading: state.menu.loading,\n    error: state.menu.error\n}); };\nvar mapDispatchToProps = function (dispatch) { return ({\n    onFindGame: function (serverIP) {\n        dispatch(state_1.startLoading());\n        dispatch(actions_1.findGameAction(serverIP));\n    },\n    setError: function (error) { return dispatch(state_1.finishLoading(error)); }\n}); };\nvar MenuPage = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(MenuPageUnconnected);\nexports.MenuPage = MenuPage;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a, _b;\nexports.__esModule = true;\nexports.finishLoading = exports.startLoading = exports.reducer = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = {\n    loading: false,\n    error: null\n};\nexports.reducer = (_a = toolkit_1.createSlice({\n    name: \"menu\",\n    initialState: initialState,\n    reducers: {\n        startLoading: function (state) { return (__assign(__assign({}, state), { loading: true })); },\n        finishLoading: function (state, _a) {\n            var _b = _a.payload, error = _b === void 0 ? null : _b;\n            return (__assign(__assign({}, state), { loading: false, error: error }));\n        }\n    }\n}), _a.reducer), exports.startLoading = (_b = _a.actions, _b.startLoading), exports.finishLoading = _b.finishLoading;\n","\"use strict\";\nexports.__esModule = true;\nexports.gameConnectedEvent = exports.lobbyConnectedEvent = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nexports.lobbyConnectedEvent = toolkit_1.createAction(\"lobbyConnectedEvent\");\nexports.gameConnectedEvent = toolkit_1.createAction(\"gameConnectedEvent\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.findGame = void 0;\nvar findGame_1 = require(\"./sagas/findGame\");\n__createBinding(exports, findGame_1, \"findGame\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.findGame = void 0;\nvar redux_saga_1 = require(\"redux-saga\");\nvar effects_1 = require(\"redux-saga/effects\");\nvar lobby_1 = require(\"../../lobby\");\nvar menu_1 = require(\"../../menu\");\nvar socket_1 = require(\"../socket\");\nvar actions_1 = require(\"../actions\");\nvar networkingSaga_1 = require(\"./networkingSaga\");\nvar effects_2 = require(\"redux-saga/effects\");\nvar sagaContext_1 = require(\"../../store/sagaContext\");\nvar findGame = function () {\n    var _a, getAccessTokenSilently, loginWithRedirect, findGameAction, idToken, socket, error_1, channel, _b, lobby, game;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0: return [5 /*yield**/, __values(sagaContext_1.getAuth())];\n            case 1:\n                _a = _c.sent(), getAccessTokenSilently = _a.getAccessTokenSilently, loginWithRedirect = _a.loginWithRedirect;\n                return [4 /*yield*/, effects_1.take(menu_1.MenuActions.FIND_GAME)];\n            case 2:\n                findGameAction = _c.sent();\n                return [4 /*yield*/, effects_1.call(getAccessTokenSilently)];\n            case 3:\n                idToken = _c.sent();\n                socket = null;\n                _c.label = 4;\n            case 4:\n                _c.trys.push([4, 6, , 7]);\n                return [4 /*yield*/, effects_1.call(socket_1.getSocket, findGameAction.payload.serverIP, idToken)];\n            case 5:\n                socket = _c.sent();\n                return [3 /*break*/, 7];\n            case 6:\n                error_1 = _c.sent();\n                loginWithRedirect();\n                return [2 /*return*/];\n            case 7:\n                channel = redux_saga_1.eventChannel(function (emit) {\n                    // todo !!! USE REGISTRY HERE\n                    var lobbyOpcode = \"connected\";\n                    socket.on(lobbyOpcode, function (payload) {\n                        emit(actions_1.lobbyConnectedEvent(payload));\n                    });\n                    var gameOpcode = \"gameConnected\";\n                    socket.on(gameOpcode, function (payload) {\n                        emit(actions_1.gameConnectedEvent(payload));\n                    });\n                    // todo registry.off\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\n                    return function () { };\n                });\n                return [4 /*yield*/, effects_1.takeEvery(channel, function (action) {\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, effects_1.put(action)];\n                                case 1:\n                                    _a.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 8:\n                _c.sent();\n                return [4 /*yield*/, effects_1.race({\n                        lobby: effects_1.take(actions_1.lobbyConnectedEvent.toString()),\n                        game: effects_1.take(actions_1.gameConnectedEvent.toString())\n                    })];\n            case 9:\n                _b = _c.sent(), lobby = _b.lobby, game = _b.game;\n                channel.close();\n                return [4 /*yield*/, effects_2.all([\n                        effects_1.call(networkingSaga_1.networkingSaga, socket),\n                        effects_1.call(function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        if (!lobby) return [3 /*break*/, 3];\n                                        return [4 /*yield*/, effects_1.put(lobby_1.LobbyCommands.setLobbyDetailsCommand(lobby.payload))];\n                                    case 1:\n                                        _a.sent();\n                                        return [4 /*yield*/, effects_1.put(lobby)];\n                                    case 2:\n                                        _a.sent();\n                                        return [3 /*break*/, 5];\n                                    case 3:\n                                        if (!game) return [3 /*break*/, 5];\n                                        return [4 /*yield*/, effects_1.put(game)];\n                                    case 4:\n                                        _a.sent();\n                                        _a.label = 5;\n                                    case 5: return [2 /*return*/];\n                                }\n                            });\n                        })\n                    ])];\n            case 10:\n                _c.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.findGame = findGame;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.incomingGameServerToClient = void 0;\nvar redux_saga_1 = require(\"redux-saga\");\nvar effects_1 = require(\"redux-saga/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar networking_1 = require(\"@creature-chess/networking\");\nvar networking_2 = require(\"@shoki/networking\");\nvar battle_1 = require(\"@creature-chess/battle\");\nvar actions_1 = require(\"../../../game/ui/actions\");\nvar connection_status_1 = require(\"../../../game/connection-status\");\nvar match_1 = require(\"../../../game/module/match\");\nvar sagaContext_1 = require(\"../../../store/sagaContext\");\nvar readPacketsToActions = function (registry, socket, boardSlice, benchSlice) {\n    var channel;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                channel = redux_saga_1.eventChannel(function (emit) {\n                    socket.on(\"reconnect_failed\", function () {\n                        emit(actions_1.updateConnectionStatus(connection_status_1.ConnectionStatus.DISCONNECTED));\n                    });\n                    socket.on(\"reconnect_error\", function () {\n                        emit(actions_1.updateConnectionStatus(connection_status_1.ConnectionStatus.DISCONNECTED));\n                    });\n                    registry.on(\"matchBoardUpdate\", function (_a) {\n                        var board = _a.board, turn = _a.turn;\n                        emit(match_1.setMatchBoard(board));\n                        if (turn) {\n                            emit(battle_1.startBattle(turn));\n                        }\n                    });\n                    registry.on(\"boardUpdate\", function (newValue) {\n                        emit(boardSlice.commands.setBoardPiecesCommand(newValue));\n                    });\n                    registry.on(\"benchUpdate\", function (newValue) {\n                        emit(benchSlice.commands.setBoardPiecesCommand(newValue));\n                    });\n                    // todo registry off here\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\n                    return function () { };\n                });\n                return [4 /*yield*/, effects_1.takeEvery(channel, function (action) {\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, effects_1.put(action)];\n                                case 1:\n                                    _a.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nvar incomingGameServerToClient = function (socket) {\n    var _a, board, bench, registry;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [5 /*yield**/, __values(sagaContext_1.getPlayerSlices())];\n            case 1:\n                _a = _b.sent(), board = _a.board, bench = _a.bench;\n                registry = networking_1.GameServerToClient.incoming(function (opcode, handler) { return socket.on(opcode, handler); }, function (opcode, handler) { return socket.off(opcode, handler); });\n                return [4 /*yield*/, effects_1.all([\n                        effects_1.call(readPacketsToActions, registry, socket, board, bench),\n                        effects_1.call(networking_2.ActionStream.incomingSaga(registry, \"sendGameEvents\", gamemode_1.GameEvents.GameEventActionTypesArray)),\n                        effects_1.call(networking_2.ActionStream.incomingSaga(registry, \"sendLocalPlayerEvents\", gamemode_1.PlayerEvents.PlayerEventActionTypesArray)),\n                        effects_1.call(networking_2.ActionStream.incomingSaga(registry, \"playerInfoUpdates\", gamemode_1.PlayerCommands.PlayerInfoUpdateCommandActionTypesArray)),\n                    ])];\n            case 2:\n                _b.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.incomingGameServerToClient = incomingGameServerToClient;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.gameNetworking = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar incoming_1 = require(\"./incoming\");\nvar outgoing_1 = require(\"./outgoing\");\nvar actions_1 = require(\"../../../game/ui/actions\");\nvar actions_2 = require(\"../../actions\");\nvar lobby_1 = require(\"../../../lobby\");\nvar connection_status_1 = require(\"../../../game/connection-status\");\nvar gameNetworking = function (socket) {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.take([actions_2.gameConnectedEvent.toString(), lobby_1.LobbyEvents.LOBBY_GAME_STARTED_EVENT])];\n            case 1:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(actions_1.setInGameCommand())];\n            case 2:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(actions_1.updateConnectionStatus(connection_status_1.ConnectionStatus.CONNECTED))];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, effects_1.race([\n                        effects_1.all([\n                            effects_1.call(outgoing_1.outgoingGameServerToClient, socket),\n                            effects_1.call(incoming_1.incomingGameServerToClient, socket)\n                        ]),\n                        effects_1.call(function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, effects_1.take(gamemode_1.GameEvents.gameFinishEvent.toString())];\n                                    case 1:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        })\n                    ])];\n            case 4:\n                _a.sent();\n                socket.close();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.gameNetworking = gameNetworking;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.outgoingGameServerToClient = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar networking_1 = require(\"@shoki/networking\");\nvar networking_2 = require(\"@creature-chess/networking\");\nvar battle_1 = require(\"@creature-chess/battle\");\nvar gamemode_1 = require(\"@creature-chess/gamemode\");\nvar writeActionsToPackets = function (registry) {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.takeEvery(battle_1.BattleEvents.BATTLE_FINISH_EVENT, function () {\n                        return __generator(this, function (_a) {\n                            registry.send(\"finishMatch\", { empty: true });\n                            return [2 /*return*/];\n                        });\n                    }),\n                    effects_1.call(networking_1.ActionStream.outgoingSaga(registry, \"sendPlayerActions\", gamemode_1.PlayerActionTypesArray))\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nvar outgoingGameServerToClient = function (socket) {\n    var registry;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                registry = networking_2.ClientToServer.outgoing(function (opcode, payload, ack) { return socket.emit(opcode, payload, ack); });\n                return [4 /*yield*/, effects_1.call(writeActionsToPackets, registry)];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.outgoingGameServerToClient = outgoingGameServerToClient;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.lobbyNetworking = void 0;\nvar redux_saga_1 = require(\"redux-saga\");\nvar effects_1 = require(\"redux-saga/effects\");\nvar networking_1 = require(\"@creature-chess/networking\");\nvar actions_1 = require(\"../actions\");\nvar lobby_1 = require(\"../../lobby\");\nvar effects_2 = require(\"redux-saga/effects\");\nvar readPacketsToActions = function (registry) {\n    var channel, action;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, , 5, 7]);\n                channel = redux_saga_1.eventChannel(function (emit) {\n                    registry.on(\"lobbyPlayerUpdate\", function (_a) {\n                        var index = _a.index, player = _a.player;\n                        emit(lobby_1.LobbyCommands.updateLobbyPlayerCommand({ index: index, player: player }));\n                    });\n                    registry.on(\"gameStarted\", function () {\n                        emit(lobby_1.LobbyEvents.lobbyGameStartedEvent());\n                    });\n                    // tslint:disable-next-line:no-empty\n                    return function () {\n                        // todo registry.off or registry.close\n                    };\n                });\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 4];\n                return [4 /*yield*/, effects_1.take(channel)];\n            case 2:\n                action = _a.sent();\n                return [4 /*yield*/, effects_1.put(action)];\n            case 3:\n                _a.sent();\n                return [3 /*break*/, 1];\n            case 4: return [3 /*break*/, 7];\n            case 5: return [4 /*yield*/, effects_1.cancelled()];\n            case 6:\n                if (_a.sent()) {\n                    channel.close();\n                }\n                return [7 /*endfinally*/];\n            case 7: return [2 /*return*/];\n        }\n    });\n};\nvar lobbyNetworking = function (socket) {\n    var registry;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.take(actions_1.lobbyConnectedEvent.toString())];\n            case 1:\n                _a.sent();\n                registry = networking_1.LobbyServerToClient.incoming(function (opcode, handler) { return socket.on(opcode, handler); }, function (opcode, handler) { return socket.off(opcode, handler); });\n                return [4 /*yield*/, effects_2.race({\n                        never: effects_2.call(readPacketsToActions, registry),\n                        gameStarted: effects_1.take(lobby_1.LobbyEvents.LOBBY_GAME_STARTED_EVENT)\n                    })];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.lobbyNetworking = lobbyNetworking;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.networkingSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar lobby_1 = require(\"./lobby\");\nvar game_1 = require(\"./game\");\nvar networkingSaga = function (socket) {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(lobby_1.lobbyNetworking, socket),\n                    effects_1.call(game_1.gameNetworking, socket)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.networkingSaga = networkingSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.getSocket = void 0;\nvar socket_io_client_1 = require(\"socket.io-client\");\nvar getSocket = function (serverIP, idToken) {\n    // force to websocket for now until CORS is sorted\n    var socket = socket_io_client_1.io(serverIP, {\n        transports: [\"websocket\", \"xhr-polling\"],\n        reconnectionAttempts: 15,\n        reconnectionDelay: 100,\n        reconnectionDelayMax: 1000\n    });\n    return new Promise(function (resolve, reject) {\n        socket.on(\"connect\", function () {\n            socket.emit(\"authenticate\", { idToken: idToken });\n        });\n        var onAuthenticated = function (_a) {\n            var error = _a.error;\n            if (!error) {\n                socket.off(\"authenticate_response\", onAuthenticated);\n                resolve(socket);\n                return;\n            }\n            socket.disconnect();\n            // todo improve this\n            reject(error);\n        };\n        socket.on(\"authenticate_response\", onAuthenticated);\n    });\n};\nexports.getSocket = getSocket;\n","\"use strict\";\nexports.__esModule = true;\nexports.createReducers = void 0;\nvar lobby_1 = require(\"../lobby\");\nvar menu_1 = require(\"../menu\");\nvar game_1 = require(\"../game\");\nvar createReducers = function (slices) { return ({\n    lobby: lobby_1.lobbyReducer,\n    game: game_1.createGameReducer(slices),\n    menu: menu_1.menuReducer\n}); };\nexports.createReducers = createReducers;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.rootSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar networking_1 = require(\"../networking\");\nvar game_1 = require(\"../game\");\nvar rootSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(networking_1.findGame),\n                    effects_1.call(game_1.gameSaga)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.rootSaga = rootSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.getAuth = exports.getPlayerSlices = void 0;\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar getPlayerSlices = function () { return typed_redux_saga_1.getContext(\"slices\"); };\nexports.getPlayerSlices = getPlayerSlices;\nvar getAuth = function () { return typed_redux_saga_1.getContext(\"auth\"); };\nexports.getAuth = getAuth;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.createAppStore = void 0;\nvar redux_1 = require(\"redux\");\nvar redux_saga_1 = __importDefault(require(\"redux-saga\"));\nvar redux_devtools_extension_1 = require(\"redux-devtools-extension\");\nvar board_1 = require(\"@shoki/board\");\nvar reducers_1 = require(\"./reducers\");\nvar saga_1 = require(\"./saga\");\nvar composeEnhancers = redux_devtools_extension_1.composeWithDevTools({\n    trace: true,\n    traceLimit: 20\n});\nvar createAppStore = function (getAccessTokenSilently, loginWithRedirect) {\n    var boardSlice = board_1.createBoardSlice(\"local-board\", { width: 7, height: 3 });\n    var benchSlice = board_1.createBoardSlice(\"local-bench\", { width: 7, height: 1 });\n    var sagaMiddleware = redux_saga_1[\"default\"]({\n        context: {\n            slices: {\n                board: boardSlice,\n                bench: benchSlice\n            },\n            auth: {\n                getAccessTokenSilently: getAccessTokenSilently,\n                loginWithRedirect: loginWithRedirect\n            }\n        }\n    });\n    var store = redux_1.createStore(redux_1.combineReducers(reducers_1.createReducers({ boardSlice: boardSlice, benchSlice: benchSlice })), composeEnhancers(redux_1.applyMiddleware(sagaMiddleware)));\n    sagaMiddleware.run(saga_1.rootSaga);\n    return store;\n};\nexports.createAppStore = createAppStore;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.battleSagaFactory = exports.startBattle = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\n// no typings so this needs a standard require\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nvar present = require(\"present\");\nvar models_1 = require(\"@creature-chess/models\");\nvar turnSimulator_1 = require(\"./turnSimulator\");\nvar is_a_team_defeated_1 = require(\"./utils/is-a-team-defeated\");\nvar events_1 = require(\"./events\");\nvar START_BATTLE = \"START_BATTLE\";\nvar startBattle = function (turn) { return ({ type: START_BATTLE, payload: { turn: turn } }); };\nexports.startBattle = startBattle;\nvar duration = function (ms) {\n    var startTime = present();\n    return {\n        remaining: function () { return new Promise(function (resolve) {\n            var endTime = present();\n            var timePassed = endTime - startTime;\n            var remaining = Math.max(ms - timePassed, 0);\n            if (remaining === 0) {\n                resolve();\n                return;\n            }\n            setTimeout(function () { return resolve(); }, remaining);\n        }); }\n    };\n};\nvar addCombatState = function (pieces) { return Object.entries(pieces)\n    .reduce(function (acc, _a) {\n    var _b = __read(_a, 2), pieceId = _b[0], piece = _b[1];\n    acc[pieceId] = __assign(__assign({}, piece), { combat: models_1.createPieceCombatState() });\n    return acc;\n}, {}); };\nvar runBattle = function (initialBoard, boardSlice, startingTurn, options) {\n    var board, turnCount, shouldStop, turnTimer;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                board = {\n                    id: initialBoard.id,\n                    pieces: addCombatState(initialBoard.pieces),\n                    piecePositions: __assign({}, initialBoard.piecePositions),\n                    locked: initialBoard.locked,\n                    size: initialBoard.size,\n                    pieceLimit: null\n                };\n                turnCount = startingTurn;\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 7];\n                shouldStop = (turnCount >= options.turnCount\n                    || is_a_team_defeated_1.isATeamDefeated(board));\n                if (!shouldStop) return [3 /*break*/, 4];\n                return [4 /*yield*/, duration(1000).remaining()];\n            case 2:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(events_1.battleFinishEvent(turnCount))];\n            case 3:\n                _a.sent();\n                return [3 /*break*/, 7];\n            case 4:\n                turnTimer = duration(options.turnDuration);\n                board = turnSimulator_1.simulateTurn(++turnCount, board, boardSlice);\n                return [4 /*yield*/, effects_1.put(events_1.battleTurnEvent(turnCount, board))];\n            case 5:\n                _a.sent();\n                return [4 /*yield*/, turnTimer.remaining()];\n            case 6:\n                _a.sent();\n                return [3 /*break*/, 1];\n            case 7: return [2 /*return*/];\n        }\n    });\n};\nvar battleSagaFactory = function (boardSelector) { return function (gameOptions, boardSlice) {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeLatest(START_BATTLE, function (_a) {\n                    var board;\n                    var turn = _a.payload.turn;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0: return [4 /*yield*/, effects_1.select(boardSelector)];\n                            case 1:\n                                board = _b.sent();\n                                return [4 /*yield*/, effects_1.call(runBattle, board, boardSlice, turn || 0, gameOptions)];\n                            case 2:\n                                _b.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n}; };\nexports.battleSagaFactory = battleSagaFactory;\n","\"use strict\";\nexports.__esModule = true;\nexports.battleFinishEvent = exports.battleTurnEvent = exports.BATTLE_FINISH_EVENT = exports.BATTLE_TURN_EVENT = void 0;\nexports.BATTLE_TURN_EVENT = \"BATTLE_TURN_EVENT\";\nexports.BATTLE_FINISH_EVENT = \"BATTLE_FINISH_EVENT\";\nvar battleTurnEvent = function (turn, board) { return ({ type: exports.BATTLE_TURN_EVENT, payload: { turn: turn, board: board } }); };\nexports.battleTurnEvent = battleTurnEvent;\nvar battleFinishEvent = function (turns) { return ({ type: exports.BATTLE_FINISH_EVENT, payload: { turns: turns } }); };\nexports.battleFinishEvent = battleFinishEvent;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.startBattle = exports.battleSagaFactory = exports.BattleEvents = void 0;\nexports.BattleEvents = require(\"./events\");\nvar battleSaga_1 = require(\"./battleSaga\");\n__createBinding(exports, battleSaga_1, \"battleSagaFactory\");\n__createBinding(exports, battleSaga_1, \"startBattle\");\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.getNextPiecePosition = void 0;\n// no typings so this needs a standard require\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nvar _a = require(\"javascript-astar\"), astar = _a.astar, Graph = _a.Graph;\nvar getTargetAttackPositions_1 = require(\"./utils/getTargetAttackPositions\");\nvar createEmptyWeightGrid = function (_a) {\n    var width = _a.width, height = _a.height;\n    var grid = [];\n    // todo this is a weird way round\n    for (var x = 0; x < width; x++) {\n        var column = [];\n        for (var y = 0; y < height; y++) {\n            column.push(1);\n        }\n        grid.push(column);\n    }\n    return grid;\n};\nvar createWeightGrid = function (start, board) {\n    var grid = createEmptyWeightGrid(board.size);\n    Object.entries(board.piecePositions)\n        .forEach(function (_a) {\n        var _b = __read(_a, 2), position = _b[0], pieceId = _b[1];\n        var _c = __read(position.split(\",\").map(function (p) { return parseInt(p, 10); }), 2), x = _c[0], y = _c[1];\n        if (pieceId) {\n            grid[x][y] = 0;\n        }\n    });\n    grid[start.x][start.y] = 1;\n    return grid;\n};\nvar findPath = function (board, start, end) {\n    var weights = createWeightGrid(start, board);\n    var graph = new Graph(weights);\n    var startGraphItem = graph.grid[start.x][start.y];\n    var endGraphItem = graph.grid[end.x][end.y];\n    var path = astar.search(graph, startGraphItem, endGraphItem);\n    var firstPathNode = path[0];\n    if (!firstPathNode) {\n        return null;\n    }\n    var firstStep = firstPathNode;\n    return {\n        stepCount: path.length,\n        firstStep: firstStep\n    };\n};\nvar pathNotNull = function (path) { return path !== null; };\nvar getNextPiecePosition = function (attackerPosition, attackerStats, targetPosition, board) {\n    var attackRange = attackerStats.attackType.range;\n    var targetTiles = getTargetAttackPositions_1.getTargetAttackPositions(board, targetPosition, attackRange);\n    var paths = targetTiles.map(function (pos) { return findPath(board, attackerPosition, pos); }).filter(pathNotNull);\n    if (paths.length === 0) {\n        return null;\n    }\n    paths.sort(function (a, b) { return a.stepCount - b.stepCount; });\n    return paths[0].firstStep;\n};\nexports.getNextPiecePosition = getNextPiecePosition;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.simulateTurn = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nvar board_1 = require(\"@shoki/board\");\nvar get_type_attack_bonus_1 = require(\"./utils/get-type-attack-bonus\");\nvar inAttackRange_1 = require(\"./utils/inAttackRange\");\nvar findTargetId_1 = require(\"./utils/findTargetId\");\nvar pathfinding_1 = require(\"./pathfinding\");\nvar DYING_DURATION = 10;\nvar ATTACK_TURN_DURATION = 2;\nvar MOVE_TURN_DURATION = 2;\n// todo tune this\nvar getCooldownForSpeed = function (speed) { return (180 - speed) / 24; };\nvar STRONG_ATTACK_MODIFIER = 1.7;\nvar WEAK_ATTACK_MODIFIER = 0.3;\nvar getStats = function (piece) { return piece.definition.stages[piece.stage]; };\nvar simulateTurn = function (currentTurn, board, boardSlice) {\n    var pieceEntries = Object.entries(board.pieces);\n    pieceEntries.sort(function (_a, _b) {\n        var _c = __read(_a, 2), aPiece = _c[1];\n        var _d = __read(_b, 2), bPiece = _d[1];\n        var aStats = getStats(aPiece);\n        var bStats = getStats(bPiece);\n        return bStats.speed - aStats.speed;\n    });\n    return pieceEntries.reduce(function (b, _a) {\n        var _b = __read(_a, 1), pieceId = _b[0];\n        return takePieceTurn(currentTurn, pieceId, b, boardSlice);\n    }, board);\n};\nexports.simulateTurn = simulateTurn;\nvar takePieceTurn = function (currentTurn, pieceId, board, boardSlice) {\n    var originalPiece = board_1.BoardSelectors.getPiece(board, pieceId);\n    if (!originalPiece) {\n        return board;\n    }\n    var attackerCombatState = models_1.clonePieceCombatState(originalPiece.combat);\n    // create a new piece object, reset combat properties\n    var attacker = __assign(__assign({}, originalPiece), { attacking: null, hit: null, combat: attackerCombatState });\n    var attackerPosition = board_1.BoardSelectors.getPiecePosition(board, pieceId);\n    if (!attackerPosition) {\n        return board;\n    }\n    var attackerTargetId = attackerCombatState.targetId;\n    var attackerBoardState = attackerCombatState.board;\n    var attackerStats = getStats(attacker);\n    // board management\n    if (attackerBoardState.removeFromBoardAtTurn === currentTurn) {\n        return boardSlice.boardReducer(board, boardSlice.commands.removeBoardPiecesCommand([pieceId]));\n    }\n    if (attacker.currentHealth === 0) {\n        if (attackerBoardState.removeFromBoardAtTurn) {\n            return board;\n        }\n        attackerBoardState.removeFromBoardAtTurn = currentTurn + DYING_DURATION;\n        return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n    }\n    var cooldown = getCooldownForSpeed(attackerStats.speed);\n    if (attackerBoardState.canMoveAtTurn === null) {\n        attackerBoardState.canMoveAtTurn = currentTurn + cooldown;\n    }\n    if (attackerBoardState.canAttackAtTurn === null) {\n        attackerBoardState.canAttackAtTurn = currentTurn + cooldown;\n    }\n    // combat logic\n    if (!attackerTargetId) {\n        attacker.combat.targetId = findTargetId_1.findTargetId(attacker, board);\n        return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n    }\n    var target = board_1.BoardSelectors.getPiece(board, attackerTargetId);\n    // if we can't attack yet, wait for cooldown\n    if (!target || attackerBoardState.canAttackAtTurn > currentTurn) {\n        // todo check if attacker has been changed\n        return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n    }\n    // if the enemy can't be attacked yet, wait\n    // todo consider breaking and choosing different target..\n    if (target.combat.board.canBeAttackedAtTurn > currentTurn) {\n        return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n    }\n    var targetPosition = board_1.BoardSelectors.getPiecePosition(board, attackerTargetId);\n    var targetAlive = target.currentHealth > 0;\n    if (!targetAlive || !targetPosition) {\n        // target is dead, so clear target\n        // todo should we increment canAttackAtTurn here?\n        attacker.combat.targetId = null;\n        return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n    }\n    var inRange = inAttackRange_1.inAttackRange(attackerPosition, targetPosition, attackerStats.attackType);\n    if (inRange) {\n        // target is in range, so attack\n        var damage = getAttackDamage(attacker, target);\n        var newDefenderHealth = Math.max(target.currentHealth - damage, 0);\n        var attackerDirection = models_1.getRelativeDirection(attackerPosition, targetPosition);\n        var attackerDistance = models_1.getDistance(attackerPosition, targetPosition);\n        var attackerFacingAway = getNewAttackerFacingAway(attacker.facingAway, attackerDirection);\n        var newAttacker = __assign(__assign({}, attacker), { combat: __assign(__assign({}, attacker.combat), { board: __assign(__assign({}, attacker.combat.board), { \n                    // attack cooldown\n                    canAttackAtTurn: currentTurn + ATTACK_TURN_DURATION + getCooldownForSpeed(attackerStats.speed) }) }), attacking: {\n                attackType: attackerStats.attackType,\n                distance: attackerDistance,\n                direction: attackerDirection,\n                damage: damage\n            }, facingAway: attackerFacingAway });\n        var defender = __assign(__assign({}, target), { currentHealth: newDefenderHealth, hit: {\n                direction: models_1.getRelativeDirection(targetPosition, attackerPosition),\n                damage: damage\n            } });\n        return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([newAttacker, defender]));\n    }\n    else {\n        // target is out of range, so move towards\n        if (attackerBoardState.canMoveAtTurn > currentTurn) {\n            return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n        }\n        var nextPosition = pathfinding_1.getNextPiecePosition(attackerPosition, attackerStats, targetPosition, board);\n        if (!nextPosition) {\n            return boardSlice.boardReducer(board, boardSlice.commands.updateBoardPiecesCommand([attacker]));\n        }\n        var attackerDirection = models_1.getRelativeDirection(attackerPosition, targetPosition);\n        attacker.facingAway = getNewAttackerFacingAway(attacker.facingAway, attackerDirection);\n        attackerBoardState.canMoveAtTurn = currentTurn + MOVE_TURN_DURATION + getCooldownForSpeed(attackerStats.speed);\n        attackerBoardState.canBeAttackedAtTurn = currentTurn + MOVE_TURN_DURATION + 2;\n        attackerBoardState.canAttackAtTurn = currentTurn + MOVE_TURN_DURATION + 2;\n        return boardSlice.boardReducer(boardSlice.boardReducer(board, boardSlice.commands.moveBoardPieceCommand({ pieceId: pieceId, from: attackerPosition, to: nextPosition })), boardSlice.commands.updateBoardPiecesCommand([attacker]));\n    }\n};\nvar getNewAttackerFacingAway = function (oldFacingAway, direction) {\n    if (direction === models_1.Directions.LEFT || direction === models_1.Directions.RIGHT) {\n        // if it's left or right we don't need to change it\n        return oldFacingAway;\n    }\n    if (direction === models_1.Directions.UP) {\n        return true;\n    }\n    return false;\n};\nvar getAttackBonus = function (attacker, defender) {\n    var isDefenderOvercome = get_type_attack_bonus_1.isOvercomeBy(defender, attacker);\n    if (isDefenderOvercome) {\n        return STRONG_ATTACK_MODIFIER;\n    }\n    var isDefenderGenerated = get_type_attack_bonus_1.isGeneratedBy(defender, attacker);\n    var isAttackerOvercome = get_type_attack_bonus_1.isOvercomeBy(attacker, defender);\n    if (isDefenderGenerated || isAttackerOvercome) {\n        return WEAK_ATTACK_MODIFIER;\n    }\n    return 1;\n};\nvar getAttackDamage = function (attacker, defender) {\n    var attackerStats = getStats(attacker);\n    var defenderStats = getStats(defender);\n    var attackBonus = getAttackBonus(attacker.definition.type, defender.definition.type);\n    return (attackerStats.attack / defenderStats.defense) * attackBonus * 8; // todo tweak this\n};\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.findTargetId = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nvar board_1 = require(\"@shoki/board\");\nvar getLivingEnemies = function (piece, board) {\n    return board_1.BoardSelectors.getAllPieces(board).filter(function (other) { return other.ownerId !== piece.ownerId && other.currentHealth > 0; });\n};\nvar getEnemyDeltas = function (board, enemies, attackerPosition) {\n    var e_1, _a;\n    var enemyDeltas = [];\n    try {\n        for (var enemies_1 = __values(enemies), enemies_1_1 = enemies_1.next(); !enemies_1_1.done; enemies_1_1 = enemies_1.next()) {\n            var enemy = enemies_1_1.value;\n            var enemyPosition = board_1.BoardSelectors.getPiecePosition(board, enemy.id);\n            if (!enemyPosition) {\n                continue;\n            }\n            enemyDeltas.push({\n                enemy: enemy,\n                delta: models_1.getDelta(attackerPosition, enemyPosition)\n            });\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (enemies_1_1 && !enemies_1_1.done && (_a = enemies_1[\"return\"])) _a.call(enemies_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return enemyDeltas;\n};\nvar findTargetId = function (piece, board) {\n    var enemies = getLivingEnemies(piece, board);\n    if (enemies.length === 0) {\n        return null;\n    }\n    var attackerPosition = board_1.BoardSelectors.getPiecePosition(board, piece.id);\n    if (!attackerPosition) {\n        return null;\n    }\n    var enemyDeltas = getEnemyDeltas(board, enemies, attackerPosition);\n    // sort by column then by row\n    enemyDeltas.sort(function (a, b) {\n        if (a.delta.y < b.delta.y) {\n            return -1;\n        }\n        if (a.delta.y > b.delta.y) {\n            return 1;\n        }\n        if (a.delta.x < b.delta.x) {\n            return -1;\n        }\n        if (a.delta.x > b.delta.x) {\n            return 1;\n        }\n        if (a.enemy.definition.cost > b.enemy.definition.cost) {\n            return -1;\n        }\n        return 1;\n    });\n    return enemyDeltas[0].enemy.id;\n};\nexports.findTargetId = findTargetId;\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.getTypeAttackBonus = exports.isOvercomeBy = exports.isGeneratedBy = exports.typeInteractions = void 0;\nvar models_1 = require(\"@creature-chess/models\");\n// overcome / generated are Tuxemon language\nexports.typeInteractions = (_a = {},\n    _a[models_1.CreatureType.Earth] = {\n        generatedBy: models_1.CreatureType.Fire,\n        overcomeBy: models_1.CreatureType.Wood\n    },\n    _a[models_1.CreatureType.Metal] = {\n        generatedBy: models_1.CreatureType.Earth,\n        overcomeBy: models_1.CreatureType.Fire\n    },\n    _a[models_1.CreatureType.Water] = {\n        generatedBy: models_1.CreatureType.Metal,\n        overcomeBy: models_1.CreatureType.Earth\n    },\n    _a[models_1.CreatureType.Wood] = {\n        generatedBy: models_1.CreatureType.Water,\n        overcomeBy: models_1.CreatureType.Metal\n    },\n    _a[models_1.CreatureType.Fire] = {\n        generatedBy: models_1.CreatureType.Wood,\n        overcomeBy: models_1.CreatureType.Water\n    },\n    _a);\nvar isGeneratedBy = function (defender, attacker) { return exports.typeInteractions[defender].generatedBy === attacker; };\nexports.isGeneratedBy = isGeneratedBy;\nvar isOvercomeBy = function (defender, attacker) { return exports.typeInteractions[defender].overcomeBy === attacker; };\nexports.isOvercomeBy = isOvercomeBy;\nvar getTypeAttackBonus = function (attackType, defenceType) {\n    // an attack is strong against the element it overcomes, and weak against things that overcome the attacker\n    var defenderInteractions = exports.typeInteractions[defenceType];\n    if (defenderInteractions.overcomeBy === attackType) {\n        return 1.4;\n    }\n    var attackerInteractions = exports.typeInteractions[defenceType];\n    if (attackerInteractions.overcomeBy === defenceType) {\n        return 0.7;\n    }\n    return 1;\n};\nexports.getTypeAttackBonus = getTypeAttackBonus;\n","\"use strict\";\nexports.__esModule = true;\nexports.getTargetAttackPositions = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nvar isInsideGrid = function (_a) {\n    var width = _a.width, height = _a.height;\n    return function (position) {\n        var x = position.x, y = position.y;\n        return x >= 0 && y >= 0 && x < width && y < height;\n    };\n};\nvar getTargetAttackPositions = function (board, _a, range) {\n    var positionX = _a.x, positionY = _a.y;\n    if (range === void 0) { range = 1; }\n    var positions = [];\n    for (var x = positionX - range; x <= positionX + range; x++) {\n        if (x === positionX) {\n            continue;\n        }\n        positions.push(models_1.createTileCoordinates(x, positionY));\n    }\n    for (var y = positionY - range; y <= positionY + range; y++) {\n        if (y === positionY) {\n            continue;\n        }\n        positions.push(models_1.createTileCoordinates(positionX, y));\n    }\n    // filter out any that are outside the grid\n    return positions.filter(isInsideGrid(board.size));\n};\nexports.getTargetAttackPositions = getTargetAttackPositions;\n","\"use strict\";\nexports.__esModule = true;\nexports.inAttackRange = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nvar inAttackRange = function (attacker, target, attackType) {\n    var _a = models_1.getDelta(attacker, target), deltaX = _a.x, deltaY = _a.y;\n    // Pieces cannot attack diagonally\n    var result = (Math.min(deltaX, deltaY) === 0 && Math.max(deltaX, deltaY) <= attackType.range);\n    return result;\n};\nexports.inAttackRange = inAttackRange;\n","\"use strict\";\nexports.__esModule = true;\nexports.isATeamDefeated = void 0;\nvar board_1 = require(\"@shoki/board\");\nvar isATeamDefeated = function (board) {\n    var pieceOwnerIds = board_1.BoardSelectors.getAllPieces(board).map(function (p) { return p.ownerId; });\n    // if there are only pieces belonging to 1 player, then we have a winner\n    return (new Set(pieceOwnerIds).size === 1);\n};\nexports.isATeamDefeated = isATeamDefeated;\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.getStages = exports.classBuilds = void 0;\nvar models_1 = require(\"@creature-chess/models\");\n// each class has points to assign\n// these are then used, along with piece cost and stage, to get stats\n// the decimals here indicate how the points are assigned for each class\nexports.classBuilds = (_a = {},\n    _a[models_1.DefinitionClass.VALIANT] = {\n        hp: 0.4,\n        attack: 0.2,\n        defense: 0.3,\n        speed: 0.2\n    },\n    _a[models_1.DefinitionClass.ARCANE] = {\n        hp: 0.2,\n        attack: 0.4,\n        defense: 0.2,\n        speed: 0.3\n    },\n    _a[models_1.DefinitionClass.CUNNING] = {\n        hp: 0.1,\n        attack: 0.4,\n        defense: 0.1,\n        speed: 0.45\n    },\n    _a);\nvar getBaseStats = function () { return ({\n    hp: 10,\n    attack: 10,\n    defense: 10,\n    speed: 10\n}); };\nvar getPoints = function (cost, stage) {\n    var COST_MODIFIER = 1.5;\n    if (stage === 0) {\n        return (cost * COST_MODIFIER) * 20;\n    }\n    if (stage === 1) {\n        return (cost * COST_MODIFIER) * 80;\n    }\n    if (stage === 2) {\n        return (cost * COST_MODIFIER) * 210;\n    }\n    return 0;\n};\nvar getStat = function (baseStat, buildStat, availablePoints) { return baseStat + Math.ceil(buildStat * availablePoints); };\nvar getStats = function (definitionClass, cost, stage) {\n    var baseStats = getBaseStats();\n    var availablePoints = getPoints(cost, stage);\n    var build = exports.classBuilds[definitionClass];\n    var attackType = (definitionClass === models_1.DefinitionClass.ARCANE\n        ? models_1.attackTypes.shoot\n        : models_1.attackTypes.basic);\n    return {\n        hp: getStat(baseStats.hp, build.hp, availablePoints),\n        attack: getStat(baseStats.attack, build.attack, availablePoints),\n        defense: getStat(baseStats.defense, build.defense, availablePoints),\n        speed: getStat(baseStats.speed, build.speed, availablePoints),\n        attackType: attackType\n    };\n};\nvar getStages = function (definitionClass, cost) { return [\n    getStats(definitionClass, cost, 0),\n    getStats(definitionClass, cost, 1),\n    getStats(definitionClass, cost, 2)\n]; };\nexports.getStages = getStages;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.getAllDefinitions = exports.getDefinitionById = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nvar definitionClass_1 = require(\"./definitionClass\");\nvar createDefinition = function (id, name, type, definitionClass, cost) { return ({\n    id: id,\n    name: name,\n    type: type,\n    \"class\": definitionClass,\n    cost: cost,\n    stages: definitionClass_1.getStages(definitionClass, cost)\n}); };\nvar definitionsArray = [\n    createDefinition(1, \"Budaye\", models_1.CreatureType.Wood, models_1.DefinitionClass.VALIANT, 1),\n    createDefinition(2, \"Anoleaf\", models_1.CreatureType.Wood, models_1.DefinitionClass.CUNNING, 1),\n    createDefinition(3, \"Rockitten\", models_1.CreatureType.Earth, models_1.DefinitionClass.VALIANT, 1),\n    createDefinition(4, \"Aardorn\", models_1.CreatureType.Earth, models_1.DefinitionClass.CUNNING, 1),\n    createDefinition(5, \"Nut\", models_1.CreatureType.Metal, models_1.DefinitionClass.VALIANT, 1),\n    createDefinition(6, \"Puparmor\", models_1.CreatureType.Metal, models_1.DefinitionClass.VALIANT, 1),\n    createDefinition(7, \"Embra\", models_1.CreatureType.Fire, models_1.DefinitionClass.ARCANE, 1),\n    createDefinition(8, \"Tweesher\", models_1.CreatureType.Water, models_1.DefinitionClass.ARCANE, 1),\n    createDefinition(9, \"Bamboon\", models_1.CreatureType.Wood, models_1.DefinitionClass.VALIANT, 2),\n    createDefinition(10, \"Chenipode\", models_1.CreatureType.Earth, models_1.DefinitionClass.CUNNING, 2),\n    createDefinition(11, \"Bolt\", models_1.CreatureType.Metal, models_1.DefinitionClass.VALIANT, 2),\n    createDefinition(12, \"Weavifly\", models_1.CreatureType.Metal, models_1.DefinitionClass.ARCANE, 1),\n    createDefinition(13, \"Cardiling\", models_1.CreatureType.Fire, models_1.DefinitionClass.CUNNING, 2),\n    createDefinition(14, \"Agnite\", models_1.CreatureType.Fire, models_1.DefinitionClass.VALIANT, 2),\n    createDefinition(15, \"Elowind\", models_1.CreatureType.Water, models_1.DefinitionClass.ARCANE, 2),\n    createDefinition(16, \"Fluttaflap\", models_1.CreatureType.Water, models_1.DefinitionClass.VALIANT, 2),\n    createDefinition(17, \"Velocitile\", models_1.CreatureType.Wood, models_1.DefinitionClass.CUNNING, 3),\n    createDefinition(18, \"Sapsnap\", models_1.CreatureType.Wood, models_1.DefinitionClass.VALIANT, 3),\n    createDefinition(19, \"Rockat\", models_1.CreatureType.Earth, models_1.DefinitionClass.CUNNING, 3),\n    createDefinition(20, \"Grintot\", models_1.CreatureType.Earth, models_1.DefinitionClass.VALIANT, 3),\n    createDefinition(21, \"Propellorcat\", models_1.CreatureType.Metal, models_1.DefinitionClass.CUNNING, 3),\n    createDefinition(22, \"Sumchon\", models_1.CreatureType.Metal, models_1.DefinitionClass.VALIANT, 3),\n    createDefinition(23, \"Ignibus\", models_1.CreatureType.Fire, models_1.DefinitionClass.VALIANT, 3),\n    createDefinition(24, \"Ruption\", models_1.CreatureType.Fire, models_1.DefinitionClass.ARCANE, 3),\n    createDefinition(25, \"Noctalo\", models_1.CreatureType.Water, models_1.DefinitionClass.CUNNING, 3),\n    createDefinition(26, \"Lightmare\", models_1.CreatureType.Water, models_1.DefinitionClass.VALIANT, 3),\n    createDefinition(27, \"Narcileaf\", models_1.CreatureType.Wood, models_1.DefinitionClass.ARCANE, 4),\n    createDefinition(28, \"Coleorus\", models_1.CreatureType.Wood, models_1.DefinitionClass.CUNNING, 4),\n    createDefinition(29, \"Aardart\", models_1.CreatureType.Earth, models_1.DefinitionClass.CUNNING, 4),\n    createDefinition(30, \"Hubursa\", models_1.CreatureType.Earth, models_1.DefinitionClass.ARCANE, 4),\n    createDefinition(31, \"Sampsack\", models_1.CreatureType.Metal, models_1.DefinitionClass.VALIANT, 4),\n    createDefinition(32, \"Cairfrey\", models_1.CreatureType.Metal, models_1.DefinitionClass.ARCANE, 3),\n    createDefinition(33, \"Prophetoise\", models_1.CreatureType.Fire, models_1.DefinitionClass.ARCANE, 4),\n    createDefinition(34, \"Tikorch\", models_1.CreatureType.Fire, models_1.DefinitionClass.CUNNING, 4),\n    createDefinition(35, \"Nudimind\", models_1.CreatureType.Water, models_1.DefinitionClass.ARCANE, 4),\n    createDefinition(36, \"Dollfin\", models_1.CreatureType.Water, models_1.DefinitionClass.VALIANT, 4),\n    createDefinition(37, \"Arbelder\", models_1.CreatureType.Wood, models_1.DefinitionClass.VALIANT, 5),\n    createDefinition(38, \"Viviphyta\", models_1.CreatureType.Wood, models_1.DefinitionClass.CUNNING, 5),\n    createDefinition(39, \"Grintrock\", models_1.CreatureType.Earth, models_1.DefinitionClass.VALIANT, 5),\n    createDefinition(40, \"Jemuar\", models_1.CreatureType.Earth, models_1.DefinitionClass.CUNNING, 5),\n    createDefinition(41, \"Pyraminx\", models_1.CreatureType.Metal, models_1.DefinitionClass.VALIANT, 5),\n    createDefinition(42, \"AV8R\", models_1.CreatureType.Metal, models_1.DefinitionClass.CUNNING, 5),\n    createDefinition(43, \"Agnigon\", models_1.CreatureType.Fire, models_1.DefinitionClass.VALIANT, 5),\n    createDefinition(44, \"Cardinale\", models_1.CreatureType.Fire, models_1.DefinitionClass.CUNNING, 5),\n    createDefinition(45, \"Nudikill\", models_1.CreatureType.Water, models_1.DefinitionClass.VALIANT, 5),\n    createDefinition(46, \"Eaglace\", models_1.CreatureType.Water, models_1.DefinitionClass.CUNNING, 5),\n    createDefinition(47, \"Kirkanon\", models_1.CreatureType.Metal, models_1.DefinitionClass.ARCANE, 5)\n];\nvar definitionMap = new Map();\ndefinitionsArray.forEach(function (d) {\n    definitionMap.set(d.id, d);\n});\nvar getDefinitionById = function (id) { return definitionMap.get(id); };\nexports.getDefinitionById = getDefinitionById;\nvar getAllDefinitions = function () { return __spreadArray([], __read(definitionsArray)); };\nexports.getAllDefinitions = getAllDefinitions;\n","\"use strict\";\nexports.__esModule = true;\nexports.getPlayerEntityDependencies = void 0;\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar getPlayerEntityDependencies = function () { return typed_redux_saga_1.getContext(\"dependencies\"); };\nexports.getPlayerEntityDependencies = getPlayerEntityDependencies;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.playerEntity = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar engine_1 = require(\"@shoki/engine\");\nvar roundInfo_1 = require(\"../../game/roundInfo\");\nvar state_1 = require(\"./state\");\nvar root_1 = require(\"./sagas/root\");\nexports.playerEntity = engine_1.entityFactory(function (_a) {\n    var boardSlices = _a.boardSlices;\n    return ({\n        reducers: __assign(__assign({}, state_1.playerReducers), { board: boardSlices.boardSlice.boardReducer, bench: boardSlices.benchSlice.boardReducer, roundInfo: roundInfo_1.roundInfoReducer }),\n        rootSaga: function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, effects_1.call(root_1.playerRootSaga)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }\n    });\n});\n","\"use strict\";\nexports.__esModule = true;\nexports.PlayerEventActionTypesArray = exports.playerReceiveQuickChatEvent = exports.playerFinishMatchEvent = exports.playerMatchRewardsEvent = exports.playerDeathEvent = exports.clientFinishMatchEvent = exports.afterRerollCardsEvent = exports.afterSellPieceEvent = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nexports.afterSellPieceEvent = toolkit_1.createAction(\"afterSellPieceEvent\");\nexports.afterRerollCardsEvent = toolkit_1.createAction(\"afterRerollCardsEvent\");\nexports.clientFinishMatchEvent = toolkit_1.createAction(\"clientFinishMatchEvent\");\nexports.playerDeathEvent = toolkit_1.createAction(\"playerDeathEvent\");\nexports.playerMatchRewardsEvent = toolkit_1.createAction(\"playerMatchRewardsEvent\");\nexports.playerFinishMatchEvent = toolkit_1.createAction(\"playerFinishMatchEvent\");\nexports.playerReceiveQuickChatEvent = toolkit_1.createAction(\"playerReceiveQuickChatEvent\");\nexports.PlayerEventActionTypesArray = [\n    exports.playerDeathEvent.toString(),\n    exports.playerMatchRewardsEvent.toString(),\n    exports.playerReceiveQuickChatEvent.toString()\n];\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.getPlayerEntityDependencies = exports.PlayerEvents = exports.PlayerStateSelectors = exports.playerReducers = exports.PlayerCommands = exports.PlayerEntitySelectors = exports.playerEntity = void 0;\nvar entity_1 = require(\"./entity\");\n__createBinding(exports, entity_1, \"playerEntity\");\nexports.PlayerEntitySelectors = require(\"./selectors\");\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"PlayerCommands\");\n__createBinding(exports, state_1, \"playerReducers\");\nexports.PlayerStateSelectors = require(\"./state/selectors\");\nexports.PlayerEvents = require(\"./events\");\nvar dependencies_1 = require(\"./dependencies\");\n__createBinding(exports, dependencies_1, \"getPlayerEntityDependencies\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.playerBattle = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar models_1 = require(\"@creature-chess/models\");\nvar selectors_1 = require(\"../state/selectors\");\nvar commands_1 = require(\"../state/commands\");\nvar events_1 = require(\"../events\");\nvar matchRewards_1 = require(\"./matchRewards\");\nvar playerBattle = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.takeLatest(commands_1.updateOpponentCommand, function (_a) {\n                        var opponentId = _a.payload;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (!opponentId) return [3 /*break*/, 2];\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateBattleCommand(models_1.inProgressBattle(opponentId)))];\n                                case 1:\n                                    _b.sent();\n                                    _b.label = 2;\n                                case 2: return [2 /*return*/];\n                            }\n                        });\n                    }),\n                    effects_1.takeLatest(events_1.playerFinishMatchEvent.toString(), function (_a) {\n                        var opponentId;\n                        var _b = _a.payload, isHomePlayer = _b.isHomePlayer, homeScore = _b.homeScore, awayScore = _b.awayScore;\n                        return __generator(this, function (_c) {\n                            switch (_c.label) {\n                                case 0: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getOpponentId))];\n                                case 1:\n                                    opponentId = _c.sent();\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateBattleCommand(models_1.finishedBattle(opponentId, isHomePlayer, homeScore, awayScore)))];\n                                case 2:\n                                    _c.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    }),\n                    effects_1.call(matchRewards_1.playerMatchRewards)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerBattle = playerBattle;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.evolutionSaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar models_1 = require(\"@creature-chess/models\");\nvar board_1 = require(\"@shoki/board\");\nvar pieceSelectors = require(\"../../../player/pieceSelectors\");\nvar definitions_1 = require(\"../../../definitions\");\nvar selectors_1 = require(\"../state/selectors\");\nvar dependencies_1 = require(\"../dependencies\");\nvar pieceCanEvolve = function (piece) {\n    var definition = definitions_1.getDefinitionById(piece.definitionId);\n    if (!definition) {\n        return false;\n    }\n    return piece.stage < definition.stages.length - 1;\n};\nvar evolutionSaga = function () {\n    var _a, boardSlice, benchSlice;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [5 /*yield**/, __values(dependencies_1.getPlayerEntityDependencies())];\n            case 1:\n                _a = (_b.sent()).boardSlices, boardSlice = _a.boardSlice, benchSlice = _a.benchSlice;\n                return [4 /*yield*/, effects_1.takeLatest(\n                    // need to check when bench/board pieces are added (could have come from shop)\n                    // or when board piece is updated (could be due to a previous evolution)\n                    [boardSlice.commands.addBoardPieceCommand, benchSlice.commands.addBoardPieceCommand], function (_a) {\n                        var boardLocked, targetDefinitionId, targetStage, getCombinablePieces, matchingBoardPieces, matchingBenchPieces, totalInstances, pieceToReplace_1, piecePosition, x, y, boardPieceIds, benchPieceIds, newPiece, benchPieceIds, newPiece, piecePosition, x, y;\n                        var piece = _a.payload.piece;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    if (!pieceCanEvolve(piece)) {\n                                        return [2 /*return*/];\n                                    }\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerBoardLocked))];\n                                case 1:\n                                    boardLocked = _b.sent();\n                                    if (!boardLocked) return [3 /*break*/, 4];\n                                    // todo check if we have 3 evolvable pieces on the bench and evolve those? maybe\n                                    return [4 /*yield*/, effects_1.take(boardSlice.commands.unlockBoardCommand)];\n                                case 2:\n                                    // todo check if we have 3 evolvable pieces on the bench and evolve those? maybe\n                                    _b.sent();\n                                    return [4 /*yield*/, effects_1.delay(500)];\n                                case 3:\n                                    _b.sent();\n                                    _b.label = 4;\n                                case 4:\n                                    targetDefinitionId = piece.definitionId;\n                                    targetStage = piece.stage;\n                                    getCombinablePieces = function (pieces) { return pieces.filter(function (p) { return p.stage === targetStage; }); };\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return getCombinablePieces(pieceSelectors.getPiecesForDefinition(state.board, targetDefinitionId)); }))];\n                                case 5:\n                                    matchingBoardPieces = _b.sent();\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return getCombinablePieces(pieceSelectors.getPiecesForDefinition(state.bench, targetDefinitionId)); }))];\n                                case 6:\n                                    matchingBenchPieces = _b.sent();\n                                    totalInstances = matchingBoardPieces.length + matchingBenchPieces.length;\n                                    if (totalInstances < models_1.PIECES_TO_EVOLVE) {\n                                        return [2 /*return*/];\n                                    }\n                                    if (!(matchingBoardPieces.length > 0)) return [3 /*break*/, 11];\n                                    pieceToReplace_1 = matchingBoardPieces.pop();\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(function (s) { return board_1.BoardSelectors.getPiecePosition(s.board, pieceToReplace_1.id); }))];\n                                case 7:\n                                    piecePosition = _b.sent();\n                                    if (!piecePosition) {\n                                        return [2 /*return*/];\n                                    }\n                                    x = piecePosition.x, y = piecePosition.y;\n                                    boardPieceIds = __spreadArray(__spreadArray([], __read(matchingBoardPieces)), [pieceToReplace_1]).map(function (p) { return p.id; });\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.removeBoardPiecesCommand(boardPieceIds))];\n                                case 8:\n                                    _b.sent();\n                                    benchPieceIds = matchingBenchPieces.map(function (p) { return p.id; });\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.removeBoardPiecesCommand(__spreadArray(__spreadArray([], __read(benchPieceIds)), [piece.id])))];\n                                case 9:\n                                    _b.sent();\n                                    newPiece = __assign(__assign({}, pieceToReplace_1), { stage: targetStage + 1 });\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.addBoardPieceCommand({ x: x, y: y, piece: newPiece }))];\n                                case 10:\n                                    _b.sent();\n                                    return [3 /*break*/, 15];\n                                case 11:\n                                    benchPieceIds = matchingBenchPieces.map(function (p) { return p.id; });\n                                    newPiece = __assign(__assign({}, piece), { stage: targetStage + 1 });\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(function (s) { return board_1.BoardSelectors.getPiecePosition(s.bench, piece.id); }))];\n                                case 12:\n                                    piecePosition = _b.sent();\n                                    if (!piecePosition) {\n                                        return [2 /*return*/];\n                                    }\n                                    x = piecePosition.x, y = piecePosition.y;\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.removeBoardPiecesCommand(__spreadArray(__spreadArray([], __read(benchPieceIds)), [piece.id])))];\n                                case 13:\n                                    _b.sent();\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.addBoardPieceCommand({ x: x, y: y, piece: newPiece }))];\n                                case 14:\n                                    _b.sent();\n                                    _b.label = 15;\n                                case 15: return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 2:\n                _b.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.evolutionSaga = evolutionSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.fillBoard = exports.fillBoardCommand = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar board_1 = require(\"@shoki/board\");\nvar playerActions_1 = require(\"../../../playerActions\");\nvar selectors_1 = require(\"../state/selectors\");\nvar FILL_BOARD_COMMAND = \"FILL_BOARD_COMMAND\";\nvar fillBoardCommand = function () { return ({ type: FILL_BOARD_COMMAND }); };\nexports.fillBoardCommand = fillBoardCommand;\nvar fillBoard = function () {\n    var playerId;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"id\"))];\n            case 1:\n                playerId = _a.sent();\n                return [4 /*yield*/, effects_1.takeEvery(FILL_BOARD_COMMAND, function () {\n                        var isAlive, state, belowPieceLimit, benchPiece, destination, benchPiecePosition, fromLocation, toLocation;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerAlive))];\n                                case 1:\n                                    isAlive = _a.sent();\n                                    if (!isAlive) {\n                                        return [2 /*return*/];\n                                    }\n                                    _a.label = 2;\n                                case 2:\n                                    if (!true) return [3 /*break*/, 5];\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select())];\n                                case 3:\n                                    state = _a.sent();\n                                    belowPieceLimit = selectors_1.getPlayerBelowPieceLimit(state, playerId);\n                                    if (!belowPieceLimit) {\n                                        return [2 /*return*/];\n                                    }\n                                    benchPiece = selectors_1.getMostExpensiveBenchPiece(state);\n                                    if (!benchPiece) {\n                                        return [2 /*return*/];\n                                    }\n                                    destination = board_1.BoardSelectors.getFirstEmptySlot(state.board);\n                                    if (!destination) {\n                                        return [2 /*return*/];\n                                    }\n                                    benchPiecePosition = board_1.BoardSelectors.getPiecePosition(state.bench, benchPiece.id);\n                                    if (!benchPiecePosition) {\n                                        return [2 /*return*/];\n                                    }\n                                    fromLocation = {\n                                        type: \"bench\",\n                                        location: benchPiecePosition\n                                    };\n                                    toLocation = {\n                                        type: \"board\",\n                                        location: {\n                                            x: destination.x,\n                                            y: destination.y\n                                        }\n                                    };\n                                    return [4 /*yield*/, effects_1.put(playerActions_1.dropPiecePlayerAction({\n                                            pieceId: benchPiece.id,\n                                            from: fromLocation,\n                                            to: toLocation\n                                        }))];\n                                case 4:\n                                    _a.sent();\n                                    return [3 /*break*/, 2];\n                                case 5: return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.fillBoard = fillBoard;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.healthSaga = exports.subtractHealthCommand = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar commands_1 = require(\"../state/commands\");\nvar HEALTH_SUBTRACT_COMMAND = \"HEALTH_SUBTRACT_COMMAND\";\nvar subtractHealthCommand = function (amount) { return ({\n    type: HEALTH_SUBTRACT_COMMAND,\n    payload: { amount: amount }\n}); };\nexports.subtractHealthCommand = subtractHealthCommand;\nvar healthSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.takeEvery(HEALTH_SUBTRACT_COMMAND, function (_a) {\n                        var state, oldValue, newValue;\n                        var amount = _a.payload.amount;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0: return [4 /*yield*/, effects_1.select()];\n                                case 1:\n                                    state = _b.sent();\n                                    oldValue = state.playerInfo.health;\n                                    newValue = oldValue - amount;\n                                    newValue = (newValue < 0) ? 0 : newValue;\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateHealthCommand(newValue))];\n                                case 2:\n                                    _b.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.healthSaga = healthSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.playerMatchRewards = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar models_1 = require(\"@creature-chess/models\");\nvar events_1 = require(\"../events\");\nvar commands_1 = require(\"../state/commands\");\nvar health_1 = require(\"./health\");\nvar selectors_1 = require(\"../state/selectors\");\nvar getStreakBonus = function (streak) {\n    if (streak >= 9) {\n        return 3;\n    }\n    if (streak >= 6) {\n        return 2;\n    }\n    if (streak >= 3) {\n        return 1;\n    }\n    return 0;\n};\nvar getMoneyForMatch = function (currentMoney, streak, win) {\n    var base = 3;\n    var winBonus = win ? 1 : 0;\n    var streakBonus = getStreakBonus(streak);\n    var interest = Math.min(Math.floor(currentMoney / 10), 5);\n    var total = base + winBonus + streakBonus + interest;\n    return { total: total, base: base, winBonus: winBonus, streakBonus: streakBonus, interest: interest };\n};\nvar updateStreak = function (win) {\n    var type, existingStreak, newAmount;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                type = win ? models_1.StreakType.WIN : models_1.StreakType.LOSS;\n                return [4 /*yield*/, typed_redux_saga_1.select(selectors_1.getPlayerStreak)];\n            case 1:\n                existingStreak = _a.sent();\n                newAmount = (type === existingStreak.type) ? existingStreak.amount + 1 : 0;\n                return [4 /*yield*/, effects_1.put(commands_1.updateStreakCommand({ type: type, amount: newAmount }))];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nvar playerMatchRewards = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeLatest(events_1.playerFinishMatchEvent.toString(), function (_a) {\n                    var win, enemyPiecesRemaining, damage, oldValue, newValue, justDied, currentMoney, streak, _b, total, base, winBonus, streakBonus, interest;\n                    var _c = _a.payload, homeScore = _c.homeScore, awayScore = _c.awayScore, isHomePlayer = _c.isHomePlayer;\n                    return __generator(this, function (_d) {\n                        switch (_d.label) {\n                            case 0:\n                                win = isHomePlayer ? homeScore > awayScore : awayScore > homeScore;\n                                return [4 /*yield*/, effects_1.call(updateStreak, win)];\n                            case 1:\n                                _d.sent();\n                                enemyPiecesRemaining = isHomePlayer ? awayScore : homeScore;\n                                damage = enemyPiecesRemaining * models_1.HEALTH_LOST_PER_PIECE;\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerHealth))];\n                            case 2:\n                                oldValue = _d.sent();\n                                return [4 /*yield*/, effects_1.put(health_1.subtractHealthCommand(damage))];\n                            case 3:\n                                _d.sent();\n                                // subtractHealthCommand emits an UPDATE_HEALTH_COMMAND so need to wait for that.\n                                // todo this is ugly\n                                return [4 /*yield*/, effects_1.take(commands_1.updateHealthCommand.toString())];\n                            case 4:\n                                // subtractHealthCommand emits an UPDATE_HEALTH_COMMAND so need to wait for that.\n                                // todo this is ugly\n                                _d.sent();\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerHealth))];\n                            case 5:\n                                newValue = _d.sent();\n                                justDied = (newValue === 0 && oldValue !== 0);\n                                if (!justDied) return [3 /*break*/, 8];\n                                return [4 /*yield*/, effects_1.put(commands_1.updateStatusCommand(models_1.PlayerStatus.DEAD))];\n                            case 6:\n                                _d.sent();\n                                return [4 /*yield*/, effects_1.put(events_1.playerDeathEvent())];\n                            case 7:\n                                _d.sent();\n                                _d.label = 8;\n                            case 8: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerMoney))];\n                            case 9:\n                                currentMoney = _d.sent();\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerStreak))];\n                            case 10:\n                                streak = _d.sent();\n                                _b = getMoneyForMatch(currentMoney, streak.amount, win), total = _b.total, base = _b.base, winBonus = _b.winBonus, streakBonus = _b.streakBonus, interest = _b.interest;\n                                return [4 /*yield*/, effects_1.put(events_1.playerMatchRewardsEvent({\n                                        damage: damage,\n                                        justDied: justDied,\n                                        rewardMoney: { total: total, base: base, winBonus: winBonus, streakBonus: streakBonus, interest: interest }\n                                    }))];\n                            case 11:\n                                _d.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerMatchRewards = playerMatchRewards;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.playerPhases = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar preparing_1 = require(\"./preparing\");\nvar ready_1 = require(\"./ready\");\nvar playerPhases = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(preparing_1.playerPreparingPhase),\n                    effects_1.call(ready_1.playerReadyPhase)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerPhases = playerPhases;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.playerPreparingPhase = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar events_1 = require(\"../../../../game/events\");\nvar events_2 = require(\"../../events\");\nvar commands_1 = require(\"../../state/commands\");\nvar selectors_1 = require(\"../../state/selectors\");\nvar selectors_2 = require(\"../../selectors\");\nvar xp_1 = require(\"../xp\");\nvar playerPreparingPhase = function () {\n    var boardSlice;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(selectors_2.getBoardSlice())];\n            case 1:\n                boardSlice = _a.sent();\n                return [4 /*yield*/, effects_1.takeEvery(events_1.playerRunPreparingPhaseEvent.toString(), function () {\n                        var alive, matchRewards, currentMoney, totalMatchReward, locked, level;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerAlive))];\n                                case 1:\n                                    alive = _a.sent();\n                                    if (!alive) {\n                                        return [2 /*return*/];\n                                    }\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return state.playerInfo.matchRewards; }))];\n                                case 2:\n                                    matchRewards = _a.sent();\n                                    if (!matchRewards) return [3 /*break*/, 6];\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerMoney))];\n                                case 3:\n                                    currentMoney = _a.sent();\n                                    totalMatchReward = matchRewards.rewardMoney.total;\n                                    // todo make addMoneyCommand\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(currentMoney + totalMatchReward))];\n                                case 4:\n                                    // todo make addMoneyCommand\n                                    _a.sent();\n                                    return [4 /*yield*/, effects_1.put(xp_1.addXpCommand(1))];\n                                case 5:\n                                    _a.sent();\n                                    _a.label = 6;\n                                case 6: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerShopLocked))];\n                                case 7:\n                                    locked = _a.sent();\n                                    if (!!locked) return [3 /*break*/, 9];\n                                    return [4 /*yield*/, effects_1.put(events_2.afterRerollCardsEvent())];\n                                case 8:\n                                    _a.sent();\n                                    _a.label = 9;\n                                case 9:\n                                    if (!matchRewards) return [3 /*break*/, 12];\n                                    return [4 /*yield*/, effects_1.put(events_2.playerMatchRewardsEvent(null))];\n                                case 10:\n                                    _a.sent();\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateOpponentCommand(null))];\n                                case 11:\n                                    _a.sent();\n                                    _a.label = 12;\n                                case 12: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerLevel))];\n                                case 13:\n                                    level = _a.sent();\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.setPieceLimitCommand(level))];\n                                case 14:\n                                    _a.sent();\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.unlockBoardCommand())];\n                                case 15:\n                                    _a.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerPreparingPhase = playerPreparingPhase;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.playerReadyPhase = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar events_1 = require(\"../../../../game/events\");\nvar commands_1 = require(\"../../state/commands\");\nvar selectors_1 = require(\"../../selectors\");\nvar fillBoard_1 = require(\"../fillBoard\");\nvar playerReadyPhase = function () {\n    var playerId, boardSlice;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"id\"))];\n            case 1:\n                playerId = _a.sent();\n                return [5 /*yield**/, __values(selectors_1.getBoardSlice())];\n            case 2:\n                boardSlice = _a.sent();\n                return [4 /*yield*/, effects_1.takeEvery(events_1.playerBeforeReadyPhaseEvent.toString(), function () {\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, effects_1.put(fillBoard_1.fillBoardCommand())];\n                                case 1:\n                                    _a.sent();\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateReadyCommand(false))];\n                                case 2:\n                                    _a.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 3:\n                _a.sent();\n                return [4 /*yield*/, effects_1.takeEvery(events_1.playerRunReadyPhaseEvent.toString(), function (_a) {\n                        var opponentId;\n                        var match = _a.payload.match;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0: return [4 /*yield*/, effects_1.put(boardSlice.commands.lockBoardCommand())];\n                                case 1:\n                                    _b.sent();\n                                    opponentId = match.home.id === playerId\n                                        ? match.away.id\n                                        : match.home.id;\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateOpponentCommand(opponentId))];\n                                case 2:\n                                    _b.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 4:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerReadyPhase = playerReadyPhase;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.playerRootSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar saga_1 = require(\"../../../playerActions/saga\");\nvar evolution_1 = require(\"./evolution\");\nvar phases_1 = require(\"./phases\");\nvar setStatusOnQuit_1 = require(\"./setStatusOnQuit\");\nvar features_1 = require(\"../../../features\");\nvar battle_1 = require(\"./battle\");\nvar xp_1 = require(\"./xp\");\nvar fillBoard_1 = require(\"./fillBoard\");\nvar health_1 = require(\"./health\");\nvar playerRootSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(phases_1.playerPhases),\n                    effects_1.call(saga_1.playerActionsSaga),\n                    effects_1.call(evolution_1.evolutionSaga),\n                    effects_1.call(health_1.healthSaga),\n                    effects_1.call(xp_1.playerXpSaga),\n                    effects_1.call(fillBoard_1.fillBoard),\n                    effects_1.call(setStatusOnQuit_1.setStatusOnQuit),\n                    effects_1.call(battle_1.playerBattle),\n                    effects_1.call(features_1.featuresRootSaga)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerRootSaga = playerRootSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.setStatusOnQuit = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar models_1 = require(\"@creature-chess/models\");\nvar playerActions_1 = require(\"../../../playerActions\");\nvar commands_1 = require(\"../state/commands\");\nvar setStatusOnQuit = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.take(playerActions_1.quitGamePlayerAction.toString())];\n            case 1:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(commands_1.updateStatusCommand(models_1.PlayerStatus.QUIT))];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.setStatusOnQuit = setStatusOnQuit;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.playerXpSaga = exports.addXpCommand = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar models_1 = require(\"@creature-chess/models\");\nvar commands_1 = require(\"../state/commands\");\nvar selectors_1 = require(\"../state/selectors\");\nvar dependencies_1 = require(\"../dependencies\");\nvar ADD_XP_COMMAND = \"ADD_XP_COMMAND\";\nvar addXpCommand = function (amount) { return ({\n    type: ADD_XP_COMMAND,\n    payload: { amount: amount }\n}); };\nexports.addXpCommand = addXpCommand;\nvar playerXpSaga = function () {\n    var _a, boardSlice, benchSlice, amount, level, xp, oldLevel, i, toNextLevel, newXp, inPreparingPhase;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [5 /*yield**/, __values(dependencies_1.getPlayerEntityDependencies())];\n            case 1:\n                _a = (_b.sent()).boardSlices, boardSlice = _a.boardSlice, benchSlice = _a.benchSlice;\n                _b.label = 2;\n            case 2:\n                if (!true) return [3 /*break*/, 10];\n                return [4 /*yield*/, effects_1.take(ADD_XP_COMMAND)];\n            case 3:\n                amount = (_b.sent()).payload.amount;\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerLevel))];\n            case 4:\n                level = _b.sent();\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerXp))];\n            case 5:\n                xp = _b.sent();\n                oldLevel = level;\n                for (i = 0; i < amount; i++) {\n                    toNextLevel = models_1.getXpToNextLevel(level);\n                    newXp = xp + 1;\n                    if (newXp === toNextLevel) {\n                        xp = 0;\n                        level++;\n                    }\n                    else {\n                        xp = newXp;\n                    }\n                }\n                return [4 /*yield*/, effects_1.put(commands_1.updateLevelCommand({ level: level, xp: xp }))];\n            case 6:\n                _b.sent();\n                if (!(level !== oldLevel)) return [3 /*break*/, 9];\n                return [4 /*yield*/, typed_redux_saga_1.select(function (state) { return state.roundInfo.phase === models_1.GamePhase.PREPARING; })];\n            case 7:\n                inPreparingPhase = _b.sent();\n                if (!inPreparingPhase) return [3 /*break*/, 9];\n                return [4 /*yield*/, effects_1.put(boardSlice.commands.setPieceLimitCommand(level))];\n            case 8:\n                _b.sent();\n                _b.label = 9;\n            case 9: return [3 /*break*/, 2];\n            case 10: return [2 /*return*/];\n        }\n    });\n};\nexports.playerXpSaga = playerXpSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.getBenchSlice = exports.getBoardSlice = void 0;\nvar engine_1 = require(\"@shoki/engine\");\nvar getBoardSlices = function () { return engine_1.getDependency(\"boardSlices\"); };\nvar getBoardSlice = function () {\n    var boardSlice;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(getBoardSlices())];\n            case 1:\n                boardSlice = (_a.sent()).boardSlice;\n                return [2 /*return*/, boardSlice];\n        }\n    });\n};\nexports.getBoardSlice = getBoardSlice;\nvar getBenchSlice = function () {\n    var benchSlice;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(getBoardSlices())];\n            case 1:\n                benchSlice = (_a.sent()).benchSlice;\n                return [2 /*return*/, benchSlice];\n        }\n    });\n};\nexports.getBenchSlice = getBenchSlice;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.cardShopReducer = exports.updateShopLockCommand = exports.updateCardsCommand = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = {\n    cards: [],\n    locked: false\n};\nvar _a = toolkit_1.createSlice({\n    name: \"cards\",\n    initialState: initialState,\n    reducers: {\n        updateCardsCommand: function (state, _a) {\n            var cards = _a.payload;\n            return (__assign(__assign({}, state), { cards: cards }));\n        },\n        updateShopLockCommand: function (state, _a) {\n            var locked = _a.payload;\n            return (__assign(__assign({}, state), { locked: locked }));\n        }\n    }\n}), actions = _a.actions, cardShopReducer = _a.reducer;\nexports.cardShopReducer = cardShopReducer;\n// this stops the compiler from trying to export a type from @reduxjs/toolkit\nvar updateCardsCommand = actions.updateCardsCommand;\nexports.updateCardsCommand = updateCardsCommand;\nvar updateShopLockCommand = actions.updateShopLockCommand;\nexports.updateShopLockCommand = updateShopLockCommand;\n","\"use strict\";\nexports.__esModule = true;\nexports.PlayerInfoUpdateCommandActionTypesArray = exports.updateOpponentCommand = exports.updateReadyCommand = exports.updateStatusCommand = exports.updateLevelCommand = exports.updateMoneyCommand = exports.updateHealthCommand = exports.updateStreakCommand = exports.updateBattleCommand = exports.setSpectatingIdCommand = exports.updateShopLockCommand = exports.updateCardsCommand = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar cardShop_1 = require(\"./cardShop\");\nexports.updateCardsCommand = cardShop_1.updateCardsCommand;\nexports.updateShopLockCommand = cardShop_1.updateShopLockCommand;\nvar spectating_1 = require(\"./spectating\");\nexports.setSpectatingIdCommand = spectating_1.setSpectatingIdCommand;\nexports.updateBattleCommand = toolkit_1.createAction(\"updateBattleCommand\");\nexports.updateStreakCommand = toolkit_1.createAction(\"updateStreakCommand\");\nexports.updateHealthCommand = toolkit_1.createAction(\"updateHealthCommand\");\nexports.updateMoneyCommand = toolkit_1.createAction(\"updateMoneyCommand\");\nexports.updateLevelCommand = toolkit_1.createAction(\"updateLevelCommand\");\nexports.updateStatusCommand = toolkit_1.createAction(\"updateStatusCommand\");\nexports.updateReadyCommand = toolkit_1.createAction(\"updateReadyCommand\");\nexports.updateOpponentCommand = toolkit_1.createAction(\"updateOpponentCommand\");\nexports.PlayerInfoUpdateCommandActionTypesArray = [\n    spectating_1.setSpectatingIdCommand.toString(),\n    cardShop_1.updateCardsCommand.toString(),\n    cardShop_1.updateShopLockCommand.toString(),\n    exports.updateMoneyCommand.toString(),\n    exports.updateLevelCommand.toString(),\n    exports.updateHealthCommand.toString(),\n    exports.updateOpponentCommand.toString(),\n];\n","\"use strict\";\nexports.__esModule = true;\nexports.playerReducers = exports.PlayerCommands = void 0;\nvar playerInfo_1 = require(\"./playerInfo\");\nvar cardShop_1 = require(\"./cardShop\");\nvar spectating_1 = require(\"./spectating\");\nexports.PlayerCommands = require(\"./commands\");\nexports.playerReducers = {\n    spectating: spectating_1.spectatingReducer,\n    cardShop: cardShop_1.cardShopReducer,\n    playerInfo: playerInfo_1.playerInfoReducer\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.playerInfoReducer = void 0;\nvar reducer_1 = require(\"./reducer\");\n__createBinding(exports, reducer_1, \"playerInfoReducer\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.playerInfoReducer = void 0;\nvar models_1 = require(\"@creature-chess/models\");\nvar initialState = {\n    status: models_1.PlayerStatus.CONNECTED,\n    health: models_1.STARTING_HEALTH,\n    streak: {\n        type: models_1.StreakType.WIN,\n        amount: 0\n    },\n    battle: null,\n    matchRewards: null,\n    opponentId: null,\n    money: models_1.STARTING_MONEY,\n    ready: false,\n    level: models_1.STARTING_LEVEL,\n    xp: 0\n};\nvar playerInfoReducer = function (state, command) {\n    if (state === void 0) { state = initialState; }\n    switch (command.type) {\n        case \"playerMatchRewardsEvent\":\n            return __assign(__assign({}, state), { matchRewards: command.payload });\n        case \"updateStatusCommand\":\n            return __assign(__assign({}, state), { status: command.payload });\n        case \"updateReadyCommand\":\n            return __assign(__assign({}, state), { ready: command.payload });\n        case \"updateOpponentCommand\":\n            return __assign(__assign({}, state), { opponentId: command.payload });\n        case \"updateBattleCommand\":\n            return __assign(__assign({}, state), { battle: command.payload });\n        case \"updateHealthCommand\":\n            return __assign(__assign({}, state), { health: command.payload });\n        case \"updateStreakCommand\":\n            return __assign(__assign({}, state), { streak: {\n                    amount: command.payload.amount,\n                    type: command.payload.type\n                } });\n        case \"updateLevelCommand\":\n            return __assign(__assign({}, state), { level: command.payload.level, xp: command.payload.xp });\n        case \"updateMoneyCommand\":\n            return __assign(__assign({}, state), { money: command.payload });\n        default:\n            return state;\n    }\n};\nexports.playerInfoReducer = playerInfoReducer;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.getMostExpensiveBenchPiece = exports.getPlayerBelowPieceLimit = exports.getAllPieceCount = exports.isPlayerShopLocked = exports.getPlayerCards = exports.isPlayerAlive = exports.getOpponentId = exports.isPlayerReady = exports.getPlayerStreak = exports.isNotQuit = exports.getPlayerStatus = exports.getPlayerBattle = exports.getPlayerXp = exports.getPlayerLevel = exports.getPlayerHealth = exports.getPlayerMoney = exports.getPlayerBench = exports.isPlayerBoardLocked = exports.getPlayerBoard = void 0;\nvar board_1 = require(\"@shoki/board\");\nvar models_1 = require(\"@creature-chess/models\");\nvar getPlayerBoard = function (state) { return state.board; };\nexports.getPlayerBoard = getPlayerBoard;\nvar isPlayerBoardLocked = function (state) { return state.board.locked; };\nexports.isPlayerBoardLocked = isPlayerBoardLocked;\nvar getPlayerBench = function (state) { return state.bench; };\nexports.getPlayerBench = getPlayerBench;\nvar getPlayerMoney = function (state) { return state.playerInfo.money; };\nexports.getPlayerMoney = getPlayerMoney;\nvar getPlayerHealth = function (state) { return state.playerInfo.health; };\nexports.getPlayerHealth = getPlayerHealth;\nvar getPlayerLevel = function (state) { return state.playerInfo.level; };\nexports.getPlayerLevel = getPlayerLevel;\nvar getPlayerXp = function (state) { return state.playerInfo.xp; };\nexports.getPlayerXp = getPlayerXp;\nvar getPlayerBattle = function (state) { return state.playerInfo.battle; };\nexports.getPlayerBattle = getPlayerBattle;\nvar getPlayerStatus = function (state) { return state.playerInfo.status; };\nexports.getPlayerStatus = getPlayerStatus;\nvar isNotQuit = function (state) { return state.playerInfo.status !== models_1.PlayerStatus.QUIT; };\nexports.isNotQuit = isNotQuit;\nvar getPlayerStreak = function (state) { return state.playerInfo.streak; };\nexports.getPlayerStreak = getPlayerStreak;\nvar isPlayerReady = function (state) { return state.playerInfo.ready; };\nexports.isPlayerReady = isPlayerReady;\nvar getOpponentId = function (state) { return state.playerInfo.opponentId; };\nexports.getOpponentId = getOpponentId;\nvar isPlayerAlive = function (state) { return state.playerInfo.health > 0; };\nexports.isPlayerAlive = isPlayerAlive;\nvar getPlayerCards = function (state) { return state.cardShop.cards; };\nexports.getPlayerCards = getPlayerCards;\nvar isPlayerShopLocked = function (state) { return state.cardShop.locked; };\nexports.isPlayerShopLocked = isPlayerShopLocked;\nvar getAllPieceCount = function (state) { return __spreadArray(__spreadArray([], __read(board_1.BoardSelectors.getAllPieces(state.board))), __read(board_1.BoardSelectors.getAllPieces(state.bench))).length; };\nexports.getAllPieceCount = getAllPieceCount;\n// todo use piece limit from board, remove this\nvar getPlayerBelowPieceLimit = function (state, playerId) {\n    var ownedBoardPieceCount = board_1.BoardSelectors.getAllPieces(state.board).filter(function (p) { return p.ownerId === playerId; }).length;\n    var level = exports.getPlayerLevel(state);\n    return ownedBoardPieceCount < level;\n};\nexports.getPlayerBelowPieceLimit = getPlayerBelowPieceLimit;\nvar getMostExpensiveBenchPiece = function (state) {\n    var benchPieces = Object.values(state.bench.pieces);\n    if (!benchPieces.length) {\n        return null;\n    }\n    benchPieces.sort(function (a, b) { return b.definition.cost - a.definition.cost; });\n    return benchPieces[0];\n};\nexports.getMostExpensiveBenchPiece = getMostExpensiveBenchPiece;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.spectatingReducer = exports.setSpectatingIdCommand = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = {\n    id: null\n};\nvar _a = toolkit_1.createSlice({\n    name: \"spectating\",\n    initialState: initialState,\n    reducers: {\n        setSpectatingIdCommand: function (state, _a) {\n            var id = _a.payload;\n            return (__assign(__assign({}, state), { id: id }));\n        }\n    }\n}), actions = _a.actions, spectatingReducer = _a.reducer;\nexports.spectatingReducer = spectatingReducer;\n// this stops the compiler from trying to export a type from @reduxjs/toolkit\nvar setSpectatingIdCommand = actions.setSpectatingIdCommand;\nexports.setSpectatingIdCommand = setSpectatingIdCommand;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.defaultFeaturesPlayerVariables = exports.featuresRootSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar match_1 = require(\"./match\");\nvar featuresRootSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(match_1.matchRootSaga)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.featuresRootSaga = featuresRootSaga;\nvar defaultFeaturesPlayerVariables = function () { return (__assign({}, match_1.defaultMatchPlayerVariables())); };\nexports.defaultFeaturesPlayerVariables = defaultFeaturesPlayerVariables;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.getMatch = exports.matchRootSaga = exports.defaultMatchPlayerVariables = void 0;\nvar playerVariables_1 = require(\"./playerVariables\");\n__createBinding(exports, playerVariables_1, \"defaultPlayerVariables\", \"defaultMatchPlayerVariables\");\nvar root_1 = require(\"./sagas/root\");\n__createBinding(exports, root_1, \"rootSaga\", \"matchRootSaga\");\nvar selectors_1 = require(\"./selectors\");\n__createBinding(exports, selectors_1, \"getMatch\");\n","\"use strict\";\nexports.__esModule = true;\nexports.defaultPlayerVariables = void 0;\nvar defaultPlayerVariables = function () { return ({ match: null }); };\nexports.defaultPlayerVariables = defaultPlayerVariables;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.clientFinishMatch = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar events_1 = require(\"../../../entities/player/events\");\nvar selectors_1 = require(\"../selectors\");\nvar clientFinishMatch = function () {\n    var playerId;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"id\"))];\n            case 1:\n                playerId = _a.sent();\n                return [4 /*yield*/, effects_1.takeLatest(events_1.clientFinishMatchEvent.toString(), function () {\n                        var match;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [5 /*yield**/, __values(selectors_1.getMatch())];\n                                case 1:\n                                    match = _a.sent();\n                                    match === null || match === void 0 ? void 0 : match.onClientFinishMatch(playerId);\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 2:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.clientFinishMatch = clientFinishMatch;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.rootSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar clientFinishMatch_1 = require(\"./clientFinishMatch\");\nvar updateMatchVariable_1 = require(\"./updateMatchVariable\");\nvar rootSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(updateMatchVariable_1.updateMatchVariable),\n                    effects_1.call(clientFinishMatch_1.clientFinishMatch)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.rootSaga = rootSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.updateMatchVariable = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar engine_1 = require(\"@shoki/engine\");\nvar events_1 = require(\"../../../game/events\");\nvar events_2 = require(\"../../../entities/player/events\");\nvar updateMatchVariable = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.takeEvery(events_1.playerRunReadyPhaseEvent.toString(), function (_a) {\n                        var match = _a.payload.match;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0: return [5 /*yield**/, __values(engine_1.updateVariables({ match: match }))];\n                                case 1:\n                                    _b.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    }),\n                    effects_1.takeEvery(events_2.playerFinishMatchEvent.toString(), function () {\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [5 /*yield**/, __values(engine_1.updateVariables({ match: null }))];\n                                case 1:\n                                    _a.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.updateMatchVariable = updateMatchVariable;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.getMatches = exports.getMatch = void 0;\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar engine_1 = require(\"@shoki/engine\");\nvar getMatch = function () { return engine_1.getVariable(function (variables) { return variables.match; }); };\nexports.getMatch = getMatch;\nvar getMatches = function (players) {\n    var promises;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                promises = players.map(function (p) { return p.runSaga(function () {\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [5 /*yield**/, __values(exports.getMatch())];\n                            case 1: return [2 /*return*/, _a.sent()];\n                        }\n                    });\n                }).toPromise(); });\n                return [5 /*yield**/, __values(typed_redux_saga_1.all(promises))];\n            case 1: return [2 /*return*/, _a.sent()];\n        }\n    });\n};\nexports.getMatches = getMatches;\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.CardDeck = void 0;\nvar uuid_1 = require(\"uuid\");\nvar lodash_1 = require(\"lodash\");\nvar models_1 = require(\"@creature-chess/models\");\nvar definitions_1 = require(\"../definitions\");\n// CARD_COST_CHANCES[2][5] gives the chance (/100) to roll a level 3 piece at level 6\nvar CARD_COST_CHANCES = [\n    [100, 70, 60, 50, 40, 33, 30, 24, 22, 19],\n    [0, 30, 35, 35, 35, 30, 30, 30, 30, 25],\n    [0, 0, 5, 15, 23, 30, 30, 30, 25, 25],\n    [0, 0, 0, 2, 5, 9, 12, 16, 20, 25],\n    [0, 0, 0, 0, 1, 3, 5, 7, 10, 14]\n];\nvar CARD_LEVEL_QUANTITIES = [45, 30, 25, 15, 10];\nvar canTakeCardAtCost = function (level, cost) {\n    var chance = CARD_COST_CHANCES[cost - 1][level - 1];\n    if (!chance) {\n        return false;\n    }\n    var roll = Math.floor(Math.random() * 100);\n    // roll is 0 - 100, but chance is out of 100\n    // so if chance is 30, roll must be under 30 to score\n    return roll <= chance;\n};\nvar BLESSED_HAND_CHANCE = [0, 0.1, 0.2, 0.15, 0.15, 0.23, 0.23, 0.1, 0.1, 0.1];\nvar isHandBlessed = function (level) { return (Math.floor(Math.random() * 100) * 0.01) <= BLESSED_HAND_CHANCE[level - 1]; };\nvar CardDeck = /** @class */ (function () {\n    function CardDeck(logger) {\n        var _this = this;\n        this.logger = logger;\n        this.deck = [\n            [], [], [], [], []\n        ];\n        definitions_1.getAllDefinitions().filter(function (d) { return d.cost; }).forEach(function (d) {\n            for (var count = 0; count < CARD_LEVEL_QUANTITIES[d.cost - 1]; count++) {\n                _this.addDefinition(d);\n            }\n        });\n        this.shuffle();\n    }\n    CardDeck.prototype.reroll = function (input, count, level, blessCandidates, excludeCards) {\n        if (excludeCards === void 0) { excludeCards = []; }\n        this.addCards(input);\n        this.shuffle();\n        return this.take(count, level, blessCandidates, excludeCards);\n    };\n    CardDeck.prototype.addCards = function (cards) {\n        var e_1, _a;\n        var cardsToAdd = cards.filter(function (card) { return card !== null; });\n        try {\n            for (var cardsToAdd_1 = __values(cardsToAdd), cardsToAdd_1_1 = cardsToAdd_1.next(); !cardsToAdd_1_1.done; cardsToAdd_1_1 = cardsToAdd_1.next()) {\n                var card = cardsToAdd_1_1.value;\n                this.getDeckForCost(card.cost).push(card);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (cardsToAdd_1_1 && !cardsToAdd_1_1.done && (_a = cardsToAdd_1[\"return\"])) _a.call(cardsToAdd_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.shuffle();\n    };\n    CardDeck.prototype.addPiece = function (piece) {\n        var definition = definitions_1.getDefinitionById(piece.definitionId);\n        if (!definition) {\n            return;\n        }\n        var cardCount = (piece.stage + 1) * models_1.PIECES_TO_EVOLVE;\n        for (var i = 0; i < cardCount; i++) {\n            this.addDefinition(definition);\n        }\n        this.shuffle();\n    };\n    CardDeck.prototype.addPieces = function (pieces) {\n        var e_2, _a;\n        try {\n            for (var pieces_1 = __values(pieces), pieces_1_1 = pieces_1.next(); !pieces_1_1.done; pieces_1_1 = pieces_1.next()) {\n                var piece = pieces_1_1.value;\n                this.addPiece(piece);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (pieces_1_1 && !pieces_1_1.done && (_a = pieces_1[\"return\"])) _a.call(pieces_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    CardDeck.prototype.shuffle = function () {\n        for (var i = 0; i < this.deck.length; i++) {\n            this.deck[i] = lodash_1.shuffle(this.deck[i]);\n        }\n    };\n    CardDeck.prototype.getDeckForCost = function (cost) {\n        return this.deck[cost - 1];\n    };\n    CardDeck.prototype.take = function (count, level, blessCandidates, excludeCards) {\n        if (excludeCards === void 0) { excludeCards = []; }\n        var output = [];\n        var blessedHand = isHandBlessed(level);\n        if (blessedHand) {\n            this.logger.info(\"Hand is blessed!\");\n        }\n        for (var i = 0; i < count; i++) {\n            var takenCard = this.takeCard(level, blessedHand, blessCandidates, excludeCards);\n            if (!takenCard) {\n                continue;\n            }\n            output.push(takenCard.card);\n            // clear blessed if it was used\n            if (takenCard.blessed) {\n                blessedHand = false;\n            }\n        }\n        return output;\n    };\n    CardDeck.prototype.takeCard = function (level, isBlessed, blessCandidates, excludeDefinitions) {\n        var e_3, _a;\n        if (isBlessed && blessCandidates.length > 0) {\n            var _loop_1 = function (candidate) {\n                var definition = definitions_1.getDefinitionById(candidate);\n                if (!definition) {\n                    return \"continue\";\n                }\n                var deck = this_1.getDeckForCost(definition.cost);\n                var index = deck.findIndex(function (c) { return c.definitionId === candidate; });\n                if (!index) {\n                    return \"continue\";\n                }\n                var _d = __read(deck.splice(index, 1), 1), card = _d[0];\n                if (card.definitionId !== candidate) {\n                    deck.push(card);\n                    this_1.logger.warn(\"- Definition \" + card.definitionId + \" mismatch, pulled for bless candidate \" + candidate);\n                    return \"continue\";\n                }\n                this_1.logger.info(\"- Bless pulled \" + definition.name + \", worth $\" + definition.cost + \"!\");\n                return { value: { card: card, blessed: true } };\n            };\n            var this_1 = this;\n            try {\n                for (var _b = __values(lodash_1.shuffle(blessCandidates)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var candidate = _c.value;\n                    var state_1 = _loop_1(candidate);\n                    if (typeof state_1 === \"object\")\n                        return state_1.value;\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            this.logger.warn(\"- No card pulled for bless\");\n        }\n        // start at 5 and work downwards\n        for (var cost = CARD_COST_CHANCES.length; cost >= 1; cost--) {\n            var roll = canTakeCardAtCost(level, cost);\n            if (!roll) {\n                continue;\n            }\n            // try 3 times to get a non-excluded card\n            // todo rethink this as below\n            for (var i = 0; i < 3; i++) {\n                var card = this.getDeckForCost(cost).pop();\n                if (card) {\n                    if (!excludeDefinitions.includes(card.definitionId)) {\n                        return { card: card, blessed: false };\n                    }\n                    this.addCards([card]);\n                }\n            }\n        }\n        this.logger.warn(\"Falling back for second pass to find card\");\n        // otherwise go back up and give them the first existing card\n        for (var cost = 1; cost <= CARD_COST_CHANCES.length; cost++) {\n            // try 3 times to get a non-excluded card\n            // todo rethink this as above\n            for (var i = 0; i < 3; i++) {\n                var card = this.getDeckForCost(cost).pop();\n                if (card) {\n                    if (!excludeDefinitions.includes(card.definitionId)) {\n                        return { card: card, blessed: false };\n                    }\n                    this.addCards([card]);\n                }\n            }\n        }\n        this.logger.error(\"No card found at all\");\n        return null;\n    };\n    CardDeck.prototype.addDefinition = function (definition) {\n        var card = {\n            id: uuid_1.v4(),\n            definitionId: definition.id,\n            cost: definition.cost,\n            name: definition.name,\n            type: definition.type,\n            \"class\": definition[\"class\"]\n        };\n        this.getDeckForCost(definition.cost).push(card);\n    };\n    return CardDeck;\n}());\nexports.CardDeck = CardDeck;\n","\"use strict\";\nexports.__esModule = true;\nexports.GameEventActionTypesArray = exports.playerRunReadyPhaseEvent = exports.playerBeforeReadyPhaseEvent = exports.playerRunPreparingPhaseEvent = exports.playerListChangedEvent = exports.gameFinishEvent = exports.gamePhaseStartedEvent = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nexports.gamePhaseStartedEvent = toolkit_1.createAction(\"gamePhaseStartedEvent\");\nexports.gameFinishEvent = toolkit_1.createAction(\"gameFinishEvent\");\nexports.playerListChangedEvent = toolkit_1.createAction(\"playerListChangedEvent\");\nexports.playerRunPreparingPhaseEvent = toolkit_1.createAction(\"playerRunPreparingPhaseEvent\");\nexports.playerBeforeReadyPhaseEvent = toolkit_1.createAction(\"playerBeforeReadyPhaseEvent\");\nexports.playerRunReadyPhaseEvent = toolkit_1.createAction(\"playerRunReadyPhaseEvent\");\nexports.GameEventActionTypesArray = [\n    exports.gameFinishEvent.toString(),\n    exports.gamePhaseStartedEvent.toString(),\n    exports.playerListChangedEvent.toString()\n];\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.Game = void 0;\nvar events_1 = require(\"events\");\nvar models_1 = require(\"@creature-chess/models\");\nvar opponentProvider_1 = require(\"./opponentProvider\");\nvar playerList_1 = require(\"./playerList\");\nvar cardDeck_1 = require(\"./cardDeck\");\nvar events_2 = require(\"./events\");\nvar store_1 = require(\"./store\");\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar sagas_1 = require(\"./sagas\");\nvar playerGameDeckSaga_1 = require(\"./player/playerGameDeckSaga\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nvar publicEvents_1 = require(\"./publicEvents\");\nvar finishGameEventKey = \"FINISH_GAME\";\nvar Game = /** @class */ (function () {\n    function Game(id, logger, options) {\n        var _this = this;\n        this.id = id;\n        this.logger = logger;\n        this.playerList = new playerList_1.PlayerList();\n        this.players = [];\n        this.events = new events_1.EventEmitter();\n        this.start = function (players) {\n            players.forEach(function (player) {\n                _this.players.push(player);\n                _this.playerList.addPlayer(player);\n                player.runSaga(playerGameDeckSaga_1.playerGameDeckSagaFactory, _this.deck);\n            });\n            _this.opponentProvider = new opponentProvider_1.OpponentProvider(players);\n            // todo this is ugly\n            _this.playerList.onUpdate(function (newPlayers) {\n                _this.getConnectedPlayers().forEach(function (player) {\n                    player.put(events_2.playerListChangedEvent({ players: newPlayers }));\n                });\n            });\n            var _a = store_1.createGameStore({\n                options: _this.options,\n                getMatchups: _this.opponentProvider.getMatchups,\n                players: {\n                    getAll: _this.getAllPlayers,\n                    getLiving: _this.getLivingPlayers,\n                    getById: _this.getPlayerById\n                },\n                logger: _this.logger\n            }), store = _a.store, sagaMiddleware = _a.sagaMiddleware;\n            _this.store = store;\n            // todo fix these ugly typings\n            sagaMiddleware.run(_this.gameTeardownSagaFactory());\n            sagaMiddleware.run(sagas_1.gameSaga);\n            sagaMiddleware.run(publicEvents_1.sendPublicEventsSaga);\n        };\n        this.getPlayerById = function (playerId) { return _this.players.find(function (p) { return p.select(selectors_1.getPlayerStatus) !== models_1.PlayerStatus.QUIT && p.id === playerId; }) || null; };\n        this.getConnectedPlayers = function () { return _this.players.filter(function (p) { return p.select(selectors_1.getPlayerStatus) !== models_1.PlayerStatus.QUIT; }); };\n        this.getRoundInfo = function () { return _this.store.getState().roundInfo; };\n        this.getPlayerListPlayers = function () { return _this.playerList.getValue(); };\n        this.gameTeardownSagaFactory = function () {\n            var broadcast = function (event) {\n                _this.getConnectedPlayers().forEach(function (player) {\n                    player.put(event);\n                });\n                _this.events.emit(finishGameEventKey, event.payload.winnerId);\n            };\n            var teardown = function () {\n                // todo this is ugly\n                _this.opponentProvider = null;\n                _this.deck = null;\n                _this.playerList.deconstructor();\n                _this.playerList = null;\n                _this.events.removeAllListeners();\n                _this.events = null;\n            };\n            return function () {\n                var event;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, effects_1.take(events_2.gameFinishEvent.toString())];\n                        case 1:\n                            event = _a.sent();\n                            broadcast(event);\n                            teardown();\n                            return [2 /*return*/];\n                    }\n                });\n            };\n        };\n        this.getAllPlayers = function () { return _this.players; };\n        this.getLivingPlayers = function () {\n            return _this.players.filter(function (p) {\n                return p.select(selectors_1.getPlayerStatus) !== models_1.PlayerStatus.QUIT\n                    && p.select(selectors_1.isPlayerAlive);\n            });\n        };\n        this.options = models_1.getOptions(options);\n        this.deck = new cardDeck_1.CardDeck(this.logger);\n    }\n    Game.prototype.onFinish = function (fn) {\n        this.events.on(finishGameEventKey, fn);\n    };\n    return Game;\n}());\nexports.Game = Game;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.gameLoopSaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar phases_1 = require(\"./phases\");\nvar gameLoopSaga = function () {\n    var players, logger, winner;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.getContext(\"players\")];\n            case 1:\n                players = _a.sent();\n                return [4 /*yield*/, effects_1.getContext(\"logger\")];\n            case 2:\n                logger = _a.sent();\n                _a.label = 3;\n            case 3:\n                if (!true) return [3 /*break*/, 7];\n                return [4 /*yield*/, effects_1.call(phases_1.runPreparingPhase)];\n            case 4:\n                _a.sent();\n                return [4 /*yield*/, effects_1.call(phases_1.runReadyPhase)];\n            case 5:\n                _a.sent();\n                return [4 /*yield*/, effects_1.call(phases_1.runPlayingPhase)];\n            case 6:\n                _a.sent();\n                if (players.getLiving().length < 2) {\n                    return [3 /*break*/, 7];\n                }\n                return [3 /*break*/, 3];\n            case 7:\n                winner = players.getLiving()[0];\n                logger.info(\"Game finished, won by \" + winner.getVariable(function (v) { return v.name; }));\n                return [2 /*return*/, {\n                        winnerId: winner.id\n                    }];\n        }\n    });\n};\nexports.gameLoopSaga = gameLoopSaga;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.runReadyPhase = exports.runPreparingPhase = exports.runPlayingPhase = void 0;\nvar playing_1 = require(\"./playing\");\n__createBinding(exports, playing_1, \"runPlayingPhase\");\nvar preparing_1 = require(\"./preparing\");\n__createBinding(exports, preparing_1, \"runPreparingPhase\");\nvar ready_1 = require(\"./ready\");\n__createBinding(exports, ready_1, \"runReadyPhase\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.runPlayingPhase = void 0;\nvar pDefer = require(\"p-defer\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar delay_1 = require(\"delay\");\nvar models_1 = require(\"@creature-chess/models\");\nvar roundInfo_1 = require(\"../../roundInfo\");\nvar selectors_1 = require(\"../../../features/match/selectors\");\nvar events_1 = require(\"../../../entities/player/events\");\nvar waitForFinishMatchSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.take(events_1.playerFinishMatchEvent.toString()))];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nvar runPlayingPhase = function () {\n    var options, players, battleTimeoutDeferred, phase, startedAt, livingPlayers, matches, uniqueMatches, finishMatchTasks;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"options\"))];\n            case 1:\n                options = _a.sent();\n                return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"players\"))];\n            case 2:\n                players = _a.sent();\n                battleTimeoutDeferred = pDefer();\n                phase = models_1.GamePhase.PLAYING;\n                delay_1[\"default\"](options.phaseLengths[models_1.GamePhase.PLAYING] * 1000).then(function () { return battleTimeoutDeferred.resolve(); });\n                startedAt = Date.now() / 1000;\n                return [4 /*yield*/, typed_redux_saga_1.put(roundInfo_1.RoundInfoCommands.setRoundInfoCommand({ phase: phase, startedAt: startedAt }))];\n            case 3:\n                _a.sent();\n                livingPlayers = players.getLiving();\n                return [5 /*yield**/, __values(typed_redux_saga_1.call(selectors_1.getMatches, livingPlayers))];\n            case 4:\n                matches = _a.sent();\n                uniqueMatches = __spreadArray([], __read(new Set(matches.filter(function (match) { return match !== null; }))));\n                finishMatchTasks = livingPlayers.map(function (p) { return p.runSaga(waitForFinishMatchSaga); });\n                uniqueMatches.forEach(function (m) { return m.fight(battleTimeoutDeferred.promise); });\n                return [4 /*yield*/, Promise.all(finishMatchTasks.map(function (t) { return t.toPromise(); }))];\n            case 5:\n                _a.sent();\n                // some battles go right up to the end, so it's nice to have a delay\n                // rather than jumping straight into the next phase\n                return [4 /*yield*/, delay_1[\"default\"](5000)];\n            case 6:\n                // some battles go right up to the end, so it's nice to have a delay\n                // rather than jumping straight into the next phase\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.runPlayingPhase = runPlayingPhase;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.runPreparingPhase = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar models_1 = require(\"@creature-chess/models\");\nvar roundInfo_1 = require(\"../../roundInfo\");\nvar readyNotifier_1 = require(\"../../readyNotifier\");\nvar events_1 = require(\"../../events\");\nvar runPreparingPhase = function () {\n    var options, players, round, phase, startedAt, notifier;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.getContext(\"options\")];\n            case 1:\n                options = _a.sent();\n                return [4 /*yield*/, effects_1.getContext(\"players\")];\n            case 2:\n                players = _a.sent();\n                return [4 /*yield*/, effects_1.select(function (state) { return state.roundInfo.round; })];\n            case 3:\n                round = _a.sent();\n                phase = models_1.GamePhase.PREPARING;\n                startedAt = Date.now() / 1000;\n                // todo put gamePhaseStartedEvent here?\n                return [4 /*yield*/, effects_1.put(roundInfo_1.RoundInfoCommands.setRoundInfoCommand({ phase: phase, startedAt: startedAt, round: round + 1 }))];\n            case 4:\n                // todo put gamePhaseStartedEvent here?\n                _a.sent();\n                players.getLiving().forEach(function (p) { return p.put(events_1.playerRunPreparingPhaseEvent()); });\n                notifier = readyNotifier_1.readyNotifier(players.getLiving());\n                return [4 /*yield*/, effects_1.race([\n                        notifier.promise,\n                        effects_1.delay(options.phaseLengths[models_1.GamePhase.PREPARING] * 1000)\n                    ])];\n            case 5:\n                _a.sent();\n                notifier.dispose();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.runPreparingPhase = runPreparingPhase;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.runReadyPhase = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar models_1 = require(\"@creature-chess/models\");\nvar roundInfo_1 = require(\"../../roundInfo\");\nvar match_1 = require(\"../../match\");\nvar events_1 = require(\"../../events\");\nvar runReadyPhase = function () {\n    var options, players, getMatchups, matchups, phase, startedAt;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.getContext(\"options\")];\n            case 1:\n                options = _a.sent();\n                return [4 /*yield*/, effects_1.getContext(\"players\")];\n            case 2:\n                players = _a.sent();\n                return [4 /*yield*/, effects_1.getContext(\"getMatchups\")];\n            case 3:\n                getMatchups = _a.sent();\n                // todo turn this into a `call` so it waits for all players\n                players.getAll().forEach(function (p) { return p.put(events_1.playerBeforeReadyPhaseEvent()); });\n                return [4 /*yield*/, effects_1.delay(500)];\n            case 4:\n                _a.sent();\n                matchups = getMatchups();\n                matchups.forEach(function (_a) {\n                    var homeId = _a.homeId, awayId = _a.awayId, awayIsClone = _a.awayIsClone;\n                    var homePlayer = players.getById(homeId);\n                    var awayPlayer = players.getById(awayId);\n                    // todo add logging here\n                    if (!homePlayer || !awayPlayer) {\n                        return;\n                    }\n                    var match = new match_1.Match(homePlayer, awayPlayer, awayIsClone, options);\n                    homePlayer.put(events_1.playerRunReadyPhaseEvent({ match: match }));\n                    if (!awayIsClone) {\n                        awayPlayer.put(events_1.playerRunReadyPhaseEvent({ match: match }));\n                    }\n                });\n                phase = models_1.GamePhase.READY;\n                startedAt = Date.now() / 1000;\n                return [4 /*yield*/, effects_1.put(roundInfo_1.RoundInfoCommands.setRoundInfoCommand({ phase: phase, startedAt: startedAt }))];\n            case 5:\n                _a.sent();\n                return [4 /*yield*/, effects_1.delay(options.phaseLengths[models_1.GamePhase.READY] * 1000)];\n            case 6:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.runReadyPhase = runReadyPhase;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Game = exports.GameEvents = exports.RoundInfoCommands = exports.roundInfoReducer = void 0;\nvar roundInfo_1 = require(\"./roundInfo\");\n__createBinding(exports, roundInfo_1, \"roundInfoReducer\");\n__createBinding(exports, roundInfo_1, \"RoundInfoCommands\");\nexports.GameEvents = require(\"./events\");\nvar game_1 = require(\"./game\");\n__createBinding(exports, game_1, \"Game\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.Match = void 0;\nvar pDefer = require(\"p-defer\");\nvar uuid_1 = require(\"uuid\");\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar redux_saga_1 = require(\"redux-saga\");\nvar redux_1 = require(\"redux\");\nvar board_1 = require(\"@shoki/board\");\nvar battle_1 = require(\"@creature-chess/battle\");\nvar models_1 = require(\"@creature-chess/models\");\nvar effects_2 = require(\"redux-saga/effects\");\nvar delay = require(\"delay\");\nvar player_1 = require(\"../entities/player\");\nvar events_1 = require(\"../entities/player/events\");\nvar turnReducer = function (state, event) {\n    if (state === void 0) { state = 0; }\n    return (event.type === battle_1.BattleEvents.BATTLE_TURN_EVENT ? event.payload.turn : state);\n};\nvar Match = /** @class */ (function () {\n    function Match(home, away, awayIsClone, gameOptions) {\n        this.home = home;\n        this.away = away;\n        this.awayIsClone = awayIsClone;\n        this.boardId = uuid_1.v4();\n        this.board = board_1.createBoardSlice(this.boardId, models_1.GRID_SIZE);\n        this.serverFinishedMatch = pDefer();\n        this.clientFinishedMatchHome = pDefer();\n        this.clientFinishedMatchAway = pDefer();\n        this.store = this.createStore(gameOptions);\n        var mergedBoard = board_1.mergeBoards(this.boardId, home.select(player_1.PlayerStateSelectors.getPlayerBoard), away.select(player_1.PlayerStateSelectors.getPlayerBoard));\n        var board = __assign(__assign({}, mergedBoard), { pieces: Object.entries(mergedBoard.pieces).reduce(function (acc, _a) {\n                var _b;\n                var _c = __read(_a, 2), id = _c[0], piece = _c[1];\n                return (__assign(__assign({}, acc), (_b = {}, _b[id] = __assign(__assign({}, piece), { facingAway: (piece.ownerId === home.id) }), _b)));\n            }, {}) });\n        this.store.dispatch(this.board.commands.setBoardPiecesCommand(board));\n    }\n    Match.prototype.onClientFinishMatch = function (playerId) {\n        if (playerId === this.home.id) {\n            this.clientFinishedMatchHome.resolve();\n        }\n        else if (playerId === this.away.id) {\n            this.clientFinishedMatchAway.resolve();\n        }\n    };\n    Match.prototype.getBoardForPlayer = function (playerId) {\n        var board = this.store.getState().board;\n        // rotate the board for the away player, so that their pieces are shown on their own side\n        if (playerId === this.away.id) {\n            var rotatedBoard = board_1.rotatePiecesAboutCenter(board);\n            // todo improve this\n            var newState = __assign(__assign({}, rotatedBoard), { pieces: Object.entries(rotatedBoard.pieces).reduce(function (acc, _a) {\n                    var _b;\n                    var _c = __read(_a, 2), id = _c[0], piece = _c[1];\n                    return (__assign(__assign({}, acc), (_b = {}, _b[id] = __assign(__assign({}, piece), { facingAway: !piece.facingAway }), _b)));\n                }, {}) });\n            return newState;\n        }\n        return board;\n    };\n    Match.prototype.getTurn = function () {\n        return this.store.getState().turn;\n    };\n    Match.prototype.getFinalBoard = function () {\n        return this.finalBoard;\n    };\n    Match.prototype.fight = function (battleTimeout) {\n        return __awaiter(this, void 0, void 0, function () {\n            var survivingPieces, surviving, homeScore, awayScore;\n            var _this_1 = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.store.dispatch(battle_1.startBattle());\n                        return [4 /*yield*/, Promise.race([\n                                battleTimeout,\n                                Promise.all([\n                                    this.serverFinishedMatch.promise,\n                                    this.clientFinishedMatchHome.promise,\n                                    this.clientFinishedMatchAway.promise\n                                ])\n                            ])];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, delay(500)];\n                    case 2:\n                        _a.sent();\n                        this.finalBoard = this.store.getState().board;\n                        survivingPieces = board_1.BoardSelectors.getAllPieces(this.finalBoard).filter(function (p) { return p.currentHealth > 0; });\n                        surviving = {\n                            home: survivingPieces.filter(function (p) { return p.ownerId === _this_1.home.id; }),\n                            away: survivingPieces.filter(function (p) { return p.ownerId === _this_1.away.id; })\n                        };\n                        homeScore = surviving.home.length;\n                        awayScore = surviving.away.length;\n                        this.home.put(events_1.playerFinishMatchEvent({ homeScore: homeScore, awayScore: awayScore, isHomePlayer: true }));\n                        if (!this.awayIsClone) {\n                            this.away.put(events_1.playerFinishMatchEvent({ homeScore: homeScore, awayScore: awayScore, isHomePlayer: false }));\n                        }\n                        return [2 /*return*/, this.finalBoard];\n                }\n            });\n        });\n    };\n    Match.prototype.createStore = function (gameOptions) {\n        // required to preserve inside the generator\n        // eslint-disable-next-line no-underscore-dangle\n        var _this = this;\n        var rootSaga = function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, effects_1.all([\n                            effects_2.call(battle_1.battleSagaFactory(function (state) { return state.board; }), gameOptions, _this.board),\n                            effects_1.takeEvery(battle_1.BattleEvents.BATTLE_FINISH_EVENT, function () {\n                                return __generator(this, function (_a) {\n                                    _this.onServerFinishMatch();\n                                    return [2 /*return*/];\n                                });\n                            }),\n                            effects_1.takeLatest(battle_1.BattleEvents.BATTLE_TURN_EVENT, function (_a) {\n                                var board = _a.payload.board;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0: return [4 /*yield*/, effects_1.put(_this.board.commands.setBoardPiecesCommand({\n                                                pieces: board.pieces,\n                                                piecePositions: board.piecePositions,\n                                                size: undefined // todo improve this\n                                            }))];\n                                        case 1:\n                                            _b.sent();\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            })\n                        ])];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        };\n        var sagaMiddleware = redux_saga_1[\"default\"]();\n        var store = redux_1.createStore(redux_1.combineReducers({\n            board: this.board.boardReducer,\n            turn: turnReducer\n        }), redux_1.applyMiddleware(sagaMiddleware));\n        sagaMiddleware.run(rootSaga);\n        return store;\n    };\n    Match.prototype.onServerFinishMatch = function () {\n        this.serverFinishedMatch.resolve();\n    };\n    return Match;\n}());\nexports.Match = Match;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.OpponentProvider = void 0;\nvar lodash_1 = require(\"lodash\");\nvar models_1 = require(\"@creature-chess/models\");\nvar player_1 = require(\"../entities/player\");\nvar randomFromArray = function (array) { return array[Math.floor(Math.random() * array.length)]; };\nvar OpponentProvider = /** @class */ (function () {\n    function OpponentProvider(players) {\n        var _this = this;\n        this.remainingRotations = null;\n        this.rotation = 0;\n        this.lastLivingPlayerCount = 0;\n        this.lastOddMatchupHomeId = null;\n        this.lastOddMatchupAwayId = null;\n        this.getMatchups = function () {\n            var livingPlayers = _this.getLivingPlayers();\n            var livingPlayerCount = livingPlayers.length;\n            if (livingPlayerCount !== _this.lastLivingPlayerCount) {\n                _this.lastLivingPlayerCount = livingPlayerCount;\n                _this.remainingRotations = null;\n            }\n            if (_this.remainingRotations === null || _this.remainingRotations.length === 0) {\n                _this.generateRotations(livingPlayers);\n            }\n            var isEven = livingPlayers.length % 2 === 0;\n            var output = isEven ? _this.getMatchupsEven(livingPlayers) : _this.getMatchupsOdd(livingPlayers);\n            _this.updateRotation();\n            return output;\n        };\n        this.getLivingPlayers = function () { return players.filter(function (p) {\n            return p.select(player_1.PlayerStateSelectors.getPlayerStatus) !== models_1.PlayerStatus.QUIT && p.select(player_1.PlayerStateSelectors.isPlayerAlive);\n        }); };\n    }\n    OpponentProvider.prototype.getMatchupsEven = function (livingPlayers) {\n        var matchups = [];\n        var remainingPlayerIds = livingPlayers.map(function (p) { return p.id; });\n        var _loop_1 = function () {\n            // increment rotation by 1 if it would pick player 0\n            var rotation = this_1.rotation % remainingPlayerIds.length === 0\n                ? this_1.rotation + 1\n                : this_1.rotation;\n            var playerA = remainingPlayerIds[0];\n            var playerB = remainingPlayerIds[rotation % remainingPlayerIds.length];\n            remainingPlayerIds = remainingPlayerIds.filter(function (id) { return id !== playerA && id !== playerB; });\n            // dice roll\n            var playerAIsHome = (Math.floor(Math.random() * Math.floor(2))) === 0;\n            if (playerAIsHome) {\n                matchups.push({ homeId: playerA, awayId: playerB, awayIsClone: false });\n            }\n            else {\n                matchups.push({ homeId: playerB, awayId: playerA, awayIsClone: false });\n            }\n        };\n        var this_1 = this;\n        while (remainingPlayerIds.length > 0) {\n            _loop_1();\n        }\n        return matchups;\n    };\n    OpponentProvider.prototype.getMatchupsOdd = function (livingPlayers) {\n        var cloneMatchup = this.getOddCloneMatchup(livingPlayers);\n        var otherPlayers = livingPlayers.filter(function (_a) {\n            var id = _a.id;\n            return id !== cloneMatchup.homeId;\n        });\n        return __spreadArray([\n            cloneMatchup\n        ], __read(this.getMatchupsEven(otherPlayers)));\n    };\n    OpponentProvider.prototype.getOddCloneMatchup = function (livingPlayers) {\n        var _this = this;\n        var potentialHomePlayers = livingPlayers.filter(function (_a) {\n            var id = _a.id;\n            return id !== _this.lastOddMatchupHomeId || _this.lastOddMatchupHomeId === null;\n        });\n        var home = randomFromArray(potentialHomePlayers);\n        var potentialAwayPlayers = livingPlayers.filter(function (_a) {\n            var id = _a.id;\n            return id !== home.id && (id !== _this.lastOddMatchupAwayId || _this.lastOddMatchupAwayId === null);\n        });\n        var away = randomFromArray(potentialAwayPlayers);\n        this.lastOddMatchupHomeId = home.id;\n        this.lastOddMatchupAwayId = away.id;\n        return {\n            homeId: home.id,\n            awayId: away.id,\n            awayIsClone: true\n        };\n    };\n    OpponentProvider.prototype.generateRotations = function (livingPlayers) {\n        var rotations = [];\n        // in head-to-head rotation,\n        // a 3 player game will have rotations: [ 1, 2 ]\n        for (var i = 1; i < livingPlayers.length; i++) {\n            rotations.push(i);\n        }\n        this.remainingRotations = lodash_1.shuffle(rotations);\n        this.updateRotation();\n    };\n    OpponentProvider.prototype.updateRotation = function () {\n        if (!this.remainingRotations) {\n            return;\n        }\n        var chosen = randomFromArray(this.remainingRotations);\n        this.remainingRotations = this.remainingRotations.filter(function (i) { return i !== chosen; });\n        this.rotation = chosen;\n    };\n    return OpponentProvider;\n}());\nexports.OpponentProvider = OpponentProvider;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.playerGameDeckSagaFactory = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar selectors_1 = require(\"../../entities/player/selectors\");\nvar cardShop_1 = require(\"../../entities/player/state/cardShop\");\nvar pieceSelectors_1 = require(\"../../player/pieceSelectors\");\nvar selectors_2 = require(\"../../entities/player/state/selectors\");\nvar player_1 = require(\"../../entities/player\");\nvar events_1 = require(\"../../entities/player/events\");\nvar playerGameDeckSagaFactory = function (deck) {\n    var boardSlice, benchSlice, pullNewCards, addToDeck;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(selectors_1.getBoardSlice())];\n            case 1:\n                boardSlice = _a.sent();\n                return [5 /*yield**/, __values(selectors_1.getBenchSlice())];\n            case 2:\n                benchSlice = _a.sent();\n                pullNewCards = function (oldCards, level, excludeIds, blessCandidateIds) { return deck.reroll(oldCards, 5, level, blessCandidateIds, excludeIds); };\n                addToDeck = function (pieces, cards) {\n                    var e_1, _a;\n                    try {\n                        for (var pieces_1 = __values(pieces), pieces_1_1 = pieces_1.next(); !pieces_1_1.done; pieces_1_1 = pieces_1.next()) {\n                            var piece = pieces_1_1.value;\n                            deck.addPiece(piece);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (pieces_1_1 && !pieces_1_1.done && (_a = pieces_1[\"return\"])) _a.call(pieces_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    deck.addCards(cards);\n                    deck.shuffle();\n                };\n                return [4 /*yield*/, effects_1.all([\n                        effects_1.takeEvery(events_1.playerDeathEvent.toString(), function () {\n                            var cards, pieces, remainingCards;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_2.getPlayerCards))];\n                                    case 1:\n                                        cards = _a.sent();\n                                        return [5 /*yield**/, __values(typed_redux_saga_1.select(pieceSelectors_1.getAllPieces))];\n                                    case 2:\n                                        pieces = _a.sent();\n                                        remainingCards = cards.filter(function (card) { return card !== null; });\n                                        return [4 /*yield*/, effects_1.put(cardShop_1.updateCardsCommand([]))];\n                                    case 3:\n                                        _a.sent();\n                                        return [4 /*yield*/, effects_1.put(boardSlice.commands.setBoardPiecesCommand({ pieces: {}, piecePositions: {} }))];\n                                    case 4:\n                                        _a.sent();\n                                        return [4 /*yield*/, effects_1.put(benchSlice.commands.setBoardPiecesCommand({ pieces: {}, piecePositions: {} }))];\n                                    case 5:\n                                        _a.sent();\n                                        addToDeck(pieces, remainingCards);\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }),\n                        effects_1.takeEvery(events_1.afterRerollCardsEvent.toString(), function () {\n                            var state, cards, level, threeStarBoardPieces, threeStarBenchPieces, excludeIds, blessCandidateIds, remainingCards, newCards;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [5 /*yield**/, __values(typed_redux_saga_1.select(function (s) { return s; }))];\n                                    case 1:\n                                        state = _a.sent();\n                                        if (!selectors_2.isPlayerAlive(state)) {\n                                            return [2 /*return*/];\n                                        }\n                                        cards = state.cardShop.cards, level = state.playerInfo.level;\n                                        threeStarBoardPieces = pieceSelectors_1.getPiecesForStage(state.board, 2);\n                                        threeStarBenchPieces = pieceSelectors_1.getPiecesForStage(state.bench, 2);\n                                        excludeIds = __spreadArray(__spreadArray([], __read(threeStarBoardPieces)), __read(threeStarBenchPieces)).map(function (p) { return p.definitionId; });\n                                        blessCandidateIds = __spreadArray([], __read(new Set(pieceSelectors_1.getPiecesExceptStage(state.board, 2).map(function (p) { return p.definitionId; }))));\n                                        remainingCards = cards.filter(function (card) { return card !== null; });\n                                        newCards = pullNewCards(remainingCards, level, excludeIds, blessCandidateIds);\n                                        return [4 /*yield*/, effects_1.put(player_1.PlayerCommands.updateCardsCommand(newCards))];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }),\n                        effects_1.takeEvery(events_1.afterSellPieceEvent.toString(), function (_a) {\n                            var piece = _a.payload.piece;\n                            return __generator(this, function (_b) {\n                                // when a player sells a piece, add it back to the deck\n                                deck.addPiece(piece);\n                                deck.shuffle();\n                                return [2 /*return*/];\n                            });\n                        })\n                    ])];\n            case 3:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerGameDeckSagaFactory = playerGameDeckSagaFactory;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.PlayerList = void 0;\nvar events_1 = require(\"events\");\nvar models_1 = require(\"@creature-chess/models\");\nvar playerPropertyUpdates_1 = require(\"./playerPropertyUpdates\");\nvar player_1 = require(\"../entities/player\");\nvar debounce = function (func, wait) {\n    var timeout;\n    return function () {\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            timeout = null;\n            func();\n        }, wait);\n    };\n};\nvar PlayerListEvents;\n(function (PlayerListEvents) {\n    PlayerListEvents[\"UPDATE\"] = \"UPDATE\";\n})(PlayerListEvents || (PlayerListEvents = {}));\nvar sortPlayers = function (a, b) {\n    var SORT_A_FIRST = -1;\n    var SORT_A_SECOND = 1;\n    if (a.sortValues.health > b.sortValues.health) {\n        return SORT_A_FIRST;\n    }\n    if (a.sortValues.health < b.sortValues.health) {\n        return SORT_A_SECOND;\n    }\n    if (!a.sortValues.hasQuit && b.sortValues.hasQuit) {\n        return SORT_A_FIRST;\n    }\n    if (a.sortValues.hasQuit && !b.sortValues.hasQuit) {\n        return SORT_A_SECOND;\n    }\n    if (b.position === null) {\n        return SORT_A_FIRST;\n    }\n    if (a.position === null) {\n        return SORT_A_SECOND;\n    }\n    // if A is coming from a higher position than B, it should come first\n    if (a.position < b.position) {\n        return SORT_A_FIRST;\n    }\n    if (a.position > b.position) {\n        return SORT_A_SECOND;\n    }\n    return 0;\n};\nvar PlayerList = /** @class */ (function () {\n    function PlayerList() {\n        var _this = this;\n        this.players = [];\n        this.gamePlayers = {};\n        this.events = new events_1.EventEmitter();\n        this.emitUpdate = debounce(function () {\n            // incase the debounce lands after deconstructor is called\n            // todo cancel this manually\n            if (!_this.events) {\n                return;\n            }\n            _this.events.emit(PlayerListEvents.UPDATE, _this.getValue());\n        }, 500);\n        this.getValue = function () { return _this.players.map(function (_a) {\n            var id = _a.id;\n            var player = _this.gamePlayers[id];\n            var streak = player.select(player_1.PlayerStateSelectors.getPlayerStreak);\n            return {\n                id: player.id,\n                name: player.getVariable(function (variables) { return variables.name; }),\n                health: player.select(player_1.PlayerStateSelectors.getPlayerHealth),\n                ready: player.select(player_1.PlayerStateSelectors.isPlayerReady),\n                level: player.select(player_1.PlayerStateSelectors.getPlayerLevel),\n                money: player.select(player_1.PlayerStateSelectors.getPlayerMoney),\n                streakType: streak.type,\n                streakAmount: streak.amount,\n                battle: player.select(player_1.PlayerStateSelectors.getPlayerBattle),\n                status: player.select(player_1.PlayerStateSelectors.getPlayerStatus),\n                profile: player.getVariable(function (variables) { return variables.profile; })\n            };\n        }); };\n    }\n    PlayerList.prototype.deconstructor = function () {\n        this.events.removeAllListeners();\n        // todo this is ugly\n        this.events = null;\n    };\n    PlayerList.prototype.onUpdate = function (fn) {\n        this.events.on(PlayerListEvents.UPDATE, fn);\n    };\n    PlayerList.prototype.addPlayer = function (player) {\n        var _this = this;\n        this.players.push({\n            id: player.id,\n            position: null,\n            sortValues: {\n                health: player.select(player_1.PlayerStateSelectors.getPlayerHealth),\n                hasQuit: player.select(player_1.PlayerStateSelectors.getPlayerStatus) === models_1.PlayerStatus.QUIT\n            }\n        });\n        this.gamePlayers[player.id] = player;\n        playerPropertyUpdates_1.listenForPropertyUpdates(player, {\n            health: function (health) { return _this.updateSortedValue(player.id, { health: health }); },\n            status: function (status) { return _this.updateSortedValue(player.id, { hasQuit: status === models_1.PlayerStatus.QUIT }); },\n            streak: this.emitUpdate,\n            battle: this.emitUpdate,\n            ready: this.emitUpdate\n        });\n    };\n    PlayerList.prototype.updateSortedValue = function (id, patch) {\n        var index = this.players.findIndex(function (p) { return p.id === id; });\n        if (index === -1) {\n            return;\n        }\n        this.players[index] = __assign(__assign({}, this.players[index]), { sortValues: __assign(__assign({}, this.players[index].sortValues), patch) });\n        var newPlayers = __spreadArray([], __read(this.players));\n        newPlayers.sort(sortPlayers);\n        this.players = newPlayers.reduce(function (acc, cur, i) {\n            if (cur.position === i + 1) {\n                return __spreadArray(__spreadArray([], __read(acc)), [cur]);\n            }\n            return __spreadArray(__spreadArray([], __read(acc)), [\n                __assign(__assign({}, cur), { position: i + 1 })\n            ]);\n        }, []);\n        this.emitUpdate();\n    };\n    return PlayerList;\n}());\nexports.PlayerList = PlayerList;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.listenForPropertyUpdates = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar player_1 = require(\"../entities/player\");\n// todo use sagas properly here\nvar listenForPropertyUpdates = function (player, _a) {\n    var emitHealth = _a.health, emitStreak = _a.streak, emitStatus = _a.status, emitBattle = _a.battle, emitReady = _a.ready;\n    var saga = player.runSaga(function () {\n        var sagas, initialHealth, initialStreak, initialStatus, initialBattle, initialReady;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    sagas = [];\n                    if (!emitHealth) return [3 /*break*/, 2];\n                    return [5 /*yield**/, __values(typed_redux_saga_1.select(player_1.PlayerStateSelectors.getPlayerHealth))];\n                case 1:\n                    initialHealth = _a.sent();\n                    emitHealth(initialHealth);\n                    sagas.push(effects_1.takeLatest(player_1.PlayerCommands.updateHealthCommand.toString(), function (_a) {\n                        var health = _a.payload;\n                        return __generator(this, function (_b) {\n                            emitHealth(health);\n                            return [2 /*return*/];\n                        });\n                    }));\n                    _a.label = 2;\n                case 2:\n                    if (!emitStreak) return [3 /*break*/, 4];\n                    return [5 /*yield**/, __values(typed_redux_saga_1.select(player_1.PlayerStateSelectors.getPlayerStreak))];\n                case 3:\n                    initialStreak = _a.sent();\n                    emitStreak(initialStreak);\n                    sagas.push(effects_1.takeLatest(player_1.PlayerCommands.updateStreakCommand.toString(), function (_a) {\n                        var streak = _a.payload;\n                        return __generator(this, function (_b) {\n                            emitStreak(streak);\n                            return [2 /*return*/];\n                        });\n                    }));\n                    _a.label = 4;\n                case 4:\n                    if (!emitStatus) return [3 /*break*/, 6];\n                    return [5 /*yield**/, __values(typed_redux_saga_1.select(player_1.PlayerStateSelectors.getPlayerStatus))];\n                case 5:\n                    initialStatus = _a.sent();\n                    emitStatus(initialStatus);\n                    sagas.push(effects_1.takeLatest(player_1.PlayerCommands.updateStatusCommand.toString(), function (_a) {\n                        var status = _a.payload;\n                        return __generator(this, function (_b) {\n                            emitStatus(status);\n                            return [2 /*return*/];\n                        });\n                    }));\n                    _a.label = 6;\n                case 6:\n                    if (!emitBattle) return [3 /*break*/, 8];\n                    return [5 /*yield**/, __values(typed_redux_saga_1.select(player_1.PlayerStateSelectors.getPlayerBattle))];\n                case 7:\n                    initialBattle = _a.sent();\n                    emitBattle(initialBattle);\n                    sagas.push(effects_1.takeLatest(player_1.PlayerCommands.updateBattleCommand.toString(), function (_a) {\n                        var battle = _a.payload;\n                        return __generator(this, function (_b) {\n                            emitBattle(battle);\n                            return [2 /*return*/];\n                        });\n                    }));\n                    _a.label = 8;\n                case 8:\n                    if (!emitReady) return [3 /*break*/, 10];\n                    return [5 /*yield**/, __values(typed_redux_saga_1.select(player_1.PlayerStateSelectors.isPlayerReady))];\n                case 9:\n                    initialReady = _a.sent();\n                    emitReady(initialReady);\n                    sagas.push(effects_1.takeLatest(player_1.PlayerCommands.updateReadyCommand.toString(), function (_a) {\n                        var ready = _a.payload;\n                        return __generator(this, function (_b) {\n                            emitReady(ready);\n                            return [2 /*return*/];\n                        });\n                    }));\n                    _a.label = 10;\n                case 10: return [4 /*yield*/, effects_1.all(sagas)];\n                case 11:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n    return function () { return saga.cancel(); };\n};\nexports.listenForPropertyUpdates = listenForPropertyUpdates;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.sendPublicEventsSaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nvar events_1 = require(\"./events\");\nvar roundInfo_1 = require(\"./roundInfo\");\nvar sendPublicEventsSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeLatest(roundInfo_1.RoundInfoCommands.setRoundInfoCommand.toString(), function (_a) {\n                    var getAll;\n                    var payload = _a.payload;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0: return [4 /*yield*/, effects_1.getContext(\"players\")];\n                            case 1:\n                                getAll = (_b.sent()).getAll;\n                                getAll().filter(function (p) { return p.select(selectors_1.isNotQuit); }).forEach(function (player) {\n                                    player.put(events_1.gamePhaseStartedEvent(payload));\n                                });\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.sendPublicEventsSaga = sendPublicEventsSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.readyNotifier = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar selectors_1 = require(\"../../entities/player/state/selectors\");\nvar playerActions_1 = require(\"../../playerActions\");\nvar playerPropertyUpdates_1 = require(\"../playerPropertyUpdates\");\nvar limitedQueue_1 = require(\"./limitedQueue\");\nvar readyNotifier = function (livingPlayers) {\n    var queue = limitedQueue_1.limitedQueue(livingPlayers.length);\n    var disposePlayerFns = livingPlayers.map(function (player) {\n        var disposeReady = playerPropertyUpdates_1.listenForPropertyUpdates(player, {\n            ready: function (ready) {\n                if (ready) {\n                    queue.add(player.id);\n                }\n            }\n        });\n        var watchQuitTask = player.runSaga(function () {\n            var isAlive, isReady;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, effects_1.take(playerActions_1.quitGamePlayerAction.toString())];\n                    case 1:\n                        _a.sent();\n                        return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerAlive))];\n                    case 2:\n                        isAlive = _a.sent();\n                        return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerReady))];\n                    case 3:\n                        isReady = _a.sent();\n                        if (isAlive && !isReady) {\n                            queue.add(player.id);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n        return function () {\n            disposeReady();\n            watchQuitTask.cancel();\n        };\n    });\n    var deferred = limitedQueue_1.deferLimitedQueue(queue);\n    return {\n        promise: deferred.promise,\n        dispose: function () {\n            disposePlayerFns.forEach(function (fn) { return fn(); });\n            deferred.dispose();\n        }\n    };\n};\nexports.readyNotifier = readyNotifier;\n","\"use strict\";\nexports.__esModule = true;\nexports.deferLimitedQueue = exports.limitedQueue = void 0;\nvar events_1 = require(\"events\");\nvar pDefer = require(\"p-defer\");\nvar limitedQueue = function (size) {\n    var events = new events_1.EventEmitter();\n    var items = [];\n    var checkFull = function () {\n        if (items.length === size) {\n            events.emit(\"reachLimit\");\n        }\n    };\n    return {\n        clear: function () { return items = []; },\n        isFull: function () { return items.length === size; },\n        onReachLimit: function (fn) { return events.on(\"reachLimit\", fn); },\n        add: function (item) {\n            if (items.length === size) {\n                if (items.includes(item)) {\n                    return;\n                }\n                throw Error(\"Limit \" + size + \" reached\");\n            }\n            items.push(item);\n            checkFull();\n        },\n        dispose: function () { return events.removeAllListeners(); }\n    };\n};\nexports.limitedQueue = limitedQueue;\nvar deferLimitedQueue = function (queue) {\n    var deferred = pDefer();\n    queue.onReachLimit(function () {\n        deferred.resolve();\n        queue.dispose();\n    });\n    return {\n        promise: deferred.promise,\n        dispose: queue.dispose\n    };\n};\nexports.deferLimitedQueue = deferLimitedQueue;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.roundInfoReducer = exports.RoundInfoCommands = void 0;\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"RoundInfoCommands\");\n__createBinding(exports, state_1, \"reducer\", \"roundInfoReducer\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nexports.__esModule = true;\nexports.RoundInfoCommands = exports.setRoundInfoCommand = exports.reducer = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar initialState = {\n    round: null,\n    phase: null,\n    phaseStartedAtSeconds: null\n};\nexports.reducer = (_a = toolkit_1.createSlice({\n    name: \"roundInfo\",\n    initialState: initialState,\n    reducers: {\n        setRoundInfoCommand: function (state, command) {\n            if (command.payload.round) {\n                return __assign(__assign({}, state), { phase: command.payload.phase, phaseStartedAtSeconds: Math.floor(command.payload.startedAt), round: command.payload.round });\n            }\n            return __assign(__assign({}, state), { phase: command.payload.phase, phaseStartedAtSeconds: Math.floor(command.payload.startedAt) });\n        }\n    }\n}), _a.reducer), exports.setRoundInfoCommand = _a.actions.setRoundInfoCommand;\nvar RoundInfoCommands = { setRoundInfoCommand: exports.setRoundInfoCommand };\nexports.RoundInfoCommands = RoundInfoCommands;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.gameSaga = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar events_1 = require(\"./events\");\nvar gameLoop_1 = require(\"./gameLoop\");\n// todo move this\nvar startStopwatch = function () { return process.hrtime(); };\nvar stopwatch = function (start) {\n    var end = process.hrtime(start);\n    return Math.round((end[0] * 1000) + (end[1] / 1000000));\n};\nvar gameSaga = function () {\n    var players, logger, startTime, winnerId, duration, round;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.getContext(\"players\")];\n            case 1:\n                players = _a.sent();\n                return [4 /*yield*/, effects_1.getContext(\"logger\")];\n            case 2:\n                logger = _a.sent();\n                logger.info(\"Game started with \" + players.getAll().length + \" players: \" + players.getAll().map(function (p) { return p.getVariable(function (v) { return v.name; }); }).join(\", \"));\n                // this is to wait for the end of the execution queue. without it, things go a bit weird with observers\n                // todo improve this\n                return [4 /*yield*/, effects_1.delay(100)];\n            case 3:\n                // this is to wait for the end of the execution queue. without it, things go a bit weird with observers\n                // todo improve this\n                _a.sent();\n                startTime = startStopwatch();\n                return [4 /*yield*/, effects_1.call(gameLoop_1.gameLoopSaga)];\n            case 4:\n                winnerId = (_a.sent()).winnerId;\n                duration = stopwatch(startTime);\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return state.roundInfo.round; }))];\n            case 5:\n                round = _a.sent();\n                logger.info(\"Match complete in \" + (duration) + \" ms (\" + round + \" rounds)\");\n                return [4 /*yield*/, effects_1.put(events_1.gameFinishEvent({ winnerId: winnerId }))];\n            case 6:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.gameSaga = gameSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.createGameStore = void 0;\nvar redux_1 = require(\"redux\");\nvar redux_saga_1 = require(\"redux-saga\");\nvar roundInfo_1 = require(\"./roundInfo\");\nvar createGameStore = function (context) {\n    var sagaMiddleware = redux_saga_1[\"default\"]({\n        context: context\n    });\n    var store = redux_1.createStore(redux_1.combineReducers({\n        roundInfo: roundInfo_1.roundInfoReducer\n    }), redux_1.applyMiddleware(sagaMiddleware));\n    return { store: store, sagaMiddleware: sagaMiddleware };\n};\nexports.createGameStore = createGameStore;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Match = exports.getDefinitionById = exports.GameEvents = exports.RoundInfoCommands = exports.roundInfoReducer = exports.isPlayerAlive = exports.getPlayerXp = exports.getPlayerMoney = exports.getPlayerLevel = exports.getAllPieces = exports.getPiece = exports.PlayerActions = exports.PlayerActionTypesArray = exports.playerInfoReducer = exports.PlayerEvents = exports.getPlayerEntityDependencies = exports.PlayerCommands = exports.playerReducers = exports.PlayerStateSelectors = exports.PlayerEntitySelectors = exports.playerEntity = exports.Game = void 0;\nvar game_1 = require(\"./game\");\n__createBinding(exports, game_1, \"Game\");\nvar player_1 = require(\"./entities/player\");\n__createBinding(exports, player_1, \"playerEntity\");\n__createBinding(exports, player_1, \"PlayerEntitySelectors\");\n__createBinding(exports, player_1, \"PlayerStateSelectors\");\n__createBinding(exports, player_1, \"playerReducers\");\n__createBinding(exports, player_1, \"PlayerCommands\");\n__createBinding(exports, player_1, \"getPlayerEntityDependencies\");\n__createBinding(exports, player_1, \"PlayerEvents\");\nvar playerInfo_1 = require(\"./entities/player/state/playerInfo\");\n__createBinding(exports, playerInfo_1, \"playerInfoReducer\");\nvar playerActions_1 = require(\"./playerActions\");\n__createBinding(exports, playerActions_1, \"PlayerActionTypesArray\");\nexports.PlayerActions = require(\"./playerActions\");\nvar pieceSelectors_1 = require(\"./player/pieceSelectors\");\n__createBinding(exports, pieceSelectors_1, \"getPiece\");\n__createBinding(exports, pieceSelectors_1, \"getAllPieces\");\nvar selectors_1 = require(\"./entities/player/state/selectors\");\n__createBinding(exports, selectors_1, \"getPlayerLevel\");\n__createBinding(exports, selectors_1, \"getPlayerMoney\");\n__createBinding(exports, selectors_1, \"getPlayerXp\");\n__createBinding(exports, selectors_1, \"isPlayerAlive\");\nvar roundInfo_1 = require(\"./game/roundInfo\");\n__createBinding(exports, roundInfo_1, \"roundInfoReducer\");\n__createBinding(exports, roundInfo_1, \"RoundInfoCommands\");\nexports.GameEvents = require(\"./game/events\");\nvar definitions_1 = require(\"./definitions\");\n__createBinding(exports, definitions_1, \"getDefinitionById\");\nvar match_1 = require(\"./game/match\");\n__createBinding(exports, match_1, \"Match\");\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.getPiecesExceptStage = exports.getPiecesForStage = exports.getPiecesForDefinition = exports.getAllPieces = exports.getPiece = void 0;\nvar board_1 = require(\"@shoki/board\");\nvar getPiece = function (state, pieceId) {\n    return board_1.BoardSelectors.getPiece(state.board, pieceId)\n        || board_1.BoardSelectors.getPiece(state.bench, pieceId)\n        || null;\n};\nexports.getPiece = getPiece;\nvar getAllPieces = function (state) { return __spreadArray(__spreadArray([], __read(board_1.BoardSelectors.getAllPieces(state.board))), __read(board_1.BoardSelectors.getAllPieces(state.bench))); };\nexports.getAllPieces = getAllPieces;\nvar getPiecesForDefinition = function (state, definitionId) {\n    return board_1.BoardSelectors.getAllPieces(state).filter(function (p) { return p.definitionId === definitionId; });\n};\nexports.getPiecesForDefinition = getPiecesForDefinition;\nvar getPiecesForStage = function (state, stage) {\n    return board_1.BoardSelectors.getAllPieces(state).filter(function (p) { return p.stage === stage; });\n};\nexports.getPiecesForStage = getPiecesForStage;\nvar getPiecesExceptStage = function (state, stage) {\n    return board_1.BoardSelectors.getAllPieces(state).filter(function (p) { return p.stage !== stage; });\n};\nexports.getPiecesExceptStage = getPiecesExceptStage;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.buyCardPlayerActionSaga = exports.buyCardPlayerAction = void 0;\nvar uuid_1 = require(\"uuid\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar models_1 = require(\"@creature-chess/models\");\nvar board_1 = require(\"@shoki/board\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nvar commands_1 = require(\"../entities/player/state/commands\");\nvar cardShop_1 = require(\"../entities/player/state/cardShop\");\nvar definitions_1 = require(\"../definitions\");\nvar selectors_2 = require(\"../entities/player/selectors\");\nvar dependencies_1 = require(\"../entities/player/dependencies\");\nvar getCardDestination = function (state, playerId, sortPositions) {\n    var belowPieceLimit = selectors_1.getPlayerBelowPieceLimit(state, playerId);\n    var inPreparingPhase = state.roundInfo.phase === models_1.GamePhase.PREPARING;\n    if (belowPieceLimit && inPreparingPhase) {\n        var boardSlot = board_1.BoardSelectors.getFirstEmptySlot(state.board, sortPositions);\n        if (boardSlot) {\n            return {\n                type: \"board\",\n                location: boardSlot\n            };\n        }\n    }\n    var benchSlot = board_1.BoardSelectors.getFirstEmptySlot(state.bench, board_1.topLeftToBottomRightSortPositions);\n    if (benchSlot !== null) {\n        return {\n            type: \"bench\",\n            location: benchSlot\n        };\n    }\n    return null;\n};\nvar createPieceFromCard = function (ownerId, card) {\n    var id = card.id, definitionId = card.definitionId;\n    var definition = definitions_1.getDefinitionById(definitionId);\n    if (!definition) {\n        return null;\n    }\n    var stats = definition.stages[0];\n    return {\n        id: id || uuid_1.v4(),\n        ownerId: ownerId,\n        definitionId: definitionId,\n        definition: definition,\n        facingAway: false,\n        maxHealth: stats.hp,\n        currentHealth: stats.hp,\n        stage: 0\n    };\n};\nexports.buyCardPlayerAction = toolkit_1.createAction(\"buyCardPlayerAction\");\nvar buyCardPlayerActionSaga = function () {\n    var _loop_1, state_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _loop_1 = function () {\n                    var playerId, name_1, logger, boardSlice, benchSlice, action, index, sortPositions, cards, money, card, destination, piece, remainingCards, _b, x, y;\n                    return __generator(this, function (_c) {\n                        switch (_c.label) {\n                            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"id\"))];\n                            case 1:\n                                playerId = _c.sent();\n                                return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"playerName\"))];\n                            case 2:\n                                name_1 = _c.sent();\n                                return [5 /*yield**/, __values(dependencies_1.getPlayerEntityDependencies())];\n                            case 3:\n                                logger = (_c.sent()).logger;\n                                return [5 /*yield**/, __values(selectors_2.getBoardSlice())];\n                            case 4:\n                                boardSlice = _c.sent();\n                                return [5 /*yield**/, __values(selectors_2.getBenchSlice())];\n                            case 5:\n                                benchSlice = _c.sent();\n                                return [4 /*yield*/, effects_1.take(exports.buyCardPlayerAction.toString())];\n                            case 6:\n                                action = _c.sent();\n                                index = action.payload.index;\n                                sortPositions = action.payload.sortPositions || undefined;\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerCards))];\n                            case 7:\n                                cards = _c.sent();\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.getPlayerMoney))];\n                            case 8:\n                                money = _c.sent();\n                                card = cards[index];\n                                if (!!card) return [3 /*break*/, 11];\n                                logger.warn(\"Player attempted to buy null/undefined card\", { actor: { playerId: playerId, name: name_1 } });\n                                return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(money))];\n                            case 9:\n                                _c.sent();\n                                return [4 /*yield*/, effects_1.put(cardShop_1.updateCardsCommand(cards))];\n                            case 10:\n                                _c.sent();\n                                return [2 /*return*/, \"continue\"];\n                            case 11:\n                                if (!(money < card.cost)) return [3 /*break*/, 14];\n                                logger.warn(\"Not enough money to buy card\", {\n                                    actor: { playerId: playerId, name: name_1 },\n                                    details: { index: index }\n                                });\n                                return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(money))];\n                            case 12:\n                                _c.sent();\n                                return [4 /*yield*/, effects_1.put(cardShop_1.updateCardsCommand(cards))];\n                            case 13:\n                                _c.sent();\n                                return [2 /*return*/, \"continue\"];\n                            case 14: return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return getCardDestination(state, playerId, sortPositions); }))];\n                            case 15:\n                                destination = _c.sent();\n                                // no valid slots\n                                if (destination === null) {\n                                    logger.warn(\"Player attempted to buy a card but has no available destination\", { actor: { playerId: playerId, name: name_1 } });\n                                    return [2 /*return*/, \"continue\"];\n                                }\n                                piece = createPieceFromCard(playerId, card);\n                                if (!piece) {\n                                    return [2 /*return*/, { value: void 0 }];\n                                }\n                                remainingCards = cards.map(function (c) { return c === card ? null : c; });\n                                if (!(destination.type === \"board\")) return [3 /*break*/, 17];\n                                _b = destination.location, x = _b.x, y = _b.y;\n                                return [4 /*yield*/, effects_1.put(boardSlice.commands.addBoardPieceCommand({ piece: piece, x: x, y: y }))];\n                            case 16:\n                                _c.sent();\n                                return [3 /*break*/, 19];\n                            case 17:\n                                if (!(destination.type === \"bench\")) return [3 /*break*/, 19];\n                                return [4 /*yield*/, effects_1.put(benchSlice.commands.addBoardPieceCommand({ piece: piece, x: destination.location.x, y: 0 }))];\n                            case 18:\n                                _c.sent();\n                                _c.label = 19;\n                            case 19: return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(money - card.cost))];\n                            case 20:\n                                _c.sent();\n                                return [4 /*yield*/, effects_1.put(cardShop_1.updateCardsCommand(remainingCards))];\n                            case 21:\n                                _c.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                };\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 3];\n                return [5 /*yield**/, _loop_1()];\n            case 2:\n                state_1 = _a.sent();\n                if (typeof state_1 === \"object\")\n                    return [2 /*return*/, state_1.value];\n                return [3 /*break*/, 1];\n            case 3: return [2 /*return*/];\n        }\n    });\n};\nexports.buyCardPlayerActionSaga = buyCardPlayerActionSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.buyXpPlayerActionSaga = exports.buyXpPlayerAction = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar models_1 = require(\"@creature-chess/models\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nvar commands_1 = require(\"../entities/player/state/commands\");\nvar xp_1 = require(\"../entities/player/sagas/xp\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar dependencies_1 = require(\"../entities/player/dependencies\");\nexports.buyXpPlayerAction = toolkit_1.createAction(\"buyXpPlayerAction\");\nvar buyXpPlayerActionSaga = function () {\n    var playerId, name_1, logger, isAlive, currentLevel, money;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!true) return [3 /*break*/, 12];\n                return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"id\"))];\n            case 1:\n                playerId = _a.sent();\n                return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"playerName\"))];\n            case 2:\n                name_1 = _a.sent();\n                return [5 /*yield**/, __values(dependencies_1.getPlayerEntityDependencies())];\n            case 3:\n                logger = (_a.sent()).logger;\n                return [4 /*yield*/, effects_1.take(exports.buyXpPlayerAction.toString())];\n            case 4:\n                _a.sent();\n                logger.info(\"BUY_XP_ACTION received\", { actor: { playerId: playerId, name: name_1 } });\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerAlive))];\n            case 5:\n                isAlive = _a.sent();\n                if (isAlive === false) {\n                    logger.info(\"Player attempted to buy xp, but dead\", { actor: { playerId: playerId, name: name_1 } });\n                    return [3 /*break*/, 0];\n                }\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return state.playerInfo.level; }))];\n            case 6:\n                currentLevel = _a.sent();\n                if (currentLevel === models_1.MAX_PLAYER_LEVEL) {\n                    logger.info(\"Player attempted to buy xp, but at max level\", { actor: { playerId: playerId, name: name_1 } });\n                    return [3 /*break*/, 0];\n                }\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(function (state) { return state.playerInfo.money; }))];\n            case 7:\n                money = _a.sent();\n                if (!(money < models_1.BUY_XP_COST)) return [3 /*break*/, 9];\n                logger.info(\"Not enough money to buy xp\", {\n                    actor: { playerId: playerId, name: name_1 },\n                    details: {\n                        money: money,\n                        cost: models_1.BUY_XP_COST\n                    }\n                });\n                return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(money))];\n            case 8:\n                _a.sent();\n                return [3 /*break*/, 0];\n            case 9: return [4 /*yield*/, effects_1.put(xp_1.addXpCommand(models_1.BUY_XP_AMOUNT))];\n            case 10:\n                _a.sent();\n                return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(money - models_1.BUY_XP_COST))];\n            case 11:\n                _a.sent();\n                return [3 /*break*/, 0];\n            case 12: return [2 /*return*/];\n        }\n    });\n};\nexports.buyXpPlayerActionSaga = buyXpPlayerActionSaga;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.dropPiecePlayerActionSaga = exports.dropPiecePlayerAction = exports.isLocationLocked = exports.findPiece = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar board_1 = require(\"@shoki/board\");\nvar selectors_1 = require(\"../entities/player/selectors\");\nvar selectors_2 = require(\"../entities/player/state/selectors\");\nvar findPiece = function (state, location) {\n    if (location.type === \"board\") {\n        var _a = location.location, x = _a.x, y = _a.y;\n        return board_1.BoardSelectors.getPieceForPosition(state.board, x, y);\n    }\n    if (location.type === \"bench\") {\n        var x = location.location.x;\n        return board_1.BoardSelectors.getPieceForPosition(state.bench, x, 0);\n    }\n    return null;\n};\nexports.findPiece = findPiece;\nvar isLocationLocked = function (state, location) {\n    if (location.type === \"board\") {\n        return state.board.locked;\n    }\n    if (location.type === \"bench\") {\n        return state.bench.locked;\n    }\n    return true;\n};\nexports.isLocationLocked = isLocationLocked;\nexports.dropPiecePlayerAction = toolkit_1.createAction(\"dropPiecePlayerAction\");\nvar dropPiecePlayerActionSaga = function () {\n    var boardSlice, benchSlice;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(selectors_1.getBoardSlice())];\n            case 1:\n                boardSlice = _a.sent();\n                return [5 /*yield**/, __values(selectors_1.getBenchSlice())];\n            case 2:\n                benchSlice = _a.sent();\n                return [4 /*yield*/, effects_1.takeEvery(exports.dropPiecePlayerAction.toString(), function (_a) {\n                        var playerId, state, fromPiece, toPiece, belowPieceLimit, fromBench, toBench, _b, x, y;\n                        var _c = _a.payload, from = _c.from, pieceId = _c.pieceId, to = _c.to;\n                        return __generator(this, function (_d) {\n                            switch (_d.label) {\n                                case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"id\"))];\n                                case 1:\n                                    playerId = _d.sent();\n                                    return [5 /*yield**/, __values(typed_redux_saga_1.select(function (s) { return s; }))];\n                                case 2:\n                                    state = _d.sent();\n                                    if (exports.isLocationLocked(state, from) || exports.isLocationLocked(state, to)) {\n                                        // source or destination is locked\n                                        return [2 /*return*/];\n                                    }\n                                    fromPiece = exports.findPiece(state, from);\n                                    if (fromPiece === null || fromPiece.id !== pieceId) {\n                                        // from piece not found or id wrong (position mismatch?)\n                                        return [2 /*return*/];\n                                    }\n                                    toPiece = exports.findPiece(state, to);\n                                    if (toPiece !== null) {\n                                        // destination tile not empty\n                                        return [2 /*return*/];\n                                    }\n                                    if (to.type === \"board\" && from.type !== \"board\") {\n                                        belowPieceLimit = selectors_2.getPlayerBelowPieceLimit(state, playerId);\n                                        if (!belowPieceLimit) {\n                                            return [2 /*return*/];\n                                        }\n                                    }\n                                    if (!(from.type === \"board\" && to.type === \"board\")) return [3 /*break*/, 4];\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.moveBoardPieceCommand({ pieceId: pieceId, from: from.location, to: to.location }))];\n                                case 3:\n                                    _d.sent();\n                                    return [3 /*break*/, 12];\n                                case 4:\n                                    if (!(from.type === \"bench\" && to.type === \"bench\")) return [3 /*break*/, 6];\n                                    fromBench = { x: from.location.x, y: 0 };\n                                    toBench = { x: to.location.x, y: 0 };\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.moveBoardPieceCommand({ pieceId: pieceId, from: fromBench, to: toBench }))];\n                                case 5:\n                                    _d.sent();\n                                    return [3 /*break*/, 12];\n                                case 6:\n                                    if (!(from.type === \"board\" && to.type === \"bench\")) return [3 /*break*/, 9];\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.removeBoardPiecesCommand([pieceId]))];\n                                case 7:\n                                    _d.sent();\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.addBoardPieceCommand({\n                                            piece: __assign(__assign({}, fromPiece), { facingAway: false }),\n                                            x: to.location.x,\n                                            y: 0\n                                        }))];\n                                case 8:\n                                    _d.sent();\n                                    return [3 /*break*/, 12];\n                                case 9:\n                                    if (!(from.type === \"bench\" && to.type === \"board\")) return [3 /*break*/, 12];\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.removeBoardPiecesCommand([pieceId]))];\n                                case 10:\n                                    _d.sent();\n                                    _b = to.location, x = _b.x, y = _b.y;\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.addBoardPieceCommand({\n                                            piece: __assign(__assign({}, fromPiece), { facingAway: true }),\n                                            x: x, y: y\n                                        }))];\n                                case 11:\n                                    _d.sent();\n                                    _d.label = 12;\n                                case 12: return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 3:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.dropPiecePlayerActionSaga = dropPiecePlayerActionSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.PlayerActionTypesArray = exports.quickChatPlayerAction = exports.spectatePlayerAction = exports.swapPiecePlayerAction = exports.dropPiecePlayerAction = exports.quitGamePlayerAction = exports.readyUpPlayerAction = exports.sellPiecePlayerAction = exports.toggleShopLockPlayerAction = exports.rerollCardsPlayerAction = exports.buyXpPlayerAction = exports.buyCardPlayerAction = void 0;\nvar buyCard_1 = require(\"./buyCard\");\nexports.buyCardPlayerAction = buyCard_1.buyCardPlayerAction;\nvar buyXp_1 = require(\"./buyXp\");\nexports.buyXpPlayerAction = buyXp_1.buyXpPlayerAction;\nvar rerollCards_1 = require(\"./rerollCards\");\nexports.rerollCardsPlayerAction = rerollCards_1.rerollCardsPlayerAction;\nvar toggleShopLock_1 = require(\"./toggleShopLock\");\nexports.toggleShopLockPlayerAction = toggleShopLock_1.toggleShopLockPlayerAction;\nvar sellPiece_1 = require(\"./sellPiece\");\nexports.sellPiecePlayerAction = sellPiece_1.sellPiecePlayerAction;\nvar readyUp_1 = require(\"./readyUp\");\nexports.readyUpPlayerAction = readyUp_1.readyUpPlayerAction;\nvar quitGame_1 = require(\"./quitGame\");\nexports.quitGamePlayerAction = quitGame_1.quitGamePlayerAction;\nvar dropPiece_1 = require(\"./dropPiece\");\nexports.dropPiecePlayerAction = dropPiece_1.dropPiecePlayerAction;\nvar swapPiece_1 = require(\"./swapPiece\");\nexports.swapPiecePlayerAction = swapPiece_1.swapPiecePlayerAction;\nvar spectate_1 = require(\"./spectate\");\nexports.spectatePlayerAction = spectate_1.spectatePlayerAction;\nvar quickChat_1 = require(\"./quickChat\");\nexports.quickChatPlayerAction = quickChat_1.quickChatPlayerAction;\nexports.PlayerActionTypesArray = [\n    buyXp_1.buyXpPlayerAction.toString(),\n    buyCard_1.buyCardPlayerAction.toString(),\n    rerollCards_1.rerollCardsPlayerAction.toString(),\n    toggleShopLock_1.toggleShopLockPlayerAction.toString(),\n    sellPiece_1.sellPiecePlayerAction.toString(),\n    readyUp_1.readyUpPlayerAction.toString(),\n    quitGame_1.quitGamePlayerAction.toString(),\n    dropPiece_1.dropPiecePlayerAction.toString(),\n    spectate_1.spectatePlayerAction.toString(),\n    quickChat_1.quickChatPlayerAction.toString(),\n    spectate_1.spectatePlayerAction.toString()\n];\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.quickChatPlayerActionSaga = exports.quickChatPlayerAction = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar engine_1 = require(\"@shoki/engine\");\nvar events_1 = require(\"../entities/player/events\");\nvar effects_2 = require(\"redux-saga/effects\");\nexports.quickChatPlayerAction = toolkit_1.createAction(\"quickChatAction\");\nvar quickChatPlayerActionSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeLatest(exports.quickChatPlayerAction.toString(), function (_a) {\n                    var game, player, opponentId, opponent;\n                    var _b = _a.payload, sendingPlayerId = _b.sendingPlayerId, chatValue = _b.chatValue;\n                    return __generator(this, function (_c) {\n                        switch (_c.label) {\n                            case 0:\n                                if (sendingPlayerId === null || chatValue === null) {\n                                    return [2 /*return*/];\n                                }\n                                return [5 /*yield**/, __values(engine_1.getDependency(\"game\"))];\n                            case 1:\n                                game = _c.sent();\n                                player = game.getPlayerById(sendingPlayerId);\n                                return [4 /*yield*/, effects_2.select(function (state) { return state.playerInfo.opponentId; })];\n                            case 2:\n                                opponentId = _c.sent();\n                                opponent = game.getPlayerById(opponentId);\n                                if (!opponent || !player) {\n                                    return [2 /*return*/];\n                                }\n                                opponent.put(events_1.playerReceiveQuickChatEvent({ sendingPlayerId: sendingPlayerId, chatValue: chatValue }));\n                                player.put(events_1.playerReceiveQuickChatEvent({ sendingPlayerId: sendingPlayerId, chatValue: chatValue }));\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.quickChatPlayerActionSaga = quickChatPlayerActionSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.quitGamePlayerAction = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nexports.quitGamePlayerAction = toolkit_1.createAction(\"quitGamePlayerAction\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.readyUpPlayerActionSaga = exports.readyUpPlayerAction = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar engine_1 = require(\"@shoki/engine\");\nvar models_1 = require(\"@creature-chess/models\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nvar commands_1 = require(\"../entities/player/state/commands\");\nvar dependencies_1 = require(\"../entities/player/dependencies\");\nexports.readyUpPlayerAction = toolkit_1.createAction(\"readyUpPlayerAction\");\nvar readyUpPlayerActionSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeLatest(exports.readyUpPlayerAction.toString(), function () {\n                    var name, logger, isAlive, game, ready;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [5 /*yield**/, __values(engine_1.getVariable(function (variables) { return variables.name; }))];\n                            case 1:\n                                name = _a.sent();\n                                return [5 /*yield**/, __values(dependencies_1.getPlayerEntityDependencies())];\n                            case 2:\n                                logger = (_a.sent()).logger;\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerAlive))];\n                            case 3:\n                                isAlive = _a.sent();\n                                if (isAlive === false) {\n                                    logger.info(\"Attempted to ready up, but dead\", { actor: { name: name } });\n                                    return [2 /*return*/];\n                                }\n                                return [5 /*yield**/, __values(engine_1.getDependency(\"game\"))];\n                            case 4:\n                                game = _a.sent();\n                                if (game.getRoundInfo().phase !== models_1.GamePhase.PREPARING) {\n                                    logger.info(\"Attempted to ready up, but not in preparing phase\", { actor: { name: name } });\n                                    return [2 /*return*/];\n                                }\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerReady))];\n                            case 5:\n                                ready = _a.sent();\n                                if (ready) {\n                                    logger.info(\"Attempted to ready up, but already ready\", { actor: { name: name } });\n                                    return [2 /*return*/];\n                                }\n                                return [4 /*yield*/, effects_1.put(commands_1.updateReadyCommand(true))];\n                            case 6:\n                                _a.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.readyUpPlayerActionSaga = readyUpPlayerActionSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.rerollCardsPlayerActionSaga = exports.rerollCardsPlayerAction = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar models_1 = require(\"@creature-chess/models\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nvar events_1 = require(\"../entities/player/events\");\nvar dependencies_1 = require(\"../entities/player/dependencies\");\nvar commands_1 = require(\"../entities/player/state/commands\");\nexports.rerollCardsPlayerAction = toolkit_1.createAction(\"rerollCardsPlayerAction\");\nvar rerollCardsPlayerActionSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeEvery(exports.rerollCardsPlayerAction.toString(), function () {\n                    var logger, isAlive, money;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [5 /*yield**/, __values(dependencies_1.getPlayerEntityDependencies())];\n                            case 1:\n                                logger = (_a.sent()).logger;\n                                return [5 /*yield**/, __values(typed_redux_saga_1.select(selectors_1.isPlayerAlive))];\n                            case 2:\n                                isAlive = _a.sent();\n                                if (isAlive === false) {\n                                    logger.info(\"Attempted to reroll, but dead\");\n                                    return [2 /*return*/];\n                                }\n                                return [4 /*yield*/, typed_redux_saga_1.select(function (state) { return state.playerInfo.money; })];\n                            case 3:\n                                money = _a.sent();\n                                // not enough money\n                                if (money < models_1.REROLL_COST) {\n                                    logger.info(\"Attempted to reroll costing $\" + models_1.REROLL_COST + \" but only had $\" + money);\n                                    return [2 /*return*/];\n                                }\n                                return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(money - models_1.REROLL_COST))];\n                            case 4:\n                                _a.sent();\n                                return [4 /*yield*/, effects_1.put(events_1.afterRerollCardsEvent())];\n                            case 5:\n                                _a.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.rerollCardsPlayerActionSaga = rerollCardsPlayerActionSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.playerActionsSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar buyCard_1 = require(\"./buyCard\");\nvar buyXp_1 = require(\"./buyXp\");\nvar rerollCards_1 = require(\"./rerollCards\");\nvar toggleShopLock_1 = require(\"./toggleShopLock\");\nvar sellPiece_1 = require(\"./sellPiece\");\nvar dropPiece_1 = require(\"./dropPiece\");\nvar swapPiece_1 = require(\"./swapPiece\");\nvar spectate_1 = require(\"./spectate\");\nvar readyUp_1 = require(\"./readyUp\");\nvar quickChat_1 = require(\"./quickChat\");\nvar playerActionsSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.all([\n                    effects_1.call(buyXp_1.buyXpPlayerActionSaga),\n                    effects_1.call(buyCard_1.buyCardPlayerActionSaga),\n                    effects_1.call(rerollCards_1.rerollCardsPlayerActionSaga),\n                    effects_1.call(toggleShopLock_1.toggleShopLockPlayerActionSaga),\n                    effects_1.call(sellPiece_1.sellPiecePlayerActionSaga),\n                    effects_1.call(dropPiece_1.dropPiecePlayerActionSaga),\n                    effects_1.call(swapPiece_1.swapPiecePlayerActionSaga),\n                    effects_1.call(spectate_1.spectatePlayerActionSaga),\n                    effects_1.call(readyUp_1.readyUpPlayerActionSaga),\n                    effects_1.call(quickChat_1.quickChatPlayerActionSaga)\n                ])];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.playerActionsSaga = playerActionsSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.sellPiecePlayerActionSaga = exports.sellPiecePlayerAction = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar pieceSelectors_1 = require(\"../player/pieceSelectors\");\nvar commands_1 = require(\"../entities/player/state/commands\");\nvar events_1 = require(\"../entities/player/events\");\nvar selectors_1 = require(\"../entities/player/selectors\");\nexports.sellPiecePlayerAction = toolkit_1.createAction(\"sellPiecePlayerAction\");\nvar PIECES_FOR_STAGE = [1, 3, 9];\nvar sellPiecePlayerActionSaga = function () {\n    var boardSlice, benchSlice;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(selectors_1.getBoardSlice())];\n            case 1:\n                boardSlice = _a.sent();\n                return [5 /*yield**/, __values(selectors_1.getBenchSlice())];\n            case 2:\n                benchSlice = _a.sent();\n                return [4 /*yield*/, effects_1.takeEvery(exports.sellPiecePlayerAction.toString(), function (_a) {\n                        var piece, piecesUsed, pieceCost, currentMoney;\n                        var pieceId = _a.payload.pieceId;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0: return [4 /*yield*/, effects_1.select(function (state) { return pieceSelectors_1.getPiece(state, pieceId); })];\n                                case 1:\n                                    piece = _b.sent();\n                                    if (!piece) {\n                                        // console.log(`Attempted to sell piece with id ${pieceId} but did not own it`);\n                                        return [2 /*return*/];\n                                    }\n                                    piecesUsed = PIECES_FOR_STAGE[piece.stage];\n                                    pieceCost = piece.definition.cost;\n                                    return [4 /*yield*/, effects_1.select(function (state) { return state.playerInfo.money; })];\n                                case 2:\n                                    currentMoney = _b.sent();\n                                    return [4 /*yield*/, effects_1.put(commands_1.updateMoneyCommand(currentMoney + (pieceCost * piecesUsed)))];\n                                case 3:\n                                    _b.sent();\n                                    return [4 /*yield*/, effects_1.put(benchSlice.commands.removeBoardPiecesCommand([pieceId]))];\n                                case 4:\n                                    _b.sent();\n                                    return [4 /*yield*/, effects_1.put(boardSlice.commands.removeBoardPiecesCommand([pieceId]))];\n                                case 5:\n                                    _b.sent();\n                                    return [4 /*yield*/, effects_1.put(events_1.afterSellPieceEvent({ piece: piece }))];\n                                case 6:\n                                    _b.sent();\n                                    return [2 /*return*/];\n                            }\n                        });\n                    })];\n            case 3:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.sellPiecePlayerActionSaga = sellPiecePlayerActionSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.spectatePlayerActionSaga = exports.spectatePlayerAction = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar engine_1 = require(\"@shoki/engine\");\nvar spectating_1 = require(\"../entities/player/state/spectating\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nexports.spectatePlayerAction = toolkit_1.createAction(\"spectatePlayerAction\");\nvar spectatePlayerActionSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeLatest(exports.spectatePlayerAction.toString(), function (_a) {\n                    var game, other;\n                    var playerId = _a.payload.playerId;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0:\n                                if (!(playerId === null)) return [3 /*break*/, 2];\n                                return [4 /*yield*/, effects_1.put(spectating_1.setSpectatingIdCommand(null))];\n                            case 1:\n                                _b.sent();\n                                return [2 /*return*/];\n                            case 2: return [5 /*yield**/, __values(engine_1.getDependency(\"game\"))];\n                            case 3:\n                                game = _b.sent();\n                                other = game.getPlayerById(playerId);\n                                if (!other || !other.select(selectors_1.isPlayerAlive)) {\n                                    return [2 /*return*/];\n                                }\n                                return [4 /*yield*/, effects_1.put(spectating_1.setSpectatingIdCommand(playerId))];\n                            case 4:\n                                _b.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.spectatePlayerActionSaga = spectatePlayerActionSaga;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.swapPiecePlayerActionSaga = exports.swapPiecePlayerAction = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar effects_1 = require(\"redux-saga/effects\");\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\nvar selectors_1 = require(\"../entities/player/selectors\");\n// todo move these into util functions\nvar dropPiece_1 = require(\"./dropPiece\");\nexports.swapPiecePlayerAction = toolkit_1.createAction(\"swapPiecePlayerAction\");\nvar swapPiecePlayerActionSaga = function () {\n    var boardSlice, benchSlice, _a, pieceAId, pieceALocation, pieceBId, pieceBLocation, state, pieceA, pieceB;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [5 /*yield**/, __values(selectors_1.getBoardSlice())];\n            case 1:\n                boardSlice = _b.sent();\n                return [5 /*yield**/, __values(selectors_1.getBenchSlice())];\n            case 2:\n                benchSlice = _b.sent();\n                _b.label = 3;\n            case 3:\n                if (!true) return [3 /*break*/, 20];\n                return [5 /*yield**/, __values(typed_redux_saga_1.take(exports.swapPiecePlayerAction.toString()))];\n            case 4:\n                _a = (_b.sent()).payload, pieceAId = _a.pieceAId, pieceALocation = _a.pieceALocation, pieceBId = _a.pieceBId, pieceBLocation = _a.pieceBLocation;\n                return [5 /*yield**/, __values(typed_redux_saga_1.select(function (s) { return s; }))];\n            case 5:\n                state = _b.sent();\n                if (dropPiece_1.isLocationLocked(state, pieceALocation) || dropPiece_1.isLocationLocked(state, pieceBLocation)) {\n                    // source or destination is locked\n                    return [3 /*break*/, 3];\n                }\n                pieceA = dropPiece_1.findPiece(state, pieceALocation);\n                if (!pieceA || pieceA.id !== pieceAId) {\n                    // piece A not found or id wrong (position mismatch?)\n                    // todo log\n                    return [3 /*break*/, 3];\n                }\n                pieceB = dropPiece_1.findPiece(state, pieceBLocation);\n                if (!pieceB || pieceB.id !== pieceBId) {\n                    // piece B not found or id wrong (position mismatch?)\n                    // todo log\n                    return [3 /*break*/, 3];\n                }\n                if (!(pieceALocation.type === \"board\" && pieceBLocation.type === \"board\")) return [3 /*break*/, 7];\n                return [4 /*yield*/, effects_1.put(boardSlice.commands.swapPiecesCommand({ aId: pieceAId, bId: pieceBId }))];\n            case 6:\n                _b.sent();\n                return [3 /*break*/, 19];\n            case 7:\n                if (!(pieceALocation.type === \"bench\" && pieceBLocation.type === \"bench\")) return [3 /*break*/, 9];\n                return [4 /*yield*/, effects_1.put(benchSlice.commands.swapPiecesCommand({ aId: pieceAId, bId: pieceBId }))];\n            case 8:\n                _b.sent();\n                return [3 /*break*/, 19];\n            case 9:\n                if (!(pieceALocation.type === \"board\" && pieceBLocation.type === \"bench\")) return [3 /*break*/, 14];\n                return [4 /*yield*/, effects_1.put(boardSlice.commands.removeBoardPiecesCommand([pieceAId]))];\n            case 10:\n                _b.sent();\n                return [4 /*yield*/, effects_1.put(benchSlice.commands.removeBoardPiecesCommand([pieceBId]))];\n            case 11:\n                _b.sent();\n                return [4 /*yield*/, effects_1.put(boardSlice.commands.addBoardPieceCommand({\n                        piece: __assign(__assign({}, pieceB), { facingAway: false }),\n                        x: pieceALocation.location.x,\n                        y: pieceALocation.location.y\n                    }))];\n            case 12:\n                _b.sent();\n                return [4 /*yield*/, effects_1.put(benchSlice.commands.addBoardPieceCommand({\n                        piece: __assign(__assign({}, pieceA), { facingAway: false }),\n                        x: pieceBLocation.location.x,\n                        y: 0\n                    }))];\n            case 13:\n                _b.sent();\n                return [3 /*break*/, 19];\n            case 14:\n                if (!(pieceALocation.type === \"bench\" && pieceBLocation.type === \"board\")) return [3 /*break*/, 19];\n                return [4 /*yield*/, effects_1.put(boardSlice.commands.removeBoardPiecesCommand([pieceBId]))];\n            case 15:\n                _b.sent();\n                return [4 /*yield*/, effects_1.put(benchSlice.commands.removeBoardPiecesCommand([pieceAId]))];\n            case 16:\n                _b.sent();\n                return [4 /*yield*/, effects_1.put(boardSlice.commands.addBoardPieceCommand({\n                        piece: __assign(__assign({}, pieceA), { facingAway: false }),\n                        x: pieceBLocation.location.x,\n                        y: pieceBLocation.location.y\n                    }))];\n            case 17:\n                _b.sent();\n                return [4 /*yield*/, effects_1.put(benchSlice.commands.addBoardPieceCommand({\n                        piece: __assign(__assign({}, pieceB), { facingAway: false }),\n                        x: pieceALocation.location.x,\n                        y: 0\n                    }))];\n            case 18:\n                _b.sent();\n                _b.label = 19;\n            case 19: return [3 /*break*/, 3];\n            case 20: return [2 /*return*/];\n        }\n    });\n};\nexports.swapPiecePlayerActionSaga = swapPiecePlayerActionSaga;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.toggleShopLockPlayerActionSaga = exports.toggleShopLockPlayerAction = void 0;\nvar effects_1 = require(\"@redux-saga/core/effects\");\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar cardShop_1 = require(\"../entities/player/state/cardShop\");\nvar selectors_1 = require(\"../entities/player/state/selectors\");\nexports.toggleShopLockPlayerAction = toolkit_1.createAction(\"toggleShopLockPlayerAction\");\nvar toggleShopLockPlayerActionSaga = function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.takeEvery(exports.toggleShopLockPlayerAction.toString(), function () {\n                    var currentLockState;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [4 /*yield*/, effects_1.select(selectors_1.isPlayerShopLocked)];\n                            case 1:\n                                currentLockState = _a.sent();\n                                return [4 /*yield*/, effects_1.put(cardShop_1.updateShopLockCommand(!currentLockState))];\n                            case 2:\n                                _a.sent();\n                                return [2 /*return*/];\n                        }\n                    });\n                })];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n};\nexports.toggleShopLockPlayerActionSaga = toggleShopLockPlayerActionSaga;\n","\"use strict\";\nexports.__esModule = true;\nexports.config = void 0;\nexports.config = {\n    auth0: {\n        domain: \"creaturechess.eu.auth0.com\",\n        spaClientId: \"HNUYYyRCtFJsA3xKGp964Kgy4jwx8bW1\",\n        machineToMachineClientId: \"gWNTtsTNepgyyqE7QAEC4e7nt5A3ZZ4k\"\n    },\n    appUrl: \"https://creaturechess.jamesmonger.com\",\n    serverUrl: \"https://cc-server.jamesmonger.com\",\n    serverInfoUrl: \"https://cc-server-info.herokuapp.com\"\n};\n","\"use strict\";\nexports.__esModule = true;\nexports.config = void 0;\nexports.config = {\n    auth0: {\n        domain: \"creaturechess.eu.auth0.com\",\n        spaClientId: \"HNUYYyRCtFJsA3xKGp964Kgy4jwx8bW1\",\n        machineToMachineClientId: \"gWNTtsTNepgyyqE7QAEC4e7nt5A3ZZ4k\"\n    },\n    appUrl: \"https://creaturechess.local-dev.com:8090\",\n    serverUrl: \"ws://localhost:3000\",\n    serverInfoUrl: \"http://localhost:3001\"\n};\n","\"use strict\";\nexports.__esModule = true;\nexports.config = void 0;\nvar config_live_1 = require(\"./config.live\");\nvar config_local_1 = require(\"./config.local\");\nexports.config = process.env.NODE_ENV === \"development\" ? config_local_1.config : config_live_1.config;\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.AVAILABLE_PROFILE_PICTURES = exports.LOBBY_WAIT_TIME = exports.MAX_PLAYERS_IN_GAME = exports.MAX_NAME_LENGTH = exports.DAMAGE_RATIO = exports.DEFAULT_TURN_DURATION = exports.DEFAULT_TURN_COUNT = exports.PIECES_TO_EVOLVE = exports.BUY_XP_AMOUNT = exports.BUY_XP_COST = exports.HEALTH_LOST_PER_PIECE = exports.MAX_PLAYER_LEVEL = exports.STARTING_HEALTH = exports.STARTING_LEVEL = exports.STARTING_MONEY = exports.REROLL_COST = exports.PHASE_LENGTHS = exports.GRID_SIZE = void 0;\nvar game_phase_1 = require(\"./game-phase\");\nexports.GRID_SIZE = {\n    width: 7,\n    height: 6 // THIS MUST BE AN EVEN NUMBER\n};\nexports.PHASE_LENGTHS = (_a = {},\n    _a[game_phase_1.GamePhase.PREPARING] = 30,\n    _a[game_phase_1.GamePhase.READY] = 5,\n    _a[game_phase_1.GamePhase.PLAYING] = 30,\n    _a);\nexports.REROLL_COST = 2;\nexports.STARTING_MONEY = 3;\nexports.STARTING_LEVEL = 1;\nexports.STARTING_HEALTH = 100;\nexports.MAX_PLAYER_LEVEL = 10;\nexports.HEALTH_LOST_PER_PIECE = 3;\nexports.BUY_XP_COST = 5;\nexports.BUY_XP_AMOUNT = 4;\nexports.PIECES_TO_EVOLVE = 3;\nexports.DEFAULT_TURN_COUNT = 300;\nexports.DEFAULT_TURN_DURATION = 100;\nexports.DAMAGE_RATIO = 7;\nexports.MAX_NAME_LENGTH = 16;\nexports.MAX_PLAYERS_IN_GAME = 8;\nexports.LOBBY_WAIT_TIME = 90;\nexports.AVAILABLE_PROFILE_PICTURES = {\n    1: \"Budaye\",\n    4: \"Aardorn\",\n    5: \"Nut\",\n    7: \"Embra\",\n    8: \"Tweesher\"\n};\n","\"use strict\";\nexports.__esModule = true;\nexports.attackTypes = exports.DefinitionClass = void 0;\nvar DefinitionClass;\n(function (DefinitionClass) {\n    DefinitionClass[\"VALIANT\"] = \"Valiant\";\n    DefinitionClass[\"ARCANE\"] = \"Arcane\";\n    DefinitionClass[\"CUNNING\"] = \"Cunning\";\n})(DefinitionClass = exports.DefinitionClass || (exports.DefinitionClass = {}));\nexports.attackTypes = {\n    basic: { name: \"basic\", range: 1 },\n    shoot: { name: \"shoot\", range: 2 }\n};\n","\"use strict\";\nexports.__esModule = true;\nexports.CreatureType = void 0;\nvar CreatureType;\n(function (CreatureType) {\n    CreatureType[\"Wood\"] = \"Wood\";\n    CreatureType[\"Earth\"] = \"Earth\";\n    CreatureType[\"Water\"] = \"Water\";\n    CreatureType[\"Fire\"] = \"Fire\";\n    CreatureType[\"Metal\"] = \"Metal\";\n})(CreatureType = exports.CreatureType || (exports.CreatureType = {}));\n","\"use strict\";\nexports.__esModule = true;\nexports.GamePhase = void 0;\nvar GamePhase;\n(function (GamePhase) {\n    GamePhase[GamePhase[\"PREPARING\"] = 0] = \"PREPARING\";\n    GamePhase[GamePhase[\"READY\"] = 1] = \"READY\";\n    GamePhase[GamePhase[\"PLAYING\"] = 2] = \"PLAYING\";\n})(GamePhase = exports.GamePhase || (exports.GamePhase = {}));\n","\"use strict\";\nexports.__esModule = true;\nexports.getXpToNextLevel = void 0;\nvar constants_1 = require(\"./constants\");\nvar LOWER_XP = true;\nvar XP_TO_NEXT_LEVEL = LOWER_XP\n    ? [\n        1,\n        1,\n        2,\n        4,\n        8,\n        13,\n        18,\n        24,\n        30\n    ]\n    : [\n        1,\n        1,\n        2,\n        4,\n        8,\n        16,\n        24,\n        32,\n        40\n    ];\nvar getXpToNextLevel = function (level) {\n    if (level === constants_1.MAX_PLAYER_LEVEL) {\n        return null;\n    }\n    var result = XP_TO_NEXT_LEVEL[level - 1];\n    if (result === undefined) {\n        return null;\n    }\n    return result;\n};\nexports.getXpToNextLevel = getXpToNextLevel;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nexports.__esModule = true;\nexports.config = exports.QuickChatOption = exports.getXpToNextLevel = exports.defaultGameOptions = exports.getOptions = exports.clonePieceCombatState = exports.createPieceCombatState = exports.CreatureType = exports.DefinitionClass = exports.attackTypes = exports.getRelativeDirection = exports.getDelta = exports.getDistance = exports.createTileCoordinates = exports.Directions = exports.TileType = exports.TITLES = exports.PlayerTitle = exports.GamePhase = exports.validateNicknameFormat = exports.Constants = exports.StreakType = exports.finishedBattle = exports.inProgressBattle = exports.PlayerBattleStatus = exports.PlayerStatus = void 0;\nvar player_list_player_1 = require(\"./player-list-player\");\n__createBinding(exports, player_list_player_1, \"PlayerStatus\");\n__createBinding(exports, player_list_player_1, \"PlayerBattleStatus\");\n__createBinding(exports, player_list_player_1, \"inProgressBattle\");\n__createBinding(exports, player_list_player_1, \"finishedBattle\");\nvar streakType_1 = require(\"./streakType\");\n__createBinding(exports, streakType_1, \"StreakType\");\nvar Constants = require(\"./constants\");\nexports.Constants = Constants;\n__exportStar(require(\"./constants\"), exports);\nvar nickname_1 = require(\"./nickname\");\n__createBinding(exports, nickname_1, \"validateNicknameFormat\");\nvar game_phase_1 = require(\"./game-phase\");\n__createBinding(exports, game_phase_1, \"GamePhase\");\nvar titles_1 = require(\"./titles\");\n__createBinding(exports, titles_1, \"PlayerTitle\");\n__createBinding(exports, titles_1, \"TITLES\");\nvar position_1 = require(\"./position\");\n__createBinding(exports, position_1, \"TileType\");\n__createBinding(exports, position_1, \"Directions\");\n__createBinding(exports, position_1, \"createTileCoordinates\");\n__createBinding(exports, position_1, \"getDistance\");\n__createBinding(exports, position_1, \"getDelta\");\n__createBinding(exports, position_1, \"getRelativeDirection\");\nvar creatureDefinition_1 = require(\"./creatureDefinition\");\n__createBinding(exports, creatureDefinition_1, \"attackTypes\");\n__createBinding(exports, creatureDefinition_1, \"DefinitionClass\");\nvar creatureType_1 = require(\"./creatureType\");\n__createBinding(exports, creatureType_1, \"CreatureType\");\nvar pieceCombat_1 = require(\"./pieceCombat\");\n__createBinding(exports, pieceCombat_1, \"createPieceCombatState\");\n__createBinding(exports, pieceCombat_1, \"clonePieceCombatState\");\nvar options_1 = require(\"./options\");\n__createBinding(exports, options_1, \"getOptions\");\n__createBinding(exports, options_1, \"defaultOptions\", \"defaultGameOptions\");\nvar getXpToNextLevel_1 = require(\"./getXpToNextLevel\");\n__createBinding(exports, getXpToNextLevel_1, \"getXpToNextLevel\");\nvar quickChat_1 = require(\"./quickChat\");\n__createBinding(exports, quickChat_1, \"QuickChatOption\");\nvar config_1 = require(\"./config\");\n__createBinding(exports, config_1, \"config\");\n","\"use strict\";\nexports.__esModule = true;\nexports.validateNicknameFormat = void 0;\nvar constants_1 = require(\"./constants\");\nvar NAME_REGEX = /^[a-zA-Z0-9\\ ]*$/;\nvar validateNicknameFormat = function (nickname) {\n    if (!nickname || !nickname.length || nickname.length < 4) {\n        return \"Nickname must be at least 4 characters long\";\n    }\n    if (nickname.length > constants_1.MAX_NAME_LENGTH) {\n        return \"Name too long\";\n    }\n    if (nickname.match(NAME_REGEX) === null) {\n        return \"Invalid characters in name\";\n    }\n    return null;\n};\nexports.validateNicknameFormat = validateNicknameFormat;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.getOptions = exports.defaultOptions = void 0;\nvar constants_1 = require(\"./constants\");\nvar game_phase_1 = require(\"./game-phase\");\nexports.defaultOptions = {\n    phaseLengths: constants_1.PHASE_LENGTHS,\n    turnCount: constants_1.DEFAULT_TURN_COUNT,\n    turnDuration: constants_1.DEFAULT_TURN_DURATION\n};\nvar getOptions = function (options) { return (__assign(__assign({}, exports.defaultOptions), options)); };\nexports.getOptions = getOptions;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.clonePieceCombatState = exports.createPieceCombatState = void 0;\nvar createPieceCombatState = function () { return ({\n    board: {\n        canMoveAtTurn: null,\n        canBeAttackedAtTurn: 0,\n        canAttackAtTurn: null,\n        removeFromBoardAtTurn: null\n    },\n    targetId: null\n}); };\nexports.createPieceCombatState = createPieceCombatState;\nvar clonePieceCombatState = function (combat) {\n    if (!combat || !combat.board) {\n        return exports.createPieceCombatState();\n    }\n    return __assign(__assign({}, combat), { board: __assign({}, combat.board) });\n};\nexports.clonePieceCombatState = clonePieceCombatState;\n","\"use strict\";\nexports.__esModule = true;\nexports.finishedBattle = exports.inProgressBattle = exports.PlayerStatus = exports.PlayerBattleStatus = void 0;\nvar PlayerBattleStatus;\n(function (PlayerBattleStatus) {\n    PlayerBattleStatus[PlayerBattleStatus[\"IN_PROGRESS\"] = 0] = \"IN_PROGRESS\";\n    PlayerBattleStatus[PlayerBattleStatus[\"FINISHED\"] = 1] = \"FINISHED\";\n})(PlayerBattleStatus = exports.PlayerBattleStatus || (exports.PlayerBattleStatus = {}));\nvar PlayerStatus;\n(function (PlayerStatus) {\n    PlayerStatus[PlayerStatus[\"CONNECTED\"] = 0] = \"CONNECTED\";\n    PlayerStatus[PlayerStatus[\"DEAD\"] = 1] = \"DEAD\";\n    PlayerStatus[PlayerStatus[\"QUIT\"] = 2] = \"QUIT\";\n})(PlayerStatus = exports.PlayerStatus || (exports.PlayerStatus = {}));\nvar inProgressBattle = function (opponentId) { return ({\n    status: PlayerBattleStatus.IN_PROGRESS,\n    opponentId: opponentId\n}); };\nexports.inProgressBattle = inProgressBattle;\nvar finishedBattle = function (opponentId, isHomePlayer, homeScore, awayScore) { return ({\n    status: PlayerBattleStatus.FINISHED,\n    opponentId: opponentId,\n    isHomePlayer: isHomePlayer,\n    homeScore: homeScore,\n    awayScore: awayScore\n}); };\nexports.finishedBattle = finishedBattle;\n","\"use strict\";\nexports.__esModule = true;\nexports.TileType = exports.getRelativeDirection = exports.Directions = exports.getDistance = exports.getDelta = exports.createTileCoordinates = void 0;\nvar createTileCoordinates = function (x, y) { return ({ x: x, y: y }); };\nexports.createTileCoordinates = createTileCoordinates;\nvar getDelta = function (a, b) { return ({\n    x: Math.abs(a.x - b.x),\n    y: Math.abs(a.y - b.y)\n}); };\nexports.getDelta = getDelta;\nvar getDistance = function (a, b) {\n    var _a = exports.getDelta(a, b), x = _a.x, y = _a.y;\n    return x + y;\n};\nexports.getDistance = getDistance;\nexports.Directions = {\n    UP: { x: 0, y: -1 },\n    RIGHT: { x: 1, y: 0 },\n    DOWN: { x: 0, y: 1 },\n    LEFT: { x: -1, y: 0 }\n};\n/**\n * Returns the relative direction of position b from the perspective of position a\n *\n * @param from The position to find the direction relative from\n * @param to The position to find the direction relative to\n */\nvar getRelativeDirection = function (from, to) {\n    if (from.x < to.x) {\n        return exports.Directions.RIGHT;\n    }\n    if (from.x > to.x) {\n        return exports.Directions.LEFT;\n    }\n    if (from.y < to.y) {\n        return exports.Directions.DOWN;\n    }\n    if (from.y > to.y) {\n        return exports.Directions.UP;\n    }\n    return { x: 0, y: 0 };\n};\nexports.getRelativeDirection = getRelativeDirection;\nvar TileType;\n(function (TileType) {\n    TileType[TileType[\"BOARD\"] = 0] = \"BOARD\";\n    TileType[TileType[\"BENCH\"] = 1] = \"BENCH\";\n})(TileType = exports.TileType || (exports.TileType = {}));\n","\"use strict\";\nexports.__esModule = true;\nexports.QuickChatOption = void 0;\nvar QuickChatOption;\n(function (QuickChatOption) {\n    QuickChatOption[\"GL\"] = \"GL\";\n    QuickChatOption[\"HAPPY\"] = \"\\uD83D\\uDE03\";\n    QuickChatOption[\"SHOCKED\"] = \"\\uD83D\\uDE31\";\n    QuickChatOption[\"ANGRY\"] = \"\\uD83D\\uDE20\";\n})(QuickChatOption = exports.QuickChatOption || (exports.QuickChatOption = {}));\n","\"use strict\";\nexports.__esModule = true;\nexports.StreakType = void 0;\nvar StreakType;\n(function (StreakType) {\n    StreakType[StreakType[\"WIN\"] = 0] = \"WIN\";\n    StreakType[StreakType[\"LOSS\"] = 1] = \"LOSS\";\n})(StreakType = exports.StreakType || (exports.StreakType = {}));\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.TITLES = exports.PlayerTitle = void 0;\nvar PlayerTitle;\n(function (PlayerTitle) {\n    PlayerTitle[PlayerTitle[\"Developer\"] = 1] = \"Developer\";\n    PlayerTitle[PlayerTitle[\"Contributor\"] = 2] = \"Contributor\";\n    PlayerTitle[PlayerTitle[\"HallOfFame\"] = 3] = \"HallOfFame\";\n})(PlayerTitle = exports.PlayerTitle || (exports.PlayerTitle = {}));\nexports.TITLES = (_a = {},\n    _a[PlayerTitle.Developer] = { text: \"Developer\" },\n    _a[PlayerTitle.Contributor] = { text: \"Contributor\" },\n    _a[PlayerTitle.HallOfFame] = { text: \"Hall of Fame\" },\n    _a);\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.outgoing = exports.incoming = void 0;\nvar networking_1 = require(\"@shoki/networking\");\nexports.incoming = (_a = networking_1.protocol(), _a.incoming), exports.outgoing = _a.outgoing;\n","\"use strict\";\nexports.__esModule = true;\nexports.GameServerToClient = exports.LobbyServerToClient = exports.ClientToServer = void 0;\nexports.ClientToServer = require(\"./client-to-server\");\nexports.LobbyServerToClient = require(\"./server-to-client/server-to-client-lobby\");\nexports.GameServerToClient = require(\"./server-to-client/server-to-client-game\");\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.outgoing = exports.incoming = void 0;\nvar networking_1 = require(\"@shoki/networking\");\nexports.incoming = (_a = networking_1.protocol(), _a.incoming), exports.outgoing = _a.outgoing;\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.outgoing = exports.incoming = void 0;\nvar networking_1 = require(\"@shoki/networking\");\nexports.incoming = (_a = networking_1.protocol(), _a.incoming), exports.outgoing = _a.outgoing;\n","\"use strict\";\nexports.__esModule = true;\nexports.BoardGrid = void 0;\nvar React = require(\"react\");\nvar context_1 = require(\"../context\");\nvar UndroppableTile_1 = require(\"./tile/UndroppableTile\");\nvar DroppableTile_1 = require(\"./tile/DroppableTile\");\nvar BoardItems_1 = require(\"./BoardItems\");\n// eslint-disable-next-line no-bitwise\nvar isBoardTileDark = function (x, y) { return ((y ^ x) & 1) !== 0; };\nvar BoardRows = function (_a) {\n    var onDrop = _a.onDrop, onClick = _a.onClick;\n    var _b = context_1.useBoard(), locked = _b.locked, piecePositions = _b.piecePositions, _c = _b.size, width = _c.width, height = _c.height;\n    var rows = [];\n    for (var y = 0; y < height; y++) {\n        var tiles = [];\n        for (var x = 0; x < width; x++) {\n            var isDark = isBoardTileDark(x, y);\n            var piecePositionKey = x + \",\" + y;\n            var tileContainsPiece = Boolean(piecePositions[piecePositionKey]);\n            tiles.push((!tileContainsPiece && !locked)\n                ? React.createElement(DroppableTile_1.DroppableTile, { key: \"tile-\" + x, isDark: isDark, x: x, y: y, onDrop: onDrop, onClick: onClick })\n                : React.createElement(UndroppableTile_1.UndroppableTile, { key: \"tile-\" + x, isDark: isDark }));\n        }\n        rows.push(React.createElement(\"div\", { key: \"row-\" + y, className: \"tile-row\" }, tiles));\n    }\n    return React.createElement(\"div\", null, rows);\n};\nvar getTilePosition = function (width, height, x, y) { return ({\n    left: x / width,\n    top: y / height\n}); };\nvar PositionablePieceStyle = function () {\n    var _a = context_1.useBoard().size, height = _a.height, width = _a.width;\n    var styles = [];\n    var TILE_BASE_Z_INDEX = 10;\n    for (var x = 0; x < width; x++) {\n        for (var y = 0; y < height; y++) {\n            var _b = getTilePosition(width, height, x, y), left = _b.left, top_1 = _b.top;\n            styles.push(\".positionable-piece.x-\" + x + \" { left: \" + (left * 100).toFixed(2) + \"%; }\");\n            styles.push(\".positionable-piece.y-\" + y + \" { top: \" + (top_1 * 100).toFixed(2) + \"%; z-index: \" + (TILE_BASE_Z_INDEX + y + 1) + \"; }\");\n        }\n    }\n    return React.createElement(\"style\", null, styles.join(\"\\n\"));\n};\nvar BoardGrid = function (_a) {\n    var state = _a.state, renderItem = _a.renderItem, onDrop = _a.onDrop, onClick = _a.onClick;\n    return (React.createElement(context_1.BoardContextProvider, { value: state },\n        React.createElement(PositionablePieceStyle, null),\n        React.createElement(BoardRows, { onDrop: onDrop, onClick: onClick }),\n        React.createElement(BoardItems_1.BoardItems, { render: renderItem })));\n};\nexports.BoardGrid = BoardGrid;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.BoardItems = void 0;\nvar React = require(\"react\");\nvar context_1 = require(\"../context\");\nvar BoardItem = function (_a) {\n    var x = _a.x, y = _a.y, children = _a.children;\n    return (React.createElement(\"div\", { className: \"positionable-piece x-\" + x + \" y-\" + y }, children));\n};\nvar BoardItems = function (_a) {\n    var e_1, _b;\n    var render = _a.render;\n    var piecePositions = context_1.useBoard().piecePositions;\n    var pieceElements = [];\n    // this weird code is needed so that React keeps the same DOM elements, thus preserving the CSS animations\n    var entries = Object.entries(piecePositions);\n    entries.sort(function (_a, _b) {\n        var _c = __read(_a, 2), aPosition = _c[0], aId = _c[1];\n        var _d = __read(_b, 2), bPosition = _d[0], bId = _d[1];\n        return aId.localeCompare(bId);\n    });\n    try {\n        for (var entries_1 = __values(entries), entries_1_1 = entries_1.next(); !entries_1_1.done; entries_1_1 = entries_1.next()) {\n            var _c = __read(entries_1_1.value, 2), position = _c[0], id = _c[1];\n            if (!id) {\n                continue;\n            }\n            var _d = __read(position.split(\",\").map(function (i) { return parseInt(i, 10); }), 2), x = _d[0], y = _d[1];\n            pieceElements.push(React.createElement(BoardItem, { key: id, x: x, y: y }, render(id, x, y)));\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (entries_1_1 && !entries_1_1.done && (_b = entries_1[\"return\"])) _b.call(entries_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return React.createElement(React.Fragment, null, pieceElements);\n};\nexports.BoardItems = BoardItems;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.BoardGrid = void 0;\nvar BoardGrid_1 = require(\"./BoardGrid\");\n__createBinding(exports, BoardGrid_1, \"BoardGrid\");\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.DroppableTile = void 0;\nvar React = require(\"react\");\nvar react_dnd_1 = require(\"react-dnd\");\nvar context_1 = require(\"../../context\");\nvar getOverlayClassName_1 = require(\"./getOverlayClassName\");\nvar DroppableTile = function (_a) {\n    var isDark = _a.isDark, x = _a.x, y = _a.y, onDrop = _a.onDrop, onClick = _a.onClick;\n    var belowPieceLimit = context_1.useBelowPieceLimit();\n    var pieces = context_1.usePieces();\n    var _b = __read(react_dnd_1.useDrop({\n        accept: \"Piece\",\n        drop: function (item) { return onDrop && onDrop(item, x, y); },\n        canDrop: function (_a) {\n            var piece = _a.piece;\n            var pieceIsFromSameBoard = Boolean(pieces[piece.id]);\n            return belowPieceLimit || pieceIsFromSameBoard;\n        },\n        collect: function (monitor) { return ({\n            canDrop: !!monitor.canDrop(),\n            isDragging: !!monitor.getItem()\n        }); }\n    }), 2), _c = _b[0], canDrop = _c.canDrop, isDragging = _c.isDragging, drop = _b[1];\n    var onClickFn = onClick ? function () { return onClick(x, y); } : undefined;\n    return (React.createElement(\"div\", { ref: drop, className: \"tile \" + (isDark ? \"dark\" : \"light\"), \"touch-action\": \"none\", onPointerUp: onClickFn },\n        React.createElement(\"div\", { className: \"\" + getOverlayClassName_1.getOverlayClassName(isDragging, canDrop) })));\n};\nexports.DroppableTile = DroppableTile;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.UndroppableTile = void 0;\nvar React = require(\"react\");\nvar react_dnd_1 = require(\"react-dnd\");\nvar context_1 = require(\"../../context\");\nvar getOverlayClassName_1 = require(\"./getOverlayClassName\");\nvar UndroppableTile = function (_a) {\n    var isDark = _a.isDark;\n    var id = context_1.useBoard().id;\n    var _b = __read(react_dnd_1.useDrop({\n        accept: \"Piece\",\n        collect: function (monitor) { return ({\n            isDragging: !!monitor.getItem()\n        }); }\n    }), 2), isDragging = _b[0].isDragging, drop = _b[1];\n    return (React.createElement(\"div\", { ref: drop, className: \"board-\" + id + \"-tile tile \" + (isDark ? \"dark\" : \"light\") + \" style-default\", \"touch-action\": \"none\" },\n        React.createElement(\"div\", { className: \"\" + getOverlayClassName_1.getOverlayClassName(isDragging, false) })));\n};\nexports.UndroppableTile = UndroppableTile;\n","\"use strict\";\nexports.__esModule = true;\nexports.getOverlayClassName = void 0;\nvar getOverlayClassName = function (isDragging, canDrop) {\n    if (isDragging && canDrop === false) {\n        return \"overlay not-allowed\";\n    }\n    return \"overlay\";\n};\nexports.getOverlayClassName = getOverlayClassName;\n","\"use strict\";\nexports.__esModule = true;\nexports.usePiecePositions = exports.usePieces = exports.useBelowPieceLimit = exports.useBoard = exports.BoardContextProvider = void 0;\nvar react_1 = require(\"react\");\nvar board_1 = require(\"@shoki/board\");\nvar BoardContext = react_1.createContext(null);\nBoardContext.displayName = \"BoardContext\";\nexports.BoardContextProvider = BoardContext.Provider;\nvar useBoard = function () { return react_1.useContext(BoardContext); };\nexports.useBoard = useBoard;\nvar useBelowPieceLimit = function () {\n    var board = react_1.useContext(BoardContext);\n    if (!board) {\n        return false;\n    }\n    return board.pieceLimit === null || board_1.BoardSelectors.isBelowPieceLimit(board);\n};\nexports.useBelowPieceLimit = useBelowPieceLimit;\nvar usePieces = function () {\n    var board = react_1.useContext(BoardContext);\n    if (!board) {\n        return {};\n    }\n    return board.pieces;\n};\nexports.usePieces = usePieces;\nvar usePiecePositions = function () {\n    var board = react_1.useContext(BoardContext);\n    if (!board) {\n        return {};\n    }\n    return board.piecePositions;\n};\nexports.usePiecePositions = usePiecePositions;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.BoardGrid = exports.useBelowPieceLimit = exports.usePiecePositions = exports.usePieces = exports.useBoard = exports.BoardContextProvider = void 0;\nvar context_1 = require(\"./context\");\n__createBinding(exports, context_1, \"BoardContextProvider\");\n__createBinding(exports, context_1, \"useBoard\");\n__createBinding(exports, context_1, \"usePieces\");\n__createBinding(exports, context_1, \"usePiecePositions\");\n__createBinding(exports, context_1, \"useBelowPieceLimit\");\nvar components_1 = require(\"./components\");\n__createBinding(exports, components_1, \"BoardGrid\");\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.topLeftToBottomRightSortPositions = exports.topToBottomMiddleSortPositions = exports.rotatePiecesAboutCenter = exports.mergeBoards = exports.BoardSelectors = exports.createBoardSlice = exports.createInitialBoardState = void 0;\nvar state_1 = require(\"./state\");\n__createBinding(exports, state_1, \"createInitialBoardState\");\n__createBinding(exports, state_1, \"createBoardSlice\");\nexports.BoardSelectors = require(\"./selectors\");\nvar mergeBoards_1 = require(\"./utils/mergeBoards\");\n__createBinding(exports, mergeBoards_1, \"mergeBoards\");\nvar rotateGridPosition_1 = require(\"./utils/rotateGridPosition\");\n__createBinding(exports, rotateGridPosition_1, \"rotatePiecesAboutCenter\");\nvar positionSort_1 = require(\"./positionSort\");\n__createBinding(exports, positionSort_1, \"topToBottomMiddleSortPositions\");\n__createBinding(exports, positionSort_1, \"topLeftToBottomRightSortPositions\");\n","\"use strict\";\nexports.__esModule = true;\nexports.topLeftToBottomRightSortPositions = exports.topToBottomMiddleSortPositions = void 0;\nvar SORT_A_FIRST = -1;\nvar SORT_A_SECOND = 1;\nvar topToBottomMiddleSortPositions = function (a, b) {\n    if (a.y < b.y) {\n        return SORT_A_FIRST;\n    }\n    if (a.y > b.y) {\n        return SORT_A_SECOND;\n    }\n    // todo tie this into board size\n    var distanceFromMiddleA = Math.abs(a.x - 3);\n    var distanceFromMiddleB = Math.abs(b.x - 3);\n    if (distanceFromMiddleA < distanceFromMiddleB) {\n        return SORT_A_FIRST;\n    }\n    if (distanceFromMiddleA > distanceFromMiddleB) {\n        return SORT_A_SECOND;\n    }\n    return SORT_A_FIRST;\n};\nexports.topToBottomMiddleSortPositions = topToBottomMiddleSortPositions;\nvar topLeftToBottomRightSortPositions = function (a, b) {\n    if (a.y < b.y) {\n        return SORT_A_FIRST;\n    }\n    if (a.y > b.y) {\n        return SORT_A_SECOND;\n    }\n    if (a.x < b.x) {\n        return SORT_A_FIRST;\n    }\n    if (a.x > b.x) {\n        return SORT_A_SECOND;\n    }\n    return SORT_A_FIRST;\n};\nexports.topLeftToBottomRightSortPositions = topLeftToBottomRightSortPositions;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.getFirstEmptySlot = exports.getPieceForPosition = exports.isBelowPieceLimit = exports.getPiece = exports.getAllPieces = exports.getPiecePosition = void 0;\nvar positionSort_1 = require(\"./positionSort\");\n// todo add a position-for-id lookup to the board state to improve this\nvar getPiecePosition = function (state, pieceId) {\n    var entry = Object.entries(state.piecePositions)\n        .find(function (_a) {\n        var _b = __read(_a, 2), _ = _b[0], id = _b[1];\n        return id === pieceId;\n    });\n    if (!entry) {\n        return null;\n    }\n    var _a = __read(entry[0].split(\",\")\n        .map(function (val) { return parseInt(val, 10); }), 2), x = _a[0], y = _a[1];\n    return { x: x, y: y };\n};\nexports.getPiecePosition = getPiecePosition;\nvar getAllPieces = function (state) { return Object.values(state.pieces).filter(function (p) { return p !== null; }); };\nexports.getAllPieces = getAllPieces;\nvar getPiece = function (state, pieceId) { return state.pieces[pieceId] || null; };\nexports.getPiece = getPiece;\nvar isBelowPieceLimit = function (state) { return state.pieceLimit === null || exports.getAllPieces(state).length < state.pieceLimit; };\nexports.isBelowPieceLimit = isBelowPieceLimit;\nvar getPieceForPosition = function (state, x, y) {\n    return state.pieces[state.piecePositions[x + \",\" + y]] || null;\n};\nexports.getPieceForPosition = getPieceForPosition;\nvar getFirstEmptySlot = function (state, sortPositions) {\n    if (sortPositions === void 0) { sortPositions = positionSort_1.topToBottomMiddleSortPositions; }\n    var emptyPositions = [];\n    for (var y = 0; y < state.size.height; y++) {\n        for (var x = 0; x < state.size.width; x++) {\n            var boardPiece = exports.getPieceForPosition(state, x, y);\n            if (!boardPiece) {\n                emptyPositions.push({ x: x, y: y });\n            }\n        }\n    }\n    if (emptyPositions.length === 0) {\n        return null;\n    }\n    emptyPositions.sort(sortPositions);\n    var position = emptyPositions[0];\n    return {\n        x: position.x,\n        y: position.y\n    };\n};\nexports.getFirstEmptySlot = getFirstEmptySlot;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.createBoardSlice = exports.createInitialBoardState = void 0;\nvar toolkit_1 = require(\"@reduxjs/toolkit\");\nvar filter_1 = require(\"./utils/filter\");\nvar createInitialBoardState = function (id, size) {\n    if (size === void 0) { size = {\n        width: 7,\n        height: 3\n    }; }\n    return ({\n        id: id,\n        pieces: {},\n        piecePositions: {},\n        locked: false,\n        pieceLimit: null,\n        size: size\n    });\n};\nexports.createInitialBoardState = createInitialBoardState;\nvar createBoardSlice = function (id, size) {\n    var _a = toolkit_1.createSlice({\n        name: \"board-\" + id,\n        initialState: exports.createInitialBoardState(id, size),\n        reducers: {\n            setBoardSizeCommand: function (state, _a) {\n                var _b = _a.payload, width = _b.width, height = _b.height;\n                var differenceWidth = width - state.size.width;\n                var differenceHeight = height - state.size.height;\n                return __assign(__assign({}, state), { size: { width: width, height: height }, piecePositions: Object.entries(state.piecePositions).reduce(function (newPiecePositions, _a) {\n                        var _b;\n                        var _c = __read(_a, 2), position = _c[0], pieceId = _c[1];\n                        var _d = __read(position.split(\",\").map(function (val) { return parseInt(val, 10); }), 2), x = _d[0], y = _d[1];\n                        var newX = x + differenceWidth;\n                        var newY = y + differenceHeight;\n                        return __assign(__assign({}, newPiecePositions), (_b = {}, _b[newX + \",\" + newY] = pieceId, _b));\n                    }, {}) });\n            },\n            lockBoardCommand: function (state) { return (__assign(__assign({}, state), { locked: true })); },\n            unlockBoardCommand: function (state) { return (__assign(__assign({}, state), { locked: false })); },\n            setPieceLimitCommand: function (state, _a) {\n                var limit = _a.payload;\n                return (__assign(__assign({}, state), { pieceLimit: limit }));\n            },\n            setBoardPiecesCommand: function (state, _a) {\n                var _b = _a.payload, pieces = _b.pieces, piecePositions = _b.piecePositions, newSize = _b.size;\n                return (__assign(__assign(__assign({}, state), { pieces: __assign({}, pieces), piecePositions: __assign({}, piecePositions) }), (newSize ? { size: { width: newSize.width, height: newSize.height } } : {})));\n            },\n            addBoardPieceCommand: function (state, _a) {\n                var _b, _c;\n                var _d = _a.payload, x = _d.x, y = _d.y, piece = _d.piece;\n                return (__assign(__assign({}, state), { pieces: __assign(__assign({}, state.pieces), (_b = {}, _b[piece.id] = piece, _b)), piecePositions: __assign(__assign({}, state.piecePositions), (_c = {}, _c[x + \",\" + y] = piece.id, _c)) }));\n            },\n            moveBoardPieceCommand: function (state, _a) {\n                var _b;\n                var _c = _a.payload, pieceId = _c.pieceId, from = _c.from, to = _c.to;\n                var piece = state.pieces[pieceId];\n                var fromString = from.x + \",\" + from.y;\n                var pieceAtFrom = state.piecePositions[fromString];\n                // safety catch\n                if (!piece || piece.id !== pieceId || piece.id !== pieceAtFrom) {\n                    return state;\n                }\n                var toString = to.x + \",\" + to.y;\n                var newState = __assign(__assign({}, state), { piecePositions: __assign(__assign({}, state.piecePositions), (_b = {}, _b[toString] = pieceId, _b)) });\n                delete newState.piecePositions[fromString];\n                return newState;\n            },\n            removeBoardPiecesCommand: function (state, _a) {\n                var pieceIds = _a.payload;\n                return (__assign(__assign({}, state), { pieces: filter_1.getPiecesWithoutIds(state.pieces, pieceIds), piecePositions: filter_1.getPiecePositionsWithoutIds(state.piecePositions, pieceIds) }));\n            },\n            updateBoardPiecesCommand: function (state, _a) {\n                var e_1, _b;\n                var pieces = _a.payload;\n                var newPieces = __assign({}, state.pieces);\n                try {\n                    for (var pieces_1 = __values(pieces), pieces_1_1 = pieces_1.next(); !pieces_1_1.done; pieces_1_1 = pieces_1.next()) {\n                        var piece = pieces_1_1.value;\n                        newPieces[piece.id] = piece;\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (pieces_1_1 && !pieces_1_1.done && (_b = pieces_1[\"return\"])) _b.call(pieces_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                return __assign(__assign({}, state), { pieces: newPieces });\n            },\n            swapPiecesCommand: function (state, _a) {\n                var _b;\n                var _c = _a.payload, aId = _c.aId, bId = _c.bId;\n                if (!aId || !bId) {\n                    return state;\n                }\n                var a = state.pieces[aId];\n                var b = state.pieces[bId];\n                if (!a || !b) {\n                    return state;\n                }\n                var positions = Object.entries(state.piecePositions);\n                var aPositionEntry = positions.find(function (_a) {\n                    var _b = __read(_a, 2), pieceId = _b[1];\n                    return pieceId === aId;\n                });\n                var bPositionEntry = positions.find(function (_a) {\n                    var _b = __read(_a, 2), pieceId = _b[1];\n                    return pieceId === bId;\n                });\n                if (!aPositionEntry || !bPositionEntry) {\n                    return state;\n                }\n                var _d = __read(aPositionEntry, 1), aPosition = _d[0];\n                var _e = __read(bPositionEntry, 1), bPosition = _e[0];\n                return __assign(__assign({}, state), { piecePositions: __assign(__assign({}, state.piecePositions), (_b = {}, _b[aPosition] = b.id, _b[bPosition] = a.id, _b)) });\n            }\n        }\n    }), reducer = _a.reducer, _b = _a.actions, setBoardSizeCommand = _b.setBoardSizeCommand, lockBoardCommand = _b.lockBoardCommand, unlockBoardCommand = _b.unlockBoardCommand, setPieceLimitCommand = _b.setPieceLimitCommand, setBoardPiecesCommand = _b.setBoardPiecesCommand, addBoardPieceCommand = _b.addBoardPieceCommand, moveBoardPieceCommand = _b.moveBoardPieceCommand, removeBoardPiecesCommand = _b.removeBoardPiecesCommand, updateBoardPiecesCommand = _b.updateBoardPiecesCommand, swapPiecesCommand = _b.swapPiecesCommand;\n    return {\n        boardReducer: reducer,\n        commands: {\n            setBoardSizeCommand: setBoardSizeCommand,\n            lockBoardCommand: lockBoardCommand,\n            unlockBoardCommand: unlockBoardCommand,\n            setPieceLimitCommand: setPieceLimitCommand,\n            setBoardPiecesCommand: setBoardPiecesCommand,\n            addBoardPieceCommand: addBoardPieceCommand,\n            moveBoardPieceCommand: moveBoardPieceCommand,\n            removeBoardPiecesCommand: removeBoardPiecesCommand,\n            updateBoardPiecesCommand: updateBoardPiecesCommand,\n            swapPiecesCommand: swapPiecesCommand\n        }\n    };\n};\nexports.createBoardSlice = createBoardSlice;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.getPiecePositionsWithoutIds = exports.getPiecesWithoutIds = void 0;\nvar getPiecesWithoutIds = function (pieces, ids) {\n    var e_1, _a;\n    var newPieces = __assign({}, pieces);\n    try {\n        for (var ids_1 = __values(ids), ids_1_1 = ids_1.next(); !ids_1_1.done; ids_1_1 = ids_1.next()) {\n            var pieceId = ids_1_1.value;\n            if (newPieces[pieceId]) {\n                delete newPieces[pieceId];\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (ids_1_1 && !ids_1_1.done && (_a = ids_1[\"return\"])) _a.call(ids_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return newPieces;\n};\nexports.getPiecesWithoutIds = getPiecesWithoutIds;\nvar getPiecePositionsWithoutIds = function (piecePositions, ids) { return Object.entries(piecePositions).reduce(function (newPiecePositions, _a) {\n    var _b = __read(_a, 2), position = _b[0], pieceId = _b[1];\n    // skip the desired piece\n    if (!pieceId || ids.includes(pieceId)) {\n        return newPiecePositions;\n    }\n    newPiecePositions[position] = pieceId;\n    return newPiecePositions;\n}, {}); };\nexports.getPiecePositionsWithoutIds = getPiecePositionsWithoutIds;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.mergeBoards = void 0;\nvar rotateGridPosition_1 = require(\"./rotateGridPosition\");\nvar expandBoard = function (board, _a) {\n    var width = _a.width, height = _a.height;\n    var differenceWidth = width - board.size.width;\n    var differenceHeight = height - board.size.height;\n    return __assign(__assign({}, board), { size: { width: width, height: height }, piecePositions: Object.entries(board.piecePositions).reduce(function (newPiecePositions, _a) {\n            var _b;\n            var _c = __read(_a, 2), position = _c[0], pieceId = _c[1];\n            var _d = __read(position.split(\",\").map(function (val) { return parseInt(val, 10); }), 2), x = _d[0], y = _d[1];\n            var newX = x + differenceWidth;\n            var newY = y + differenceHeight;\n            return __assign(__assign({}, newPiecePositions), (_b = {}, _b[newX + \",\" + newY] = pieceId, _b));\n        }, {}) });\n};\nvar mergeBoards = function (id, home, away) {\n    if (home.size.width !== away.size.width || home.size.height !== away.size.height) {\n        throw Error(\"Trying to merge odd-sized boards\");\n    }\n    var newSize = {\n        width: home.size.width,\n        height: home.size.height * 2\n    };\n    var expandedHome = expandBoard(home, newSize);\n    var expandedAway = expandBoard(away, newSize);\n    var rotatedAway = rotateGridPosition_1.rotatePiecesAboutCenter(expandedAway);\n    return {\n        id: id,\n        pieces: __assign(__assign({}, expandedHome.pieces), rotatedAway.pieces),\n        piecePositions: __assign(__assign({}, expandedHome.piecePositions), rotatedAway.piecePositions),\n        locked: true,\n        pieceLimit: null,\n        size: newSize\n    };\n};\nexports.mergeBoards = mergeBoards;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.rotatePiecesAboutCenter = exports.rotateGridPosition = void 0;\nvar selectors_1 = require(\"../selectors\");\nvar rotateGridPosition = function (gridSize, position) { return ({\n    x: gridSize.width - 1 - position.x,\n    y: gridSize.height - 1 - position.y\n}); };\nexports.rotateGridPosition = rotateGridPosition;\nvar rotatePiecesAboutCenter = function (state) {\n    var e_1, _a;\n    var newPositions = [];\n    try {\n        for (var _b = __values(Object.entries(state.pieces)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 1), pieceId = _d[0];\n            var position = selectors_1.getPiecePosition(state, pieceId);\n            if (!position) {\n                continue;\n            }\n            var newPosition = exports.rotateGridPosition(state.size, position);\n            var newPositionKey = newPosition.x + \",\" + newPosition.y;\n            newPositions.push({ pieceId: pieceId, position: newPositionKey });\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return __assign(__assign({}, state), { piecePositions: newPositions.reduce(function (acc, _a) {\n            var _b;\n            var pieceId = _a.pieceId, position = _a.position;\n            return (__assign(__assign({}, acc), (_b = {}, _b[position] = pieceId, _b)));\n        }, {}) });\n};\nexports.rotatePiecesAboutCenter = rotatePiecesAboutCenter;\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.getDependency = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\nvar getDependency = function (key) {\n    var dependencies;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, effects_1.getContext(\"dependencies\")];\n            case 1:\n                dependencies = _a.sent();\n                return [2 /*return*/, dependencies[key]];\n        }\n    });\n};\nexports.getDependency = getDependency;\n","\"use strict\";\nexports.__esModule = true;\nexports.entityFactory = exports.entity = void 0;\nvar redux_saga_1 = require(\"redux-saga\");\nvar variablesStore_1 = require(\"./variablesStore\");\nvar redux_1 = require(\"redux\");\nvar entity = function (_a, id, dependencies, initialVariables) {\n    var reducers = _a.reducers, rootSaga = _a.rootSaga;\n    if (dependencies === void 0) { dependencies = {}; }\n    if (initialVariables === void 0) { initialVariables = {}; }\n    var variableStore = variablesStore_1.createVariableStore(initialVariables);\n    var sagaMiddleware = redux_saga_1[\"default\"]({\n        context: {\n            id: id,\n            dependencies: dependencies,\n            getVariable: variableStore.getVariable,\n            updateVariables: variableStore.updateVariables\n        }\n    });\n    var store = redux_1.createStore(redux_1.combineReducers(reducers), redux_1.applyMiddleware(sagaMiddleware));\n    if (rootSaga) {\n        sagaMiddleware.run(rootSaga);\n    }\n    return {\n        id: id,\n        select: function (selector) { return selector(store.getState()); },\n        getVariable: variableStore.getVariable,\n        runSaga: sagaMiddleware.run,\n        put: function (action) { return store.dispatch(action); }\n    };\n};\nexports.entity = entity;\nvar entityFactory = function (statics) {\n    return function (id, dependencies, initialVariables) {\n        if (dependencies === void 0) { dependencies = {}; }\n        if (initialVariables === void 0) { initialVariables = {}; }\n        if (typeof statics === \"function\") {\n            return exports.entity(statics(dependencies), id, dependencies, initialVariables);\n        }\n        return exports.entity(statics, id, dependencies, initialVariables);\n    };\n};\nexports.entityFactory = entityFactory;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.createVariableStore = exports.updateVariables = exports.getVariable = void 0;\nvar typed_redux_saga_1 = require(\"typed-redux-saga\");\n/**\n * Select a variable from the variable store\n *\n * Accessor for `getVariable` in the {@link VariablesStoreContext}\n *\n * @typeParam TVariables - The type of the variables object\n * @typeParam TResult - The return type of the selector\n *\n * @param selector - The selector function\n * @returns The selected variable from the variable store\n */\nvar getVariable = function (selector) {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"getVariable\"))];\n            case 1: return [2 /*return*/, (_a.sent())(selector)];\n        }\n    });\n};\nexports.getVariable = getVariable;\n/**\n * Update a/some variable(s) in the variable store\n *\n * Accessor for `updateVariables` in the {@link VariablesStoreContext}\n *\n * @typeParam TVariables - The type of the variables object\n *\n * @param patch - The variables to update\n */\nvar updateVariables = function (patch) {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [5 /*yield**/, __values(typed_redux_saga_1.getContext(\"updateVariables\"))];\n            case 1:\n                (_a.sent())(patch);\n                return [2 /*return*/];\n        }\n    });\n};\nexports.updateVariables = updateVariables;\n/**\n * Create a variable store.\n *\n * @typeParam TVariables - The type of the variables object\n *\n * @param defaultVariables - The default set of variables for the store\n *\n * @returns A variable store context {@link VariablesStoreContext}\n */\nvar createVariableStore = function (defaultVariables) {\n    var state = defaultVariables;\n    return {\n        getVariable: function (selector) { return selector(state); },\n        updateVariables: function (patch) {\n            state = __assign(__assign({}, state), patch);\n        }\n    };\n};\nexports.createVariableStore = createVariableStore;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.getDependency = exports.entityFactory = exports.entity = exports.updateVariables = exports.getVariable = void 0;\nvar variablesStore_1 = require(\"./entity/variablesStore\");\n__createBinding(exports, variablesStore_1, \"getVariable\");\n__createBinding(exports, variablesStore_1, \"updateVariables\");\nvar entity_1 = require(\"./entity/entity\");\n__createBinding(exports, entity_1, \"entity\");\n__createBinding(exports, entity_1, \"entityFactory\");\nvar dependency_1 = require(\"./entity/dependency\");\n__createBinding(exports, dependency_1, \"getDependency\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.incomingSaga = void 0;\nvar redux_saga_1 = require(\"redux-saga\");\nvar effects_1 = require(\"redux-saga/effects\");\n/**\n * Listen to an {@link IncomingRegistry} and emit any received actions to the store if they match a pattern\n *\n * @param registry The registry to use\n * @param opcode The opcode to use, must be registered to a {@link ActionStreamPacket} in the {@link PacketSet}\n * @param actions The action pattern to emit to the store\n */\nvar incomingSaga = function (registry, opcode, actions) { return function () {\n    var expectedPacketIndex, channel, actionQueue, _a, index, _b, action, validAction, actionFromQueue;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                expectedPacketIndex = 1;\n                channel = redux_saga_1.eventChannel(function (emit) {\n                    var onReceiveActions = function (packet) { return emit(packet); };\n                    registry.on(opcode, onReceiveActions);\n                    return function () { return registry.off(opcode, onReceiveActions); };\n                });\n                actionQueue = [];\n                _c.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 7];\n                return [4 /*yield*/, effects_1.take(channel)];\n            case 2:\n                _a = _c.sent(), index = _a.index, _b = __read(_a.actions, 1), action = _b[0];\n                validAction = actions.includes(action.type);\n                if (!validAction) {\n                    console.error(\"Unhandled action type: \" + action.type + \" (for opcode \" + opcode + \")\");\n                    return [3 /*break*/, 1];\n                }\n                if (!(index < expectedPacketIndex)) return [3 /*break*/, 3];\n                console.warn(\"Received packet index \" + index + \" before lastReceivedPacketIndex \" + expectedPacketIndex + \" (for opcode \" + opcode + \")\");\n                return [3 /*break*/, 6];\n            case 3:\n                // queue future actions and execute them after the expected one arrives\n                actionQueue[index - expectedPacketIndex] = action;\n                _c.label = 4;\n            case 4:\n                if (!actionQueue[0]) return [3 /*break*/, 6];\n                actionFromQueue = actionQueue.shift();\n                expectedPacketIndex++;\n                return [4 /*yield*/, effects_1.put(actionFromQueue)];\n            case 5:\n                _c.sent();\n                return [3 /*break*/, 4];\n            case 6: return [3 /*break*/, 1];\n            case 7: return [2 /*return*/];\n        }\n    });\n}; };\nexports.incomingSaga = incomingSaga;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.incomingSaga = exports.outgoingSaga = void 0;\nvar outgoingSaga_1 = require(\"./outgoingSaga\");\n__createBinding(exports, outgoingSaga_1, \"outgoingSaga\");\nvar incomingSaga_1 = require(\"./incomingSaga\");\n__createBinding(exports, incomingSaga_1, \"incomingSaga\");\n","\"use strict\";\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.outgoingSaga = void 0;\nvar effects_1 = require(\"redux-saga/effects\");\n/**\n * Take a given action pattern and emit them to the registry under a given opcode\n *\n * @param registry The registry to use\n * @param opcode The opcode to use, must be registered to a {@link ActionStreamPacket} in the {@link PacketSet}\n * @param actions The action pattern to emit\n */\nvar outgoingSaga = function (registry, opcode, actions) { return function () {\n    var lastSentIndex, action, index, payload;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                lastSentIndex = 0;\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 3];\n                return [4 /*yield*/, effects_1.take(actions)];\n            case 2:\n                action = _a.sent();\n                index = ++lastSentIndex;\n                payload = { index: index, actions: [action] };\n                registry.send(opcode, payload);\n                return [3 /*break*/, 1];\n            case 3: return [2 /*return*/];\n        }\n    });\n}; };\nexports.outgoingSaga = outgoingSaga;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.protocol = exports.ActionStream = void 0;\nexports.ActionStream = require(\"./actionStream\");\nvar protocol_1 = require(\"./protocol\");\n__createBinding(exports, protocol_1, \"protocol\");\n","\"use strict\";\nexports.__esModule = true;\nexports.protocol = void 0;\nvar incoming_1 = require(\"./registry/incoming\");\nvar outgoing_1 = require(\"./registry/outgoing\");\nvar protocol = function () { return ({\n    outgoing: outgoing_1.outgoing(),\n    incoming: incoming_1.incoming()\n}); };\nexports.protocol = protocol;\n","\"use strict\";\nexports.__esModule = true;\nexports.incoming = void 0;\nvar incoming = function () { return function (register, unregister) { return ({\n    on: register,\n    off: unregister\n}); }; };\nexports.incoming = incoming;\n","\"use strict\";\nexports.__esModule = true;\nexports.outgoing = void 0;\nvar outgoing = function () { return function (emit) { return ({\n    send: emit\n}); }; };\nexports.outgoing = outgoing;\n","\"use strict\";\nexports.__esModule = true;\nexports.Button = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\n// todo implement primary style\nvar getColor = function (style) { return style === \"primary\" ? \"#fff\" : \"#fff\"; };\nvar getBackground = function (style) { return style === \"primary\" ? \"#1a1c2c\" : \"#1a1c2c\"; };\nvar useStyles = react_jss_1.createUseStyles({\n    button: function (props) { return ({\n        padding: \"0.25em 1em\",\n        fontSize: \"1em\",\n        color: getColor(props.type),\n        background: getBackground(props.type),\n        border: \"none\",\n        cursor: \"pointer\",\n        \"&:disabled\": {\n            background: \"#575758\",\n            cursor: \"not-allowed\"\n        }\n    }); }\n});\nvar Button = function (props) {\n    var classes = useStyles(props);\n    var onClick = props.onClick, _a = props.disabled, disabled = _a === void 0 ? false : _a, children = props.children;\n    return React.createElement(\"button\", { className: classes.button, onClick: !disabled ? onClick : undefined, disabled: disabled }, children);\n};\nexports.Button = Button;\n","\"use strict\";\nexports.__esModule = true;\nexports.Card = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar display_1 = require(\"../display\");\nvar layout_1 = require(\"../layout\");\nvar useStyles = react_jss_1.createUseStyles({\n    card: {\n        boxSizing: \"border-box\",\n        fontFamily: \"Arial, sans-serif\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        cursor: function (_a) {\n            var _b = _a.disabled, disabled = _b === void 0 ? false : _b;\n            return disabled ? \"not-allowed\" : \"pointer\";\n        },\n        userSelect: \"none\",\n        background: \"#4e4e4e\",\n        paddingBottom: \"0.5em\"\n    },\n    name: {\n        fontSize: \"0.8em\",\n        fontWeight: 700\n    },\n    typeIndicator: {\n        zIndex: 20,\n        marginTop: \"-0.5em\",\n        marginLeft: \"-0.125em\",\n        width: \"24px\",\n        height: \"24px\"\n    },\n    cost: {\n        padding: \"0.125em\",\n        marginTop: \"-0.5em\",\n        marginRight: \"-0.1em\",\n        background: \"rgb(128, 128, 128)\"\n    },\n    cardMeta: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-around\"\n    },\n    metaItem: {\n        fontSize: \"0.6rem\",\n        fontWeight: 700,\n        textTransform: \"uppercase\"\n    }\n});\nvar Card = function (props) {\n    var classes = useStyles(props);\n    var _a = props.card, name = _a.name, definitionId = _a.definitionId, type = _a.type, cost = _a.cost, cardClass = _a[\"class\"], onClick = props.onClick, _b = props.disabled, disabled = _b === void 0 ? false : _b;\n    return (React.createElement(\"div\", { className: classes.card, onClick: !disabled ? onClick || undefined : undefined },\n        React.createElement(layout_1.Layout, { direction: \"column\", noSpacer: true },\n            React.createElement(layout_1.Layout, { direction: \"row\", noSpacer: true },\n                React.createElement(\"div\", { className: classes.typeIndicator },\n                    React.createElement(display_1.TypeIndicator, { type: type })),\n                React.createElement(\"div\", { className: classes.cost },\n                    React.createElement(\"span\", null,\n                        \"$\",\n                        cost))),\n            React.createElement(display_1.CreatureImage, { definitionId: definitionId, baseUrl: \"https://creaturechess.jamesmonger.com/\" }),\n            React.createElement(\"h2\", { className: classes.name }, name),\n            React.createElement(\"div\", { className: classes.cardMeta },\n                React.createElement(\"span\", { className: classes.metaItem }, cardClass),\n                React.createElement(\"span\", { className: classes.metaItem }, type)))));\n};\nexports.Card = Card;\n","\"use strict\";\nexports.__esModule = true;\nexports.CardSelector = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar layout_1 = require(\"../layout\");\nvar card_1 = require(\"./card\");\nvar classnames_1 = require(\"classnames\");\nvar useStyles = react_jss_1.createUseStyles({\n    container: {\n        position: \"relative\",\n        marginBottom: \"1em\"\n    },\n    tray: {\n        position: \"absolute\",\n        bottom: \"5%\",\n        width: \"100%\",\n        height: \"70%\",\n        background: \"#2b2b2b\"\n    },\n    cardContainer: {\n        zIndex: 10,\n        width: \"15%\"\n    },\n    selected: {\n        marginTop: \"-1em\"\n    }\n});\nvar CardSelector = function (_a) {\n    var cards = _a.cards, money = _a.money, selectedCardIndex = _a.selectedCardIndex, onSelectCard = _a.onSelectCard;\n    var classes = useStyles();\n    var createCard = function (card, index) {\n        var _a;\n        if (card === null) {\n            return null;\n        }\n        var isSelected = selectedCardIndex === index;\n        var onClick = function () {\n            if (!onSelectCard) {\n                return;\n            }\n            onSelectCard(isSelected ? null : index);\n        };\n        return (React.createElement(\"div\", { className: classnames_1[\"default\"](classes.cardContainer, (_a = {}, _a[classes.selected] = isSelected, _a)) },\n            React.createElement(card_1.Card, { key: index + \"-\" + card.definitionId, disabled: money < card.cost, card: card, onClick: onSelectCard ? onClick : undefined })));\n    };\n    return (React.createElement(layout_1.Layout, { className: classes.container, direction: \"row\", justifyContent: \"space-around\", noSpacer: true },\n        React.createElement(\"div\", { className: classes.tray }),\n        cards.map(createCard)));\n};\nexports.CardSelector = CardSelector;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.CardShop = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar models_1 = require(\"@creature-chess/models\");\nvar layout_1 = require(\"../layout\");\nvar cardSelector_1 = require(\"./cardSelector\");\nvar currentCard_1 = require(\"./currentCard\");\nvar button_1 = require(\"../button\");\nvar display_1 = require(\"../display\");\nvar useStyles = react_jss_1.createUseStyles({\n    container: {\n        width: \"100%\",\n        height: \"100%\"\n    },\n    grow: {\n        flex: 1,\n        marginBottom: \"2em\"\n    },\n    balance: {\n        background: \"#2f2f2f\",\n        padding: \"0 1em\",\n        lineHeight: \"1.5em\"\n    }\n});\nvar CardShop = function (_a) {\n    var cards = _a.cards, money = _a.money, _b = _a.isLocked, isLocked = _b === void 0 ? false : _b, onReroll = _a.onReroll, onToggleLock = _a.onToggleLock, onBuy = _a.onBuy;\n    var classes = useStyles();\n    var _c = __read(React.useState(null), 2), selectedIndex = _c[0], setSelectedIndex = _c[1];\n    var onBuyCurrentCard = function () { return onBuy && selectedIndex !== null && onBuy(selectedIndex); };\n    React.useEffect(function () {\n        if (selectedIndex === null || !cards[selectedIndex]) {\n            return;\n        }\n        var canAfford = cards[selectedIndex].cost <= money;\n        if (!canAfford) {\n            setSelectedIndex(null);\n        }\n    }, [money]);\n    return (React.createElement(layout_1.Layout, { className: classes.container, direction: \"column\" },\n        React.createElement(layout_1.Layout, { direction: \"column\", justifyContent: \"center\", className: classes.grow }, selectedIndex !== null\n            && cards[selectedIndex]\n            && React.createElement(currentCard_1.CurrentCard, { card: cards[selectedIndex], onBuy: onBuyCurrentCard })),\n        React.createElement(cardSelector_1.CardSelector, { cards: cards, money: money, selectedCardIndex: selectedIndex, onSelectCard: setSelectedIndex }),\n        React.createElement(layout_1.Layout, { direction: \"row\", justifyContent: \"space-between\" },\n            React.createElement(button_1.Button, { type: \"primary\", onClick: onReroll, disabled: money < models_1.REROLL_COST },\n                \"New ($\",\n                models_1.REROLL_COST,\n                \")\"),\n            React.createElement(\"div\", { className: classes.balance },\n                React.createElement(display_1.Label, null, \"Balance:\"),\n                \" \",\n                React.createElement(display_1.Label, { type: \"highlight\" },\n                    \"$\",\n                    money)),\n            React.createElement(button_1.Button, { type: \"primary\", onClick: onToggleLock }, isLocked ? \"Unlock\" : \"Lock (1 turn)\"))));\n};\nexports.CardShop = CardShop;\n","\"use strict\";\nexports.__esModule = true;\nexports.CurrentCard = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar display_1 = require(\"../display\");\nvar layout_1 = require(\"../layout\");\nvar button_1 = require(\"../button\");\nvar useStyles = react_jss_1.createUseStyles({\n    buyCard: {\n        textAlign: \"center\",\n        padding: \"1em\",\n        background: \"#4e4e4e\"\n    },\n    currentCard: {\n        background: \"#2f2f2f\"\n    },\n    cardText: {\n        padding: \"1em\",\n        fontFamily: \"Arial, sans-serif\",\n        fontWeight: 700,\n        color: \"#fff\",\n        fontSize: \"0.7em\",\n        textTransform: \"uppercase\"\n    },\n    cardName: {\n        textTransform: \"none\",\n        marginBottom: \"0.35em\"\n    }\n});\nvar CurrentCard = function (_a) {\n    var card = _a.card, onBuy = _a.onBuy;\n    var classes = useStyles();\n    return (React.createElement(React.Fragment, null,\n        React.createElement(layout_1.Layout, { direction: \"row\", justifyContent: \"center\", noSpacer: true, className: classes.currentCard },\n            React.createElement(\"div\", null,\n                React.createElement(display_1.CreatureImage, { definitionId: card.definitionId, baseUrl: \"https://creaturechess.jamesmonger.com/\" })),\n            React.createElement(layout_1.Layout, { direction: \"column\", className: classes.cardText },\n                React.createElement(\"h2\", { className: classes.cardName }, card.name),\n                React.createElement(\"span\", null, card.type),\n                React.createElement(\"span\", null, card[\"class\"]))),\n        React.createElement(\"div\", { className: classes.buyCard },\n            React.createElement(button_1.Button, { type: \"primary\", onClick: onBuy },\n                \"Buy ($\",\n                card.cost,\n                \")\"))));\n};\nexports.CurrentCard = CurrentCard;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.CardShop = exports.CardSelector = exports.Card = void 0;\nvar card_1 = require(\"./card\");\n__createBinding(exports, card_1, \"Card\");\nvar cardSelector_1 = require(\"./cardSelector\");\n__createBinding(exports, cardSelector_1, \"CardSelector\");\nvar cardShop_1 = require(\"./cardShop\");\n__createBinding(exports, cardShop_1, \"CardShop\");\n","\"use strict\";\nvar _a;\nexports.__esModule = true;\nexports.TypeIndicator = void 0;\nvar React = require(\"react\");\nvar models_1 = require(\"@creature-chess/models\");\nvar ICON_FOR_TYPE = (_a = {},\n    _a[models_1.CreatureType.Fire] = \"http://creaturechess.jamesmonger.com/images/ui/type-fire.svg\",\n    _a[models_1.CreatureType.Earth] = \"http://creaturechess.jamesmonger.com/images/ui/type-earth.svg\",\n    _a[models_1.CreatureType.Metal] = \"http://creaturechess.jamesmonger.com/images/ui/type-metal.svg\",\n    _a[models_1.CreatureType.Water] = \"http://creaturechess.jamesmonger.com/images/ui/type-water.svg\",\n    _a[models_1.CreatureType.Wood] = \"http://creaturechess.jamesmonger.com/images/ui/type-wood.svg\",\n    _a);\nvar TypeIndicator = function (_a) {\n    var type = _a.type, className = _a.className;\n    return React.createElement(\"img\", { className: className, src: ICON_FOR_TYPE[type] });\n};\nexports.TypeIndicator = TypeIndicator;\n","\"use strict\";\nexports.__esModule = true;\nexports.CreatureImage = void 0;\nvar React = require(\"react\");\nvar CreatureImage = function (_a) {\n    var _b = _a.baseUrl, baseUrl = _b === void 0 ? \"\" : _b, facing = _a.facing, definitionId = _a.definitionId;\n    return (React.createElement(\"img\", { className: \"image creature-image\", src: baseUrl + \"/images/\" + (facing || \"front\") + \"/\" + definitionId + \".png\" }));\n};\nexports.CreatureImage = CreatureImage;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.TypeIndicator = exports.ProgressBar = exports.Label = exports.CreatureImage = void 0;\nvar creatureImage_1 = require(\"./creatureImage\");\n__createBinding(exports, creatureImage_1, \"CreatureImage\");\nvar label_1 = require(\"./label\");\n__createBinding(exports, label_1, \"Label\");\nvar progressBar_1 = require(\"./progressBar\");\n__createBinding(exports, progressBar_1, \"ProgressBar\");\nvar TypeIndicator_1 = require(\"./TypeIndicator\");\n__createBinding(exports, TypeIndicator_1, \"TypeIndicator\");\n","\"use strict\";\nexports.__esModule = true;\nexports.Label = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar useStyles = react_jss_1.createUseStyles({\n    label: {\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"0.8rem\",\n        fontWeight: 700,\n        color: function (props) { return props.type === \"highlight\" ? \"#ffcd75\" : \"#fff\"; }\n    }\n});\nvar Label = function (props) {\n    var classes = useStyles(props);\n    return React.createElement(\"span\", { className: classes.label }, props.children);\n};\nexports.Label = Label;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.ProgressBar = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar classnames_1 = require(\"classnames\");\nvar getPercentage = function (current, max) { return Math.floor((current / max) * 100) + \"%\"; };\nvar getFillStyle = function (_a) {\n    var _b = _a.vertical, vertical = _b === void 0 ? false : _b, current = _a.current, max = _a.max;\n    return (vertical\n        ? { height: getPercentage(current, max) }\n        : { width: getPercentage(current, max) });\n};\nvar useStyles = react_jss_1.createUseStyles({\n    container: {\n        width: \"101%\",\n        height: \"100%\",\n        position: \"relative\",\n        background: \"#636363\",\n        boxSizing: \"border-box\"\n    },\n    fill: function (props) { return (__assign({ position: \"absolute\", height: \"100%\", width: \"100%\", boxSizing: \"border-box\" }, getFillStyle(props))); },\n    contents: {\n        position: \"absolute\",\n        top: \"0\",\n        right: \"0.5em\",\n        fontWeight: 700,\n        lineHeight: \"1.75em\"\n    }\n});\nvar ProgressBar = function (props) {\n    var classes = useStyles(props);\n    var className = props.className, _a = props.fillClassName, fillClassName = _a === void 0 ? \"\" : _a, _b = props.contentClassName, contentClassName = _b === void 0 ? \"\" : _b, current = props.current, max = props.max, renderContents = props.renderContents, children = props.children;\n    return (React.createElement(\"div\", { className: classnames_1[\"default\"](classes.container, className) },\n        React.createElement(\"div\", { className: classnames_1[\"default\"](classes.fill, fillClassName) }),\n        renderContents\n            && React.createElement(\"span\", { className: classnames_1[\"default\"](classes.contents, contentClassName) }, renderContents(current, max)),\n        children));\n};\nexports.ProgressBar = ProgressBar;\n","\"use strict\";\nexports.__esModule = true;\nexports.useOnClickOutside = void 0;\nvar React = require(\"react\");\nvar useOnClickOutside = function (ref, handler) {\n    React.useEffect(function () {\n        var listener = function (event) {\n            // Do nothing if clicking ref's element or descendent elements\n            if (!ref.current || ref.current.contains(event.target)) {\n                return;\n            }\n            handler(event);\n        };\n        document.addEventListener(\"mousedown\", listener);\n        document.addEventListener(\"touchstart\", listener);\n        return function () {\n            document.removeEventListener(\"mousedown\", listener);\n            document.removeEventListener(\"touchstart\", listener);\n        };\n    }, \n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler]);\n};\nexports.useOnClickOutside = useOnClickOutside;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Piece = exports.StatusPlayerListItem = exports.PlayerListItem = exports.Label = exports.TypeIndicator = exports.ProgressBar = exports.CreatureImage = exports.CardShop = exports.Title = exports.PlayerAvatar = exports.PlayerProfile = exports.PlayerName = exports.PlayerHealthbar = exports.Layout = void 0;\nexports.Layout = require(\"./layout\");\nvar player_1 = require(\"./player\");\n__createBinding(exports, player_1, \"PlayerHealthbar\");\n__createBinding(exports, player_1, \"PlayerName\");\n__createBinding(exports, player_1, \"PlayerProfile\");\n__createBinding(exports, player_1, \"PlayerAvatar\");\n__createBinding(exports, player_1, \"Title\");\nvar cardShop_1 = require(\"./cardShop\");\n__createBinding(exports, cardShop_1, \"CardShop\");\nvar display_1 = require(\"./display\");\n__createBinding(exports, display_1, \"CreatureImage\");\n__createBinding(exports, display_1, \"ProgressBar\");\n__createBinding(exports, display_1, \"TypeIndicator\");\n__createBinding(exports, display_1, \"Label\");\nvar playerList_1 = require(\"./playerList\");\n__createBinding(exports, playerList_1, \"PlayerListItem\");\n__createBinding(exports, playerList_1, \"StatusPlayerListItem\");\nvar piece_1 = require(\"./piece\");\n__createBinding(exports, piece_1, \"Piece\");\n","\"use strict\";\nexports.__esModule = true;\nexports.Half = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar classnames_1 = require(\"classnames\");\nvar styles = function (_a) {\n    var isVertical = _a.isVertical;\n    return ({\n        half: isVertical\n            ? { height: \"50%\" }\n            : { width: \"50%\" }\n    });\n};\nvar UnstyledHalf = (function (props) { return (React.createElement(\"div\", { className: classnames_1[\"default\"](props.classes.half, props.className) }, props.children)); });\nvar Half = react_jss_1[\"default\"](styles)(UnstyledHalf);\nexports.Half = Half;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Layout = exports.Half = void 0;\nvar half_1 = require(\"./half\");\n__createBinding(exports, half_1, \"Half\");\nvar layout_1 = require(\"./layout\");\n__createBinding(exports, layout_1, \"Layout\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.Layout = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar classnames_1 = require(\"classnames\");\nvar isVertical = function (direction) { return direction === \"column\" || direction === \"column-reverse\"; };\nvar getSpacer = function (noSpacer) { return noSpacer ? {} : { padding: \"0.25em\" }; };\nvar useStyles = react_jss_1.createUseStyles({\n    layout: function (_a) {\n        var direction = _a.direction, _b = _a.justifyContent, justifyContent = _b === void 0 ? \"space-between\" : _b, _c = _a.noSpacer, noSpacer = _c === void 0 ? false : _c;\n        return (__assign({ display: \"flex\", justifyContent: justifyContent, flexDirection: direction }, getSpacer(noSpacer)));\n    }\n});\nvar Layout = function (props) {\n    var classes = useStyles(props);\n    var theme = { isVertical: isVertical(props.direction) };\n    return (React.createElement(\"div\", { className: classnames_1[\"default\"](classes.layout, props.className) },\n        React.createElement(react_jss_1.ThemeProvider, { theme: theme }, props.children)));\n};\nexports.Layout = Layout;\n","\"use strict\";\nexports.__esModule = true;\nexports.Healthbar = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar display_1 = require(\"../display\");\nvar getFillBackground = function (_a) {\n    var color = _a.color;\n    if (color === \"spectating\") {\n        return \"#601a4a\";\n    }\n    if (color === \"enemy\") {\n        return \"#e03c71\";\n    }\n    return \"#3887ca\";\n};\nvar useStyles = react_jss_1.createUseStyles({\n    fill: {\n        background: getFillBackground,\n        position: \"absolute\",\n        bottom: 0\n    }\n});\nvar Healthbar = function (props) {\n    var classes = useStyles(props);\n    return (React.createElement(display_1.ProgressBar, { fillClassName: classes.fill, current: props.current, max: props.max, vertical: true }, props.children));\n};\nexports.Healthbar = Healthbar;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Piece = void 0;\nvar piece_1 = require(\"./piece\");\n__createBinding(exports, piece_1, \"Piece\");\n","\"use strict\";\nexports.__esModule = true;\nexports.PieceMeta = void 0;\nvar React = require(\"react\");\nvar stageIndicator_1 = require(\"./stageIndicator\");\nvar display_1 = require(\"../display\");\nvar healthbar_1 = require(\"./healthbar\");\nvar react_jss_1 = require(\"react-jss\");\nvar layout_1 = require(\"../layout\");\nvar useStyles = react_jss_1.createUseStyles({\n    \"meta\": {},\n    \"typeIndicator\": {\n        marginBottom: \"0.25em\",\n        width: \"100%\"\n    },\n    \"healthbarContainer\": {\n        flex: 1,\n        position: \"relative\"\n    },\n    \"stage\": {\n        \"position\": \"absolute\",\n        \"top\": \"10%\",\n        \"left\": \"7%\",\n        \"width\": \"86%\",\n        \"height\": \"80%\",\n        \"& > img\": {\n            width: \"100%\"\n        }\n    },\n    \"metaTop\": {\n        flex: 1,\n        boxSizing: \"border-box\",\n        textAlign: \"center\"\n    },\n    \"@media only screen and (max-width: 799px)\": {\n        meta: {\n            width: \"30%\"\n        },\n        metaTop: {\n            height: \"30%\"\n        }\n    },\n    \"@media only screen and (min-width: 800px)\": {\n        meta: {\n            width: \"22%\"\n        },\n        metaTop: {\n            height: \"22%\"\n        }\n    }\n});\nvar PieceMeta = function (_a) {\n    var piece = _a.piece, className = _a.className, _b = _a.healthbarColor, healthbarColor = _b === void 0 ? \"none\" : _b;\n    var classes = useStyles();\n    return (React.createElement(layout_1.Layout, { direction: \"row\", className: className, noSpacer: true },\n        React.createElement(layout_1.Layout, { direction: \"column\", className: classes.meta, noSpacer: true },\n            React.createElement(display_1.TypeIndicator, { className: classes.typeIndicator, type: piece.definition.type }),\n            React.createElement(\"div\", { className: classes.healthbarContainer },\n                healthbarColor !== \"none\"\n                    && (React.createElement(healthbar_1.Healthbar, { color: healthbarColor, current: piece.currentHealth, max: piece.maxHealth },\n                        React.createElement(stageIndicator_1.StageIndicator, { className: classes.stage, stage: piece.stage }))),\n                healthbarColor === \"none\"\n                    && React.createElement(stageIndicator_1.StageIndicator, { className: classes.stage, stage: piece.stage }))),\n        React.createElement(\"div\", { className: classes.metaTop })));\n};\nexports.PieceMeta = PieceMeta;\n","\"use strict\";\nexports.__esModule = true;\nexports.Piece = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar classnames_1 = require(\"classnames\");\nvar display_1 = require(\"../display\");\nvar meta_1 = require(\"./meta\");\nvar useStyles = react_jss_1.createUseStyles({\n    piece: {\n        \"position\": \"relative\",\n        \"width\": \"100%\",\n        \"height\": \"100%\",\n        \"& > img\": {\n            \"position\": \"absolute\",\n            \"bottom\": 0,\n            \"right\": 0,\n            \"width\": \"80%\"\n        }\n    },\n    metaContainer: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        display: \"flex\",\n        flexDirection: \"row\",\n        width: \"100%\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        padding: \"2%\"\n    }\n});\nvar Piece = React.forwardRef(function (props, ref) {\n    var classes = useStyles();\n    var piece = props.piece, healthbar = props.healthbar, children = props.children, className = props.className, onClick = props.onClick;\n    return (React.createElement(\"div\", { className: classnames_1[\"default\"](classes.piece, className), ref: ref /* todo what to do here? */, onClick: onClick },\n        React.createElement(meta_1.PieceMeta, { piece: piece, healthbarColor: healthbar, className: classes.metaContainer }),\n        React.createElement(display_1.CreatureImage, { definitionId: piece.definitionId, facing: piece.facingAway ? \"back\" : \"front\", baseUrl: \"https://creaturechess.jamesmonger.com\" }),\n        children));\n});\nexports.Piece = Piece;\n","\"use strict\";\nexports.__esModule = true;\nexports.StageIndicator = void 0;\nvar React = require(\"react\");\nvar layout_1 = require(\"../layout\");\nvar StageIndicator = function (_a) {\n    var stage = _a.stage, className = _a.className;\n    var stars = [];\n    if (stage === 0) {\n        return null;\n    }\n    for (var i = 0; i <= stage; i++) {\n        stars.push(React.createElement(\"img\", { key: i, src: \"https://creaturechess.jamesmonger.com/images/ui/star.svg\" }));\n    }\n    return React.createElement(layout_1.Layout, { className: className, direction: \"column\", justifyContent: \"center\", noSpacer: true }, stars);\n};\nexports.StageIndicator = StageIndicator;\n","\"use strict\";\nexports.__esModule = true;\nexports.PlayerAvatar = void 0;\nvar classnames_1 = require(\"classnames\");\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar useStyles = react_jss_1.createUseStyles({\n    image: {\n        height: \"64px\"\n    }\n});\nvar PlayerAvatar = function (_a) {\n    var _b;\n    var player = _a.player;\n    var classes = useStyles();\n    if (!player || !((_b = player.profile) === null || _b === void 0 ? void 0 : _b.picture)) {\n        return null;\n    }\n    return React.createElement(\"img\", { className: classnames_1[\"default\"](classes.image, \"avatar\"), src: \"https://creaturechess.jamesmonger.com/images/front/\" + player.profile.picture + \".png\" });\n};\nexports.PlayerAvatar = PlayerAvatar;\n","\"use strict\";\nexports.__esModule = true;\nexports.PlayerHealthbar = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar display_1 = require(\"../display\");\nvar useStyles = react_jss_1.createUseStyles({\n    playerHealth: {\n        position: \"relative\",\n        display: \"block\",\n        width: \"100%\",\n        height: \"16px\"\n    },\n    fill: {\n        background: \"#20b720\"\n    },\n    content: {\n        position: \"absolute\",\n        top: 0,\n        right: \"0.25em\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"0.8em\",\n        fontWeight: 700,\n        color: \"#000\"\n    }\n});\nvar renderHealthbar = function (current) { return current.toString(); };\nvar PlayerHealthbar = function (_a) {\n    var health = _a.health;\n    var classes = useStyles();\n    return (React.createElement(display_1.ProgressBar, { className: classes.playerHealth, fillClassName: classes.fill, contentClassName: classes.content, current: health, max: 100, renderContents: renderHealthbar }));\n};\nexports.PlayerHealthbar = PlayerHealthbar;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.Title = exports.PlayerProfile = exports.PlayerName = exports.PlayerHealthbar = exports.PlayerAvatar = void 0;\nvar avatar_1 = require(\"./avatar\");\n__createBinding(exports, avatar_1, \"PlayerAvatar\");\nvar healthbar_1 = require(\"./healthbar\");\n__createBinding(exports, healthbar_1, \"PlayerHealthbar\");\nvar name_1 = require(\"./name\");\n__createBinding(exports, name_1, \"PlayerName\");\nvar profile_1 = require(\"./profile\");\n__createBinding(exports, profile_1, \"PlayerProfile\");\nvar title_1 = require(\"./title\");\n__createBinding(exports, title_1, \"Title\");\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.PlayerName = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar getLocalStyles = function (_a) {\n    var _b = _a.isLocal, isLocal = _b === void 0 ? false : _b;\n    return isLocal ? { fontStyle: \"italic\", color: \"#ffcd75\" } : {};\n};\nvar useStyles = react_jss_1.createUseStyles({\n    name: function (props) { return (__assign({ fontFamily: \"Arial, sans-serif\", fontSize: \"0.8em\", fontWeight: 700, color: \"#fff\", textTransform: \"uppercase\" }, getLocalStyles(props))); }\n});\nvar PlayerName = function (props) {\n    var classes = useStyles(props);\n    return React.createElement(\"span\", { className: classes.name },\n        props.position,\n        \".\\u00A0\",\n        props.name);\n};\nexports.PlayerName = PlayerName;\n","\"use strict\";\nexports.__esModule = true;\nexports.PlayerProfile = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar title_1 = require(\"./title\");\nvar name_1 = require(\"./name\");\nvar useStyles = react_jss_1.createUseStyles({\n    container: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        paddingBottom: \"0.15rem\"\n    },\n    name: {\n        marginBottom: \"0.25rem\"\n    }\n});\nvar PlayerProfile = function (props) {\n    var _a;\n    var classes = useStyles();\n    var position = props.position, player = props.player, isLocal = props.isLocal;\n    return (React.createElement(\"div\", { className: classes.container },\n        React.createElement(\"div\", { className: classes.name },\n            React.createElement(name_1.PlayerName, { position: position, name: player.name, isLocal: isLocal })),\n        React.createElement(title_1.Title, { titleId: ((_a = player.profile) === null || _a === void 0 ? void 0 : _a.title) || null })));\n};\nexports.PlayerProfile = PlayerProfile;\n","\"use strict\";\nexports.__esModule = true;\nexports.Title = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar models_1 = require(\"@creature-chess/models\");\nvar getColor = function (titleId) {\n    switch (titleId) {\n        case models_1.PlayerTitle.Developer:\n            return \"#79ffe0\";\n        case models_1.PlayerTitle.Contributor:\n            return \"#e89292\";\n        case models_1.PlayerTitle.HallOfFame:\n            return \"#f7ee85\";\n        default:\n            return \"#d6d0d0\";\n    }\n};\nvar useStyles = react_jss_1.createUseStyles({\n    title: {\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: function (_a) {\n            var _b = _a.size, size = _b === void 0 ? \"small\" : _b;\n            return size === \"small\" ? \"0.65rem\" : \"1rem\";\n        },\n        fontWeight: 700,\n        color: function (_a) {\n            var titleId = _a.titleId;\n            return getColor(titleId);\n        },\n        textAlign: \"inherit\",\n        textTransform: \"uppercase\"\n    }\n});\nvar Title = function (props) {\n    var classes = useStyles(props);\n    if (!props.titleId) {\n        return null;\n    }\n    return React.createElement(\"span\", { className: classes.title }, models_1.TITLES[props.titleId].text);\n};\nexports.Title = Title;\n","\"use strict\";\nexports.__esModule = true;\nexports.BattleInfo = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar classnames_1 = require(\"classnames\");\nvar models_1 = require(\"@creature-chess/models\");\nvar getBattleText = function (battle) {\n    if (!battle) {\n        return \"\";\n    }\n    if (battle.status === models_1.PlayerBattleStatus.IN_PROGRESS) {\n        return \"Battling\";\n    }\n    if (battle.status === models_1.PlayerBattleStatus.FINISHED) {\n        return battle.homeScore + \" - \" + battle.awayScore;\n    }\n    return \"\";\n};\nvar getResultColor = function (props) {\n    if (!props || !props.battle || props.battle.status !== models_1.PlayerBattleStatus.FINISHED) {\n        return \"#ffcd74\";\n    }\n    var _a = props.battle, isHomePlayer = _a.isHomePlayer, homeScore = _a.homeScore, awayScore = _a.awayScore;\n    var win = isHomePlayer ? homeScore > awayScore : awayScore > homeScore;\n    return win ? \"#38b764\" : \"#b13e53\";\n};\nvar useStyles = react_jss_1.createUseStyles({\n    battleInfo: {\n        width: \"fit-content\",\n        padding: \"0.4em 1.2em\",\n        margin: \"0 auto\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"0.75em\",\n        color: \"#c3c3c3\",\n        textAlign: \"center\",\n        background: \"#333\"\n    },\n    highlight: {\n        fontWeight: 700,\n        color: \"#fff\",\n        textTransform: \"uppercase\"\n    },\n    result: function (props) { return ({ color: getResultColor(props) }); }\n});\nvar BattleInfo = function (props) {\n    var classes = useStyles(props);\n    var text = getBattleText(props.battle);\n    if (!props.battle) {\n        return null;\n    }\n    return (React.createElement(\"div\", { className: classes.battleInfo },\n        React.createElement(\"span\", { className: classnames_1[\"default\"](classes.highlight, classes.result) }, text),\n        \"\\u00A0vs\\u00A0\",\n        React.createElement(\"span\", { className: classes.highlight }, props.opponentName || \"\")));\n};\nexports.BattleInfo = BattleInfo;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.StatusPlayerListItem = exports.PlayerListItem = void 0;\nvar playerListItem_1 = require(\"./playerListItem\");\n__createBinding(exports, playerListItem_1, \"PlayerListItem\");\nvar statusPlayerListItem_1 = require(\"./statusPlayerListItem\");\n__createBinding(exports, statusPlayerListItem_1, \"StatusPlayerListItem\");\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.PlayerListItem = void 0;\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar battleInfo_1 = require(\"./battleInfo\");\nvar useOnClickOutside_1 = require(\"../hooks/useOnClickOutside\");\nvar button_1 = require(\"../button\");\nvar streakIndicator_1 = require(\"./streakIndicator\");\nvar display_1 = require(\"../display\");\nvar player_1 = require(\"../player\");\nvar layout_1 = require(\"../layout\");\nvar getDetailReadyColor = function (_a) {\n    var ready = _a.player.ready, _b = _a.showReadyIndicator, showReadyIndicator = _b === void 0 ? false : _b;\n    return (ready && showReadyIndicator) ? \"#20b720\" : \"#ccc\";\n};\nvar useStyles = react_jss_1.createUseStyles({\n    container: function (props) { return ({\n        \"border\": props.isOpponent ? \"3px solid #b13e53\" : \"\",\n        \"boxSizing\": \"border-box\",\n        \"padding\": \"0.5rem\",\n        \"background\": \"#566c86\",\n        \"&:not(:last-child)\": {\n            marginBottom: \"0.25em\"\n        }\n    }); },\n    details: function (props) { return ({\n        flex: 1,\n        paddingLeft: \"0.5em\",\n        borderLeft: \"5px solid \" + getDetailReadyColor(props)\n    }); },\n    badges: {\n        \"&>:not(:last-child)\": {\n            marginRight: \"0.25em\"\n        }\n    }\n});\nvar PlayerListItem = function (props) {\n    var classes = useStyles(props);\n    var index = props.index, player = props.player, opponentName = props.opponentName, isLocal = props.isLocal, onSpectateClick = props.onSpectateClick, _a = props.currentlySpectating, currentlySpectating = _a === void 0 ? false : _a;\n    var ref = react_1.useRef();\n    var _b = __read(react_1.useState(false), 2), isExpanded = _b[0], setIsExpanded = _b[1];\n    useOnClickOutside_1.useOnClickOutside(ref, function () { return setIsExpanded(false); });\n    var toggleExpanded = function () {\n        // don't open for local player\n        if (isLocal) {\n            return;\n        }\n        setIsExpanded(!isExpanded);\n    };\n    return (React.createElement(\"div\", { className: classes.container, onClick: toggleExpanded, ref: ref },\n        React.createElement(layout_1.Layout, { direction: \"row\", noSpacer: true },\n            React.createElement(\"div\", { className: \"picture\" },\n                React.createElement(player_1.PlayerAvatar, { player: player })),\n            React.createElement(\"div\", { className: classes.details },\n                React.createElement(layout_1.Layout, { direction: \"row\", noSpacer: true },\n                    React.createElement(layout_1.Half, null,\n                        React.createElement(player_1.PlayerProfile, { position: index + 1, player: player, isLocal: isLocal })),\n                    React.createElement(layout_1.Half, null,\n                        React.createElement(player_1.PlayerHealthbar, { health: player.health }))),\n                React.createElement(layout_1.Layout, { direction: \"row\" },\n                    React.createElement(layout_1.Half, { className: classes.badges },\n                        React.createElement(display_1.Label, { type: \"highlight\" },\n                            \"$\",\n                            player.money),\n                        React.createElement(display_1.Label, null,\n                            \"Lv \",\n                            player.level)),\n                    React.createElement(layout_1.Half, null, currentlySpectating || isExpanded\n                        ? React.createElement(button_1.Button, { onClick: onSpectateClick }, currentlySpectating ? \"Stop spectating\" : \"Spectate\")\n                        : React.createElement(layout_1.Layout, { direction: \"row\", noSpacer: true },\n                            React.createElement(battleInfo_1.BattleInfo, { battle: player.battle, opponentName: opponentName }),\n                            React.createElement(streakIndicator_1.StreakIndicator, { type: player.streakType, amount: player.streakAmount }))))))));\n};\nexports.PlayerListItem = PlayerListItem;\n","\"use strict\";\nexports.__esModule = true;\nexports.StatusPlayerListItem = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar battleInfo_1 = require(\"./battleInfo\");\nvar display_1 = require(\"../display\");\nvar useStyles = react_jss_1.createUseStyles({\n    container: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        padding: \"0.4rem\",\n        marginBottom: \"0.25em\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"1.2em\",\n        fontWeight: \"700\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        textTransform: \"uppercase\",\n        background: \"#3b3d40\"\n    },\n    // todo make this into a component\n    col: {\n        flex: 1,\n        display: \"flex\",\n        flexDirection: \"column\",\n        textAlign: \"center\",\n        justifyContent: \"space-around\"\n    },\n    subtitle: {\n        padding: \"0.5em 0\",\n        marginTop: \"0.5em\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"0.9em\",\n        fontWeight: 700,\n        color: \"#847878\",\n        textAlign: \"center\",\n        textTransform: \"uppercase\",\n        borderTop: \"2px solid #847878\",\n        borderBottom: \"2px solid #847878\"\n    },\n    name: {\n        fontSize: \"1.8em\",\n        fontStyle: \"italic\",\n        color: \"#cecece\"\n    }\n});\nvar StatusPlayerListItem = function (_a) {\n    var name = _a.name, opponentName = _a.opponentName, battle = _a.battle, status = _a.status, subtitle = _a.subtitle;\n    var classes = useStyles();\n    return (React.createElement(\"div\", { className: classes.container },\n        React.createElement(\"div\", { className: classes.col },\n            React.createElement(\"span\", { className: classes.name }, name)),\n        React.createElement(\"div\", { className: classes.col },\n            React.createElement(display_1.Label, null, status),\n            React.createElement(battleInfo_1.BattleInfo, { battle: battle, opponentName: opponentName }),\n            subtitle && React.createElement(\"span\", { className: classes.subtitle }, subtitle))));\n};\nexports.StatusPlayerListItem = StatusPlayerListItem;\n","\"use strict\";\nexports.__esModule = true;\nexports.StreakIndicator = void 0;\nvar React = require(\"react\");\nvar react_jss_1 = require(\"react-jss\");\nvar models_1 = require(\"@creature-chess/models\");\nvar getBackground = function (type) { return type === models_1.StreakType.WIN ? \"#38b764\" : \"#b13e53\"; };\nvar useStyles = react_jss_1.createUseStyles({\n    indicator: function (props) { return ({\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        boxSizing: \"border-box\",\n        padding: \"0 0.4em\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"0.8em\",\n        color: \"#fff\",\n        background: getBackground(props.type),\n        borderRadius: \"50%\"\n    }); }\n});\nvar StreakIndicator = function (props) {\n    var classes = useStyles(props);\n    if (props.type === null || !props.amount || props.amount === 1) {\n        return null;\n    }\n    return React.createElement(\"div\", { className: classes.indicator }, props.amount);\n};\nexports.StreakIndicator = StreakIndicator;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = x => {}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\nvar deferredModules = [\n\t[\"./src/index.tsx\",\"vendors-node_modules_auth0_auth0-react_dist_auth0-react_esm_js-node_modules_fortawesome_free--aa700d\"]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = x => {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_creature_chess_app\"] = self[\"webpackChunk_creature_chess_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = x => {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (x => {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\n__webpack_require__.x();\n"],"sourceRoot":""}