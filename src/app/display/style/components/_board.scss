.chessboard {
    position: relative;
    margin-bottom: 1em;
}

.tile-row {
    width: 100%;
    box-sizing: border-box;
    line-height: 0;
    white-space: nowrap;
}

.tile {
    position: relative;
    display: inline-block;
    box-sizing: border-box;
    user-select: none;

    &.selected {
        box-sizing: border-box;
        border: 2px solid #ff5200;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;

        &.not-allowed {
            background: #484848;
            opacity: 0.4;
        }
    }

    &.bench {
        .image {
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    }
}

.positionable-piece {
    position: absolute;
}

.opponent-board-placeholder {
    width: 100%;
    box-sizing: border-box;
    text-align: center;
    background: #717171;
    border: 3px solid #2d2d2d;

    .label {
        display: block;
        padding-top: 2em;
        margin-bottom: 2em;
        font-family: Arial, sans-serif;
        font-size: 1.3em;
        color: #fff;
    }
}

.piece {
    position: relative;
    z-index: $piece-z-index;
    width: 100%;
    height: 100%;

    .image {
        position: absolute;
        bottom: 0;
        left: 9%;
        width: 82%;
        height: 82%;
    }

    $move-duration: 300ms;

    &.move-up {
        @keyframes move-up {
            0% { top: $tile-size; }
            100% { top: 0; }
        }
        animation-name: move-up;
        animation-duration: $move-duration;
    }

    &.move-right {
        @keyframes move-right {
            0% { left: -$tile-size; }
            100% { left: 0; }
        }
        animation-name: move-right;
        animation-duration: $move-duration;
    }

    &.move-down {
        @keyframes move-down {
            0% { top: -$tile-size; }
            100% { top: 0; }
        }
        animation-name: move-down;
        animation-duration: $move-duration;
    }

    &.move-left {
        @keyframes move-left {
            0% { left: $tile-size; }
            100% { left: 0; }
        }
        animation-name: move-left;
        animation-duration: $move-duration;
    }

    $attack-movement-distance-multiplier: 3px;
    $attack-movement-distance: calc(#{$attack-movement-distance-multiplier} * var(--attackPower));
    $attack-duration: 200ms;

    &.attack-up {
        @keyframes attack-up {
            0% { top: 0; }
            50% { top: calc(#{$attack-movement-distance} * -1); }
            100% { top: 0; }
        }
        animation-name: attack-up;
        animation-duration: $attack-duration;
    }

    &.attack-right {
        @keyframes attack-right {
            0% { left: 0; }
            50% { left: $attack-movement-distance; }
            100% { left: 0; }
        }
        animation-name: attack-right;
        animation-duration: $attack-duration;
    }

    &.attack-down {
        @keyframes attack-down {
            0% { top: 0; }
            50% { top: $attack-movement-distance; }
            100% { top: 0; }
        }
        animation-name: attack-down;
        animation-duration: $attack-duration;
    }

    &.attack-left {
        @keyframes attack-left {
            0% { left: 0; }
            50% { left: calc(#{$attack-movement-distance} * -1); }
            100% { left: 0; }
        }
        animation-name: attack-left;
        animation-duration: $attack-duration;
    }

    &.hit {
        $hit-rotation-multiplier: 1deg;
        $hit-rotation: calc(#{$hit-rotation-multiplier} * var(--hitPower));
        @keyframes hit {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(calc(#{$hit-rotation} * -1)); }
            75% { transform: rotate($hit-rotation); }
            100% { transform: rotate(0deg); }
        }
        animation-name: hit;
        animation-duration: 200ms;
    }

    &.celebrate {
        $celebrate-movement-distance: 20px;
        @keyframes celebrate {
            25% { transform: translate($celebrate-movement-distance, -$celebrate-movement-distance) skewX(-20deg); }
            50% { transform: translate(0, 0) skewX(0); }
            75% { transform: translate(-$celebrate-movement-distance, -$celebrate-movement-distance) skewX(20deg); }
        }
        animation-name: celebrate;
        animation-duration: 1000ms;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
    }

    &.dying {
        @keyframes dying {
            100% { transform: scale(0); }
        }
        animation-name: dying;
        animation-duration: 1000ms;
        animation-iteration-count: 1;
    }
}
