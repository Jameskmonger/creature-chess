.piece {
    position: relative;
    z-index: $piece-z-index;
    width: 100%;
    height: 100%;

    $move-duration: 300ms;

    .damage-per-turn {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        padding: 0.1em 0;
        font-family: Arial, sans-serif;
        font-size: 0.7em;
        font-weight: 700;
        line-height: 1em;
        color: #ffff21;
        background: rgba(0, 0, 0, 0.4);
    }

    &.move {
        @keyframes move {
            0% {
                top: calc(#{$tile-size} * var(--moveYDirection) * -1);
                left: calc(#{$tile-size} * var(--moveXDirection) * -1);
            }

            100% {
                top: 0;
                left: 0;
            }
        }
        animation-name: move;
        animation-duration: $move-duration;
    }

    $attack-duration: 200ms;

    &.attack-basic {
        $attack-movement-distance-multiplier: 3px;
        $attack-movement-distance: calc(#{$attack-movement-distance-multiplier} * var(--attackPower));
        @keyframes attack-basic {
            0% {
                top: 0;
                left: 0;
            }

            50% {
                top: calc(#{$attack-movement-distance} * var(--attackYDirection));
                left: calc(#{$attack-movement-distance} * var(--attackXDirection));
            }

            100% {
                top: 0;
                left: 0;
            }
        }
        animation-name: attack-basic;
        animation-duration: $attack-duration;
    }

    .projectile {
        display: none;
    }

    &.attack-shoot .projectile {
        $half-tile-size: calc(#{$tile-size} / 2);
        @keyframes attack-shoot {
            0% {
                top: $half-tile-size;
                left: $half-tile-size;
            }

            100% {
                top: calc(#{$tile-size} * var(--attackYDirection) * -1 + #{$half-tile-size});
                left: calc(#{$tile-size} * var(--attackXDirection) * -1 + #{$half-tile-size});
            }
        }
        position: absolute;
        display: block;
        animation-name: attack-shoot;
        animation-duration: $attack-duration;
    }

    &.hit {
        $hit-rotation-multiplier: 1deg;
        $hit-rotation: calc(#{$hit-rotation-multiplier} * var(--hitPower));
        @keyframes hit {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(calc(#{$hit-rotation} * -1)); }
            75% { transform: rotate($hit-rotation); }
            100% { transform: rotate(0deg); }
        }
        animation-name: hit;
        animation-duration: 200ms;
    }

    &.celebrate {
        $celebrate-movement-distance: 20px;
        @keyframes celebrate {
            25% { transform: translate($celebrate-movement-distance, -$celebrate-movement-distance) skewX(-20deg); }
            50% { transform: translate(0, 0) skewX(0); }
            75% { transform: translate(-$celebrate-movement-distance, -$celebrate-movement-distance) skewX(20deg); }
        }
        animation-name: celebrate;
        animation-duration: 1000ms;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
    }

    &.dying {
        @keyframes dying {
            100% { transform: scale(0); }
        }
        animation-name: dying;
        animation-duration: 1000ms;
        animation-iteration-count: 1;
    }
}
